{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal/index.mjs","../src/article/Spacer.svelte","../src/article/FminstLabel.svelte","../node_modules/kd-tree-javascript/kdTree-min.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-color/src/math.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-scale/src/init.js","../src/shared/js/sine.js","../src/shared/js/random.js","../src/shared/components/Slider.svelte","../src/visualizations/cech_visualization/components/Visualization.svelte","../src/visualizations/fmnist_visualization/js/load-data.js","../node_modules/color-name/index.js","../node_modules/simple-swizzle/index.js","../node_modules/simple-swizzle/node_modules/is-arrayish/index.js","../node_modules/color-string/index.js","../node_modules/color-convert/conversions.js","../node_modules/color-convert/route.js","../node_modules/color-convert/index.js","../node_modules/color/index.js","../src/visualizations/fmnist_visualization/components/VisualizationSideBySide.svelte","../src/shared/js/parse-binary.js","../src/shared/js/parameters.js","../src/visualizations/hyperparameters_visualization/js/load-data.js","../src/shared/js/generators.js","../src/shared/js/toy-configs.js","../src/visualizations/toy_comparison_visualization/js/demos.js","../src/shared/js/visualize.js","../src/visualizations/hyperparameters_visualization/components/Preview.svelte","../node_modules/umap-js/dist/utils.js","../node_modules/umap-js/dist/heap.js","../node_modules/umap-js/dist/matrix.js","../node_modules/umap-js/dist/tree.js","../node_modules/umap-js/dist/nn_descent.js","../node_modules/ml-levenberg-marquardt/src/errorCalculation.js","../node_modules/is-any-array/src/index.js","../node_modules/ml-array-rescale/lib-es6/index.js","../node_modules/ml-array-min/lib-es6/index.js","../node_modules/ml-array-max/lib-es6/index.js","../node_modules/ml-matrix/src/dc/lu.js","../node_modules/ml-matrix/src/dc/util.js","../node_modules/ml-matrix/src/dc/svd.js","../node_modules/ml-matrix/src/util.js","../node_modules/ml-matrix/src/views/base.js","../node_modules/ml-matrix/src/views/transpose.js","../node_modules/ml-matrix/src/views/row.js","../node_modules/ml-matrix/src/views/sub.js","../node_modules/ml-matrix/src/views/selection.js","../node_modules/ml-matrix/src/views/rowSelection.js","../node_modules/ml-matrix/src/views/columnSelection.js","../node_modules/ml-matrix/src/views/column.js","../node_modules/ml-matrix/src/views/flipRow.js","../node_modules/ml-matrix/src/views/flipColumn.js","../node_modules/ml-matrix/src/abstractMatrix.js","../node_modules/ml-matrix/src/matrix.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js","../node_modules/ml-matrix/src/dc/qr.js","../node_modules/ml-matrix/src/decompositions.js","../node_modules/ml-levenberg-marquardt/src/step.js","../node_modules/ml-levenberg-marquardt/src/index.js","../node_modules/umap-js/dist/umap.js","../node_modules/umap-js/dist/index.js","../src/visualizations/hyperparameters_visualization/components/Visualization.svelte","../src/visualizations/mammoth_visualization/js/load-data.js","../src/visualizations/mammoth_visualization/js/colors.js","../src/visualizations/mammoth_visualization/js/tween.js","../src/visualizations/mammoth_visualization/components/Projection2d.svelte","../src/visualizations/mammoth_visualization/js/render.js","../src/visualizations/mammoth_visualization/components/Umap2d.svelte","../src/visualizations/mammoth_visualization/components/Projection3d.svelte","../src/visualizations/mammoth_visualization/components/VisualizationUmap.svelte","../src/visualizations/mammoth_visualization/components/Tsne2d.svelte","../src/visualizations/mammoth_visualization/js/times.js","../src/visualizations/mammoth_visualization/components/VisualizationTsne.svelte","../src/shared/js/run-demo.js","../src/visualizations/toy_visualization/components/Preview.svelte","../src/visualizations/toy_visualization/components/Parameter.svelte","../src/visualizations/toy_visualization/components/Visualization.svelte","../src/visualizations/toy_comparison_visualization/js/load_data.js","../src/visualizations/toy_comparison_visualization/components/Preview.svelte","../src/visualizations/toy_comparison_visualization/components/Visualization.svelte","../src/article/Article.svx","../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n        : ctx.$$scope.ctx;\n}\nfunction get_slot_changes(definition, ctx, changed, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n        : ctx.$$scope.changed || {};\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\nfunction run_tasks() {\n    tasks.forEach(task => {\n        if (!task[0](now())) {\n            tasks.delete(task);\n            task[1]();\n        }\n    });\n    running = tasks.size > 0;\n    if (running)\n        raf(run_tasks);\n}\nfunction clear_loops() {\n    // for testing...\n    tasks.forEach(task => tasks.delete(task));\n    running = false;\n}\nfunction loop(fn) {\n    let task;\n    if (!running) {\n        running = true;\n        raf(run_tasks);\n    }\n    return {\n        promise: new Promise(fulfil => {\n            tasks.add(task = [fn, fulfil]);\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n    const target = {};\n    for (const k in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    for (const key in attributes) {\n        if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key in node) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = current_component;\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment) {\n        $$.update($$.dirty);\n        run_all($$.before_update);\n        $$.fragment.p($$.dirty, $$.ctx);\n        $$.dirty = null;\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = key && { [key]: value };\n        const child_ctx = assign(assign({}, info.ctx), info.resolved);\n        const block = type && (info.current = type)(child_ctx);\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            flush();\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = { [info.value]: promise };\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(changed, child_ctx);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args) {\n    const attributes = Object.assign({}, ...args);\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === undefined)\n            return;\n        if (value === true)\n            str += \" \" + name;\n        const escaped = String(value)\n            .replace(/\"/g, '&#34;')\n            .replace(/'/g, '&#39;');\n        str += \" \" + name + \"=\" + JSON.stringify(escaped);\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    if (component.$$.props.indexOf(name) === -1)\n        return;\n    component.$$.bound[name] = callback;\n    callback(component.$$.ctx[name]);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    if (component.$$.fragment) {\n        run_all(component.$$.on_destroy);\n        component.$$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        component.$$.on_destroy = component.$$.fragment = null;\n        component.$$.ctx = {};\n    }\n}\nfunction make_dirty(component, key) {\n    if (!component.$$.dirty) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty = blank_object();\n    }\n    component.$$.dirty[key] = true;\n}\nfunction init(component, options, instance, create_fragment, not_equal, prop_names) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const props = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props: prop_names,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty: null\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, props, (key, ret, value = ret) => {\n            if ($$.ctx && not_equal($$.ctx[key], $$.ctx[key] = value)) {\n                if ($$.bound[key])\n                    $$.bound[key](value);\n                if (ready)\n                    make_dirty(component, key);\n            }\n            return ret;\n        })\n        : props;\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    $$.fragment = create_fragment($$.ctx);\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement !== 'undefined') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, detail));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  export let height = 50;\n</script>\n\n<style>\n  div.spacer {\n    width: 100%;\n  }\n</style>\n\n<div class=\"spacer\" style=\"height: {height}px\" />\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  export let label;\n\n  const onClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (window._selectFmnistLabel) {\n      window._selectFmnistLabel(e, label);\n    }\n\n    return false;\n  };\n</script>\n\n<style>\n\n</style>\n\n<a class=\"label\" href=\"#\" on:click={onClick}>{label}</a>\n","/**\n * k-d Tree JavaScript - V 1.01\n *\n * https://github.com/ubilabs/kd-tree-javascript\n *\n * @author Mircea Pricop <pricop@ubilabs.net>, 2012\n * @author Martin Kleppe <kleppe@ubilabs.net>, 2012\n * @author Ubilabs http://ubilabs.net, 2012\n * @license MIT License <http://www.opensource.org/licenses/mit-license.php>\n */!function(t,n){\"function\"==typeof define&&define.amd?define([\"exports\"],n):n(\"object\"==typeof exports?exports:t)}(this,function(t){function n(t,n,o){this.obj=t,this.left=null,this.right=null,this.parent=o,this.dimension=n}function o(t){this.content=[],this.scoreFunction=t}o.prototype={push:function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},pop:function(){var t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t},peek:function(){return this.content[0]},remove:function(t){for(var n=this.content.length,o=0;o<n;o++)if(this.content[o]==t){var i=this.content.pop();return void(o!=n-1&&(this.content[o]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(o):this.sinkDown(o)))}throw new Error(\"Node not found.\")},size:function(){return this.content.length},bubbleUp:function(t){for(var n=this.content[t];t>0;){var o=Math.floor((t+1)/2)-1,i=this.content[o];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[o]=n,this.content[t]=i,t=o}},sinkDown:function(t){for(var n=this.content.length,o=this.content[t],i=this.scoreFunction(o);;){var e=2*(t+1),r=e-1,l=null;if(r<n){var u=this.content[r],h=this.scoreFunction(u);h<i&&(l=r)}if(e<n){var s=this.content[e];this.scoreFunction(s)<(null==l?i:h)&&(l=e)}if(null==l)break;this.content[t]=this.content[l],this.content[l]=o,t=l}}},t.kdTree=function(t,i,e){function r(t,o,i){var l,u,h=o%e.length;return 0===t.length?null:1===t.length?new n(t[0],h,i):(t.sort(function(t,n){return t[e[h]]-n[e[h]]}),l=Math.floor(t.length/2),u=new n(t[l],h,i),u.left=r(t.slice(0,l),o+1,u),u.right=r(t.slice(l+1),o+1,u),u)}var l=this;Array.isArray(t)?this.root=r(t,0,null):function(t){function n(t){t.left&&(t.left.parent=t,n(t.left)),t.right&&(t.right.parent=t,n(t.right))}l.root=t,n(l.root)}(t),this.toJSON=function(t){t||(t=this.root);var o=new n(t.obj,t.dimension,null);return t.left&&(o.left=l.toJSON(t.left)),t.right&&(o.right=l.toJSON(t.right)),o},this.insert=function(t){function o(n,i){if(null===n)return i;var r=e[n.dimension];return t[r]<n.obj[r]?o(n.left,n):o(n.right,n)}var i,r,l=o(this.root,null);null!==l?(i=new n(t,(l.dimension+1)%e.length,l),r=e[l.dimension],t[r]<l.obj[r]?l.left=i:l.right=i):this.root=new n(t,0,null)},this.remove=function(t){function n(o){if(null===o)return null;if(o.obj===t)return o;var i=e[o.dimension];return t[i]<o.obj[i]?n(o.left,o):n(o.right,o)}function o(t){function n(t,o){var i,r,l,u,h;return null===t?null:(i=e[o],t.dimension===o?null!==t.left?n(t.left,o):t:(r=t.obj[i],l=n(t.left,o),u=n(t.right,o),h=t,null!==l&&l.obj[i]<r&&(h=l),null!==u&&u.obj[i]<h.obj[i]&&(h=u),h))}var i,r,u;if(null===t.left&&null===t.right)return null===t.parent?void(l.root=null):(u=e[t.parent.dimension],void(t.obj[u]<t.parent.obj[u]?t.parent.left=null:t.parent.right=null));null!==t.right?(r=(i=n(t.right,t.dimension)).obj,o(i),t.obj=r):(r=(i=n(t.left,t.dimension)).obj,o(i),t.right=t.left,t.left=null,t.obj=r)}var i;null!==(i=n(l.root))&&o(i)},this.nearest=function(t,n,r){function u(o){function r(t,o){f.push([t,o]),f.size()>n&&f.pop()}var l,h,s,c,a=e[o.dimension],g=i(t,o.obj),p={};for(c=0;c<e.length;c+=1)c===o.dimension?p[e[c]]=t[e[c]]:p[e[c]]=o.obj[e[c]];h=i(p,o.obj),null!==o.right||null!==o.left?(u(l=null===o.right?o.left:null===o.left?o.right:t[a]<o.obj[a]?o.left:o.right),(f.size()<n||g<f.peek()[1])&&r(o,g),(f.size()<n||Math.abs(h)<f.peek()[1])&&null!==(s=l===o.left?o.right:o.left)&&u(s)):(f.size()<n||g<f.peek()[1])&&r(o,g)}var h,s,f;if(f=new o(function(t){return-t[1]}),r)for(h=0;h<n;h+=1)f.push([null,r]);for(l.root&&u(l.root),s=[],h=0;h<Math.min(n,f.content.length);h+=1)f.content[h][0]&&s.push([f.content[h][0].obj,f.content[h][1]]);return s},this.balanceFactor=function(){function t(n){return null===n?0:Math.max(t(n.left),t(n.right))+1}function n(t){return null===t?0:n(t.left)+n(t.right)+1}return t(l.root)/(Math.log(n(l.root))/Math.log(2))}},t.BinaryHeap=o});\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport { Random } from \"./random\";\n\nconst random = new Random(112);\nconst constrain = (n, max, min = 0) => Math.max(Math.min(n, max), min);\nconst getRandom = x => Math.floor(x * random.nextFloat());\nconst getRandomPoint = () => ({\n  x: getRandom(width),\n  y: getRandom(height)\n});\nconst getSinePoint = (width, height, pointRadius) => {\n  let x = getRandom(width);\n  let y = (Math.sin((x / width) * 6 * Math.PI) * height) / 4 + height / 2;\n  y = y + getRandom(height / 5) * (random.nextFloat() > 0.5 ? 1 : -1);\n  return {\n    x: constrain(x, width - pointRadius, pointRadius),\n    y: constrain(y, height - pointRadius, pointRadius)\n  };\n};\n\nexport function makeSine(nPoints, dimensions, pointRadius = 5) {\n  const { width, height } = dimensions;\n\n  const points = [];\n  for (let i = 0; i < nPoints; i++) {\n    const point = getSinePoint(width, height, pointRadius);\n    points.push({ ...point, index: i });\n  }\n\n  return points;\n}\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nexport class Random {\n  constructor(seed) {\n    this._seed = seed % 2147483647;\n    if (this._seed <= 0) this._seed += 2147483646;\n  }\n  next() {\n    return (this._seed = (this._seed * 16807) % 2147483647);\n  }\n  nextFloat(opt_minOrMax, opt_max) {\n    // We know that result of next() will be 1 to 2147483646 (inclusive).\n    return (this.next() - 1) / 2147483646;\n  }\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  export let value;\n  export let min = 0;\n  export let max = 100;\n  export let step = 1;\n  export let onChange = () => {};\n\n  const onSliderChange = e => {\n    onChange(e.target.value);\n  };\n</script>\n\n<style>\n  /* Resets */\n\n  input[type=\"range\"] {\n    -webkit-appearance: none; /* Hides the slider so that custom slider can be made */\n    width: 100%; /* Specific width is required for Firefox. */\n    background: transparent; /* Otherwise white in Chrome */\n    border: none;\n    margin: 0;\n  }\n\n  input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n  }\n\n  input[type=\"range\"]:focus {\n    outline: none; /* Removes the blue border. You should probably do some kind of focus styling for accessibility reasons though. */\n  }\n\n  input[type=\"range\"]::-ms-track {\n    width: 100%;\n    cursor: pointer;\n\n    /* Hides the slider so custom styles can be added */\n    background: transparent;\n    border-color: transparent;\n    color: transparent;\n  }\n\n  /* Thumb */\n\n  /* Special styling for WebKit/Blink */\n  input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 14px;\n    width: 14px;\n    border-radius: 50%;\n    background: steelblue;\n    cursor: pointer;\n    margin-top: -6px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */\n  }\n\n  /* All the same stuff for Firefox */\n  input[type=\"range\"]::-moz-range-thumb {\n    height: 14px;\n    width: 14px;\n    border-radius: 50%;\n    background: steelblue;\n    cursor: pointer;\n    border: none;\n  }\n\n  /* All the same stuff for IE */\n  input[type=\"range\"]::-ms-thumb {\n    height: 14px;\n    width: 14px;\n    border-radius: 50%;\n    background: grey;\n    cursor: pointer;\n  }\n\n  /* Track */\n\n  input[type=\"range\"]::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 2px;\n    border: none;\n  }\n\n  input[type=\"range\"]:focus::-webkit-slider-runnable-track {\n    background: rgba(0, 0, 0, 0.15);\n  }\n\n  input[type=\"range\"]::-moz-range-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 2px;\n    border: none;\n  }\n\n  input[type=\"range\"]::-ms-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 2px;\n    border: none;\n  }\n  input[type=\"range\"]::-ms-fill-lower {\n    background: rgba(0, 0, 0, 0.1);\n  }\n  input[type=\"range\"]:focus::-ms-fill-lower {\n    background: rgba(0, 0, 0, 0.1);\n  }\n  input[type=\"range\"]::-ms-fill-upper {\n    background: rgba(0, 0, 0, 0.1);\n  }\n  input[type=\"range\"]:focus::-ms-fill-upper {\n    background: rgba(0, 0, 0, 0.1);\n  }\n</style>\n\n<input type=\"range\" {min} {max} {step} bind:value on:change={onSliderChange} />\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate } from \"svelte\";\n  import kdTree from \"kd-tree-javascript\";\n  import { scaleLinear } from \"d3-scale\";\n  import { makeSine } from \"../../../shared/js/sine\";\n  import Slider from \"../../../shared/components/Slider.svelte\";\n\n  const COLORS = [\n    [44, 123, 182],\n    [0, 166, 202],\n    [0, 204, 188],\n    [144, 235, 157]\n  ];\n  const colorScale = scaleLinear().range(COLORS);\n  const POINT_RADIUS = 9;\n\n  let canvas;\n  let extent = 0;\n\n  let lastNNearest = 5;\n  let nNearest = 5;\n\n  const width = 2048;\n  const height = 1024;\n  const nPoints = 100;\n\n  colorScale.domain(\n    COLORS.map((_, i) => {\n      return (i / (COLORS.length - 1)) * width;\n    })\n  );\n\n  let points = makeSine(nPoints, { width, height }, POINT_RADIUS);\n\n  const refreshPoints = () => {\n    points = makeSine(nPoints, { width, height }, POINT_RADIUS);\n    compute();\n    redraw();\n  };\n\n  let nearestEntries;\n  let distances;\n  let maxDistances;\n  let nearestRadii;\n  let colors;\n\n  const compute = () => {\n    const distanceFn = (a, b) =>\n      Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    const tree = new kdTree.kdTree([...points], distanceFn, [\"x\", \"y\"]);\n    nearestEntries = points.map(point => {\n      const entries = tree.nearest(point, nNearest + 1);\n      const sorted = entries.sort((a, b) => a[1] - b[1]).slice(1, nNearest + 1);\n      return sorted.map(entry => {\n        const point = entry[0];\n        const { x, y, index } = point;\n        return { point: { x, y }, index, distance: entry[1] };\n      });\n    });\n    distances = nearestEntries.map(e => e.map(f => f.distance));\n    maxDistances = distances.map(d => d[d.length - 1]);\n\n    nearestRadii = points.map((point, i) => {\n      const fromPointToFurthest = maxDistances[i];\n      const fromPointToNearest = distances[i][0];\n\n      const j = nearestEntries[i][0].index;\n      const fromNearestToItsFurthest = maxDistances[j];\n      const fromNearestToItsNearest = distances[j][0];\n\n      if (fromPointToNearest > fromNearestToItsNearest) {\n        const k = nearestEntries[j][0].index;\n        const fromNearestNearestToItsFurthest = maxDistances[k];\n        const percentFromNearestToNearest =\n          fromNearestToItsNearest /\n          (fromNearestToItsFurthest + fromNearestNearestToItsFurthest);\n        const nearestRadius =\n          fromNearestToItsFurthest * percentFromNearestToNearest;\n        return fromPointToNearest - nearestRadius;\n      } else {\n        const percentFromPointToNearest =\n          fromPointToNearest / (fromPointToFurthest + fromNearestToItsFurthest);\n        return percentFromPointToNearest * fromPointToFurthest;\n      }\n    });\n    colors = points.map(point => {\n      return colorScale(point.x);\n    });\n  };\n\n  const redraw = () => {\n    if (lastNNearest !== nNearest) {\n      compute();\n      lastNNearest = nNearest;\n    }\n\n    const ctx = canvas.getContext(\"2d\");\n    const percent = extent / 100;\n\n    ctx.clearRect(0, 0, width, height);\n    // Draw the actual point\n    points.forEach((point, i) => {\n      const { x, y } = point;\n      ctx.beginPath();\n      ctx.arc(x, y, POINT_RADIUS, 0, 2 * Math.PI);\n      const [r, g, b] = colors[i];\n      ctx.fillStyle = `rgba(${r},${g},${b},1)`;\n      ctx.fill();\n    });\n\n    // Draw the fuzzy radius past the first neighbor\n    points.forEach((point, i) => {\n      const { x, y } = point;\n      const nearestRadius = nearestRadii[i];\n      const maxRadius = maxDistances[i];\n      const radius = maxRadius * percent;\n\n      const [r, g, b] = colors[i];\n      const start = `rgba(${r},${g},${b},0.2)`;\n      const end = `rgba(${r},${g},${b},0.0)`;\n\n      // prettier-ignore\n      const gradient = ctx.createRadialGradient(x, y, nearestRadius, x, y, maxRadius * 0.85);\n      gradient.addColorStop(0, start);\n      gradient.addColorStop(1, end);\n\n      // Fill outer circle with gradient\n      ctx.beginPath();\n      ctx.arc(x, y, radius, 0, 2 * Math.PI);\n      ctx.fillStyle = gradient;\n      ctx.fill();\n\n      // Fill inner circle again\n      ctx.beginPath();\n      const innerRadius = Math.min(radius, nearestRadius);\n      ctx.arc(x, y, innerRadius, 0, 2 * Math.PI);\n      ctx.fillStyle = `rgba(${r},${g},${b},0.2)`;\n      ctx.fill();\n    });\n\n    // Draw the connections between points\n    points.forEach((point, i) => {\n      const { x, y } = point;\n      const maxDistance = maxDistances[i];\n      const r = maxDistance * percent;\n\n      const nearest = nearestEntries[i];\n      for (const entry of nearest) {\n        const { point: other, index: otherIndex, distance } = entry;\n        const otherR = maxDistances[otherIndex] * percent;\n\n        if (distance <= r + otherR) {\n          const fraction = distance / maxDistance;\n          ctx.beginPath();\n          ctx.moveTo(point.x, point.y);\n          ctx.lineTo(other.x, other.y);\n          ctx.lineWidth = 2 + 5 * (1 - fraction);\n          const [r, g, b] = colors[i];\n          const color = `rgba(${r},${g},${b},${1 - 0.5 * fraction})`;\n          ctx.strokeStyle = color;\n          ctx.stroke();\n        }\n      }\n    });\n  };\n\n  compute();\n\n  afterUpdate(() => {\n    redraw();\n  });\n</script>\n\n<style>\n  canvas {\n    background-color: #fff;\n    width: 100%;\n    margin-bottom: 20px;\n  }\n\n  .container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n  }\n\n  .controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 6px;\n  }\n\n  label {\n    margin-right: 10px;\n    width: 200px;\n  }\n\n  .refresh {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    cursor: pointer;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .refresh {\n      top: 0;\n    }\n  }\n\n  .refresh:hover {\n    color: #333;\n  }\n</style>\n\n<div class=\"container\">\n  <canvas bind:this={canvas} {width} {height} />\n  <div class=\"controls\">\n    <label>extent: {extent}%</label>\n    <Slider min={0} max={100} step={1} bind:value={extent} />\n  </div>\n  <div class=\"controls\">\n    <label>n_nearest: {nNearest}</label>\n    <Slider min={2} max={10} step={1} bind:value={nNearest} />\n  </div>\n  <div class=\"refresh\" on:click={refreshPoints}>\n    <i class=\"material-icons\">refresh</i>\n  </div>\n</div>\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n// Reorder the labels in order to group similar categories.\nconst reorderedLabels = [0, 6, 2, 4, 3, 5, 7, 9, 1, 8];\n\nfunction process(data) {\n  const originalToReordered = {};\n  reorderedLabels.forEach(\n    (oldIndex, newIndex) => (originalToReordered[oldIndex] = newIndex)\n  );\n  data.labels = data.labels.map(index => {\n    return originalToReordered[index];\n  });\n\n  const originalLabels = [...data.labelNames];\n  data.labelNames = reorderedLabels.map(index => {\n    return originalLabels[index];\n  });\n  return data;\n}\n\nexport async function loadData() {\n  const res = await fetch(`fmnist_tsne_vs_umap.json`);\n  const json = await res.json();\n  return process(json);\n}\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {};\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (colorNames.hasOwnProperty(name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar keyword = /(\\D+)/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = Math.round((parseInt(hexAlpha + hexAlpha, 16) / 255) * 100) / 100;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\trgb[3] = parseFloat(match[4]);\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\n\t\tif (!rgb) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = (parseFloat(match[1]) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = num.toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","/* MIT license */\nvar cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nvar reverseKeywords = {};\nfor (var key in cssKeywords) {\n\tif (cssKeywords.hasOwnProperty(key)) {\n\t\treverseKeywords[cssKeywords[key]] = key;\n\t}\n}\n\nvar convert = module.exports = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\n// hide .channels and .labels properties\nfor (var model in convert) {\n\tif (convert.hasOwnProperty(model)) {\n\t\tif (!('channels' in convert[model])) {\n\t\t\tthrow new Error('missing channels property: ' + model);\n\t\t}\n\n\t\tif (!('labels' in convert[model])) {\n\t\t\tthrow new Error('missing channel labels property: ' + model);\n\t\t}\n\n\t\tif (convert[model].labels.length !== convert[model].channels) {\n\t\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t\t}\n\n\t\tvar channels = convert[model].channels;\n\t\tvar labels = convert[model].labels;\n\t\tdelete convert[model].channels;\n\t\tdelete convert[model].labels;\n\t\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\t\tObject.defineProperty(convert[model], 'labels', {value: labels});\n\t}\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar min = Math.min(r, g, b);\n\tvar max = Math.max(r, g, b);\n\tvar delta = max - min;\n\tvar h;\n\tvar s;\n\tvar l;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tl = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tvar rdif;\n\tvar gdif;\n\tvar bdif;\n\tvar h;\n\tvar s;\n\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar v = Math.max(r, g, b);\n\tvar diff = v - Math.min(r, g, b);\n\tvar diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = s = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tvar r = rgb[0];\n\tvar g = rgb[1];\n\tvar b = rgb[2];\n\tvar h = convert.rgb.hsl(rgb)[0];\n\tvar w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar c;\n\tvar m;\n\tvar y;\n\tvar k;\n\n\tk = Math.min(1 - r, 1 - g, 1 - b);\n\tc = (1 - r - k) / (1 - k) || 0;\n\tm = (1 - g - k) / (1 - k) || 0;\n\ty = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\nfunction comparativeDistance(x, y) {\n\treturn (\n\t\tMath.pow(x[0] - y[0], 2) +\n\t\tMath.pow(x[1] - y[1], 2) +\n\t\tMath.pow(x[2] - y[2], 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tvar reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tvar currentClosestDistance = Infinity;\n\tvar currentClosestKeyword;\n\n\tfor (var keyword in cssKeywords) {\n\t\tif (cssKeywords.hasOwnProperty(keyword)) {\n\t\t\tvar value = cssKeywords[keyword];\n\n\t\t\t// Compute comparative distance\n\t\t\tvar distance = comparativeDistance(rgb, value);\n\n\t\t\t// Check if its less, if so set as closest\n\t\t\tif (distance < currentClosestDistance) {\n\t\t\t\tcurrentClosestDistance = distance;\n\t\t\t\tcurrentClosestKeyword = keyword;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\n\t// assume sRGB\n\tr = r > 0.04045 ? Math.pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? Math.pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? Math.pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);\n\n\tvar x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tvar y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tvar z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tvar xyz = convert.rgb.xyz(rgb);\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tvar h = hsl[0] / 360;\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar t1;\n\tvar t2;\n\tvar t3;\n\tvar rgb;\n\tvar val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tt1 = 2 * l - t2;\n\n\trgb = [0, 0, 0];\n\tfor (var i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tvar h = hsl[0];\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar smin = s;\n\tvar lmin = Math.max(l, 0.01);\n\tvar sv;\n\tvar v;\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tv = (l + s) / 2;\n\tsv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tvar h = hsv[0] / 60;\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar hi = Math.floor(h) % 6;\n\n\tvar f = h - Math.floor(h);\n\tvar p = 255 * v * (1 - s);\n\tvar q = 255 * v * (1 - (s * f));\n\tvar t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tvar h = hsv[0];\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\tvar vmin = Math.max(v, 0.01);\n\tvar lmin;\n\tvar sl;\n\tvar l;\n\n\tl = (2 - s) * v;\n\tlmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tvar h = hwb[0] / 360;\n\tvar wh = hwb[1] / 100;\n\tvar bl = hwb[2] / 100;\n\tvar ratio = wh + bl;\n\tvar i;\n\tvar v;\n\tvar f;\n\tvar n;\n\n\t// wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\ti = Math.floor(6 * h);\n\tv = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tn = wh + f * (v - wh); // linear interpolation\n\n\tvar r;\n\tvar g;\n\tvar b;\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v; g = n; b = wh; break;\n\t\tcase 1: r = n; g = v; b = wh; break;\n\t\tcase 2: r = wh; g = v; b = n; break;\n\t\tcase 3: r = wh; g = n; b = v; break;\n\t\tcase 4: r = n; g = wh; b = v; break;\n\t\tcase 5: r = v; g = wh; b = n; break;\n\t}\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tvar c = cmyk[0] / 100;\n\tvar m = cmyk[1] / 100;\n\tvar y = cmyk[2] / 100;\n\tvar k = cmyk[3] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = 1 - Math.min(1, c * (1 - k) + k);\n\tg = 1 - Math.min(1, m * (1 - k) + k);\n\tb = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tvar x = xyz[0] / 100;\n\tvar y = xyz[1] / 100;\n\tvar z = xyz[2] / 100;\n\tvar r;\n\tvar g;\n\tvar b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * Math.pow(r, 1.0 / 2.4)) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * Math.pow(g, 1.0 / 2.4)) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * Math.pow(b, 1.0 / 2.4)) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tvar x = xyz[0];\n\tvar y = xyz[1];\n\tvar z = xyz[2];\n\tvar l;\n\tvar a;\n\tvar b;\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? Math.pow(x, 1 / 3) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? Math.pow(y, 1 / 3) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? Math.pow(z, 1 / 3) : (7.787 * z) + (16 / 116);\n\n\tl = (116 * y) - 16;\n\ta = 500 * (x - y);\n\tb = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar x;\n\tvar y;\n\tvar z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tvar y2 = Math.pow(y, 3);\n\tvar x2 = Math.pow(x, 3);\n\tvar z2 = Math.pow(z, 3);\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tvar l = lab[0];\n\tvar a = lab[1];\n\tvar b = lab[2];\n\tvar hr;\n\tvar h;\n\tvar c;\n\n\thr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tc = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tvar l = lch[0];\n\tvar c = lch[1];\n\tvar h = lch[2];\n\tvar a;\n\tvar b;\n\tvar hr;\n\n\thr = h / 360 * 2 * Math.PI;\n\ta = c * Math.cos(hr);\n\tb = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\tvar value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tvar ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tvar r = args[0];\n\tvar g = args[1];\n\tvar b = args[2];\n\n\t// we use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tvar ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tvar color = args % 10;\n\n\t// handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tvar mult = (~~(args > 50) + 1) * 0.5;\n\tvar r = ((color & 1) * mult) * 255;\n\tvar g = (((color >> 1) & 1) * mult) * 255;\n\tvar b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// handle greyscale\n\tif (args >= 232) {\n\t\tvar c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tvar rem;\n\tvar r = Math.floor(args / 36) / 5 * 255;\n\tvar g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tvar b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tvar integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tvar match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tvar colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(function (char) {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tvar integer = parseInt(colorString, 16);\n\tvar r = (integer >> 16) & 0xFF;\n\tvar g = (integer >> 8) & 0xFF;\n\tvar b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tvar r = rgb[0] / 255;\n\tvar g = rgb[1] / 255;\n\tvar b = rgb[2] / 255;\n\tvar max = Math.max(Math.max(r, g), b);\n\tvar min = Math.min(Math.min(r, g), b);\n\tvar chroma = (max - min);\n\tvar grayscale;\n\tvar hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma + 4;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tvar s = hsl[1] / 100;\n\tvar l = hsl[2] / 100;\n\tvar c = 1;\n\tvar f = 0;\n\n\tif (l < 0.5) {\n\t\tc = 2.0 * s * l;\n\t} else {\n\t\tc = 2.0 * s * (1.0 - l);\n\t}\n\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tvar s = hsv[1] / 100;\n\tvar v = hsv[2] / 100;\n\n\tvar c = s * v;\n\tvar f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tvar h = hcg[0] / 360;\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tvar pure = [0, 0, 0];\n\tvar hi = (h % 1) * 6;\n\tvar v = hi % 1;\n\tvar w = 1 - v;\n\tvar mg = 0;\n\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar v = c + g * (1.0 - c);\n\tvar f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\n\tvar l = g * (1.0 - c) + 0.5 * c;\n\tvar s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tvar c = hcg[1] / 100;\n\tvar g = hcg[2] / 100;\n\tvar v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tvar w = hwb[1] / 100;\n\tvar b = hwb[2] / 100;\n\tvar v = 1 - b;\n\tvar c = v - w;\n\tvar g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tvar val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tvar integer = (val << 16) + (val << 8) + val;\n\n\tvar string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tvar val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","var conversions = require('./conversions');\n\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tvar graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tvar models = Object.keys(conversions);\n\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tvar graph = buildGraph();\n\tvar queue = [fromModel]; // unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tvar current = queue.pop();\n\t\tvar adjacents = Object.keys(conversions[current]);\n\n\t\tfor (var len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tvar adjacent = adjacents[i];\n\t\t\tvar node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tvar path = [graph[toModel].parent, toModel];\n\tvar fn = conversions[graph[toModel].parent][toModel];\n\n\tvar cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tvar graph = deriveBFS(fromModel);\n\tvar conversion = {};\n\n\tvar models = Object.keys(graph);\n\tfor (var len = models.length, i = 0; i < len; i++) {\n\t\tvar toModel = models[i];\n\t\tvar node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// no possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","var conversions = require('./conversions');\nvar route = require('./route');\n\nvar convert = {};\n\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tvar wrappedFn = function (args) {\n\t\tif (args === undefined || args === null) {\n\t\t\treturn args;\n\t\t}\n\n\t\tif (arguments.length > 1) {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t}\n\n\t\tvar result = fn(args);\n\n\t\t// we're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (var len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tvar routes = route(fromModel);\n\tvar routeModels = Object.keys(routes);\n\n\trouteModels.forEach(function (toModel) {\n\t\tvar fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","'use strict';\n\nvar colorString = require('color-string');\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\n\nvar skippedModels = [\n\t// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// shouldn't really be in color-convert either...\n\t'hex'\n];\n\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n\thashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\n\nvar limiters = {};\n\nfunction Color(obj, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(obj, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tvar i;\n\tvar channels;\n\n\tif (obj == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (obj instanceof Color) {\n\t\tthis.model = obj.model;\n\t\tthis.color = obj.color.slice();\n\t\tthis.valpha = obj.valpha;\n\t} else if (typeof obj === 'string') {\n\t\tvar result = colorString.get(obj);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + obj);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (obj.length) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tvar newArr = _slice.call(obj, 0, channels);\n\t\tthis.color = zeroArray(newArr, channels);\n\t\tthis.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n\t} else if (typeof obj === 'number') {\n\t\t// this is always RGB - can be converted later on.\n\t\tobj &= 0xFFFFFF;\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(obj >> 16) & 0xFF,\n\t\t\t(obj >> 8) & 0xFF,\n\t\t\tobj & 0xFF\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tvar keys = Object.keys(obj);\n\t\tif ('alpha' in obj) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n\t\t}\n\n\t\tvar hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tvar labels = convert[this.model].labels;\n\t\tvar color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(obj[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tvar limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString: function () {\n\t\treturn this.string();\n\t},\n\n\ttoJSON: function () {\n\t\treturn this[this.model]();\n\t},\n\n\tstring: function (places) {\n\t\tvar self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString: function (places) {\n\t\tvar self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tvar args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray: function () {\n\t\treturn this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n\t},\n\n\tobject: function () {\n\t\tvar result = {};\n\t\tvar channels = convert[this.model].channels;\n\t\tvar labels = convert[this.model].labels;\n\n\t\tfor (var i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray: function () {\n\t\tvar rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject: function () {\n\t\tvar rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround: function (places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n\t},\n\n\talpha: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) { return ((val % 360) + 360) % 360; }), // eslint-disable-line brace-style\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(100)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(100)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex: function (val) {\n\t\tif (arguments.length) {\n\t\t\treturn new Color(val);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\trgbNumber: function () {\n\t\tvar rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity: function () {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tvar rgb = this.rgb().color;\n\n\t\tvar lum = [];\n\t\tfor (var i = 0; i < rgb.length; i++) {\n\t\t\tvar chan = rgb[i] / 255;\n\t\t\tlum[i] = (chan <= 0.03928) ? chan / 12.92 : Math.pow(((chan + 0.055) / 1.055), 2.4);\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast: function (color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tvar lum1 = this.luminosity();\n\t\tvar lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel: function (color2) {\n\t\tvar contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7.1) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark: function () {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tvar rgb = this.rgb().color;\n\t\tvar yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight: function () {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate: function () {\n\t\tvar rgb = this.rgb();\n\t\tfor (var i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\t\treturn rgb;\n\t},\n\n\tlighten: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate: function (ratio) {\n\t\tvar hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken: function (ratio) {\n\t\tvar hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale: function () {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tvar rgb = this.rgb().color;\n\t\tvar val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(val, val, val);\n\t},\n\n\tfade: function (ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer: function (ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate: function (degrees) {\n\t\tvar hsl = this.hsl();\n\t\tvar hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix: function (mixinColor, weight) {\n\t\t// ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\t\tvar color1 = mixinColor.rgb();\n\t\tvar color2 = this.rgb();\n\t\tvar p = weight === undefined ? 0.5 : weight;\n\n\t\tvar w = 2 * p - 1;\n\t\tvar a = color1.alpha() - color2.alpha();\n\n\t\tvar w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n\t\tvar w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t}\n};\n\n// model conversion methods and static constructors\nObject.keys(convert).forEach(function (model) {\n\tif (skippedModels.indexOf(model) !== -1) {\n\t\treturn;\n\t}\n\n\tvar channels = convert[model].channels;\n\n\t// conversion methods\n\tColor.prototype[model] = function () {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (arguments.length) {\n\t\t\treturn new Color(arguments, model);\n\t\t}\n\n\t\tvar newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n\t\treturn new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (color) {\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(_slice.call(arguments), channels);\n\t\t}\n\t\treturn new Color(color, model);\n\t};\n});\n\nfunction roundTo(num, places) {\n\treturn Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (num) {\n\t\treturn roundTo(num, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tmodel.forEach(function (m) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t});\n\n\tmodel = model[0];\n\n\treturn function (val) {\n\t\tvar result;\n\n\t\tif (arguments.length) {\n\t\t\tif (modifier) {\n\t\t\t\tval = modifier(val);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = val;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(val) {\n\treturn Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n\tfor (var i = 0; i < length; i++) {\n\t\tif (typeof arr[i] !== 'number') {\n\t\t\tarr[i] = 0;\n\t\t}\n\t}\n\n\treturn arr;\n}\n\nmodule.exports = Color;\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { onMount } from \"svelte\";\n  import { loadData } from \"../js/load-data\";\n  import Color from \"color\";\n\n  let umapContainer;\n  let tsneContainer;\n\n  let umapScatterGL;\n  let tsneScatterGL;\n\n  let umapDataset;\n  let tsneDataset;\n\n  let data;\n  let metadata;\n  let colorsByLabel;\n  let isLoaded = false;\n  let selectedLabelIndices = new Set();\n\n  let isOrbiting = true;\n\n  const onPointClick = i => {\n    const labelIndex = i === null ? null : metadata[i].labelIndex;\n    onCategoryClick(labelIndex)();\n    stopOrbitAnimations();\n  };\n\n  const stopOrbitAnimations = () => {\n    tsneScatterGL.stopOrbitAnimation();\n    umapScatterGL.stopOrbitAnimation();\n  };\n\n  window._selectFmnistLabel = (e, label) => {\n    const labelIndex = data.labelNames.findIndex(l => {\n      return l.toLowerCase() === label;\n    });\n    if (labelIndex !== -1) {\n      onCategoryClick(labelIndex)(e);\n    }\n  };\n\n  const onCategoryClick = index => e => {\n    if (e && e.shiftKey) {\n      selectedLabelIndices.add(index);\n    } else {\n      if (selectedLabelIndices.has(index) || index === null) {\n        selectedLabelIndices.clear();\n      } else {\n        selectedLabelIndices.clear();\n        selectedLabelIndices.add(index);\n      }\n    }\n\n    // Necessary to force a rerender of the category labels\n    selectedLabelIndices = selectedLabelIndices;\n\n    if (selectedLabelIndices.size === 0) return setDefaultPointColorer();\n\n    [umapScatterGL, tsneScatterGL].forEach(scatterGl => {\n      scatterGl.setPointColorer(i => {\n        const labelIndex = metadata[i].labelIndex;\n        return selectedLabelIndices.has(labelIndex)\n          ? colorsByLabel[labelIndex].string()\n          : \"white\";\n      });\n    });\n  };\n\n  const setDefaultPointColorer = () => {\n    [umapScatterGL, tsneScatterGL].forEach(scatterGl => {\n      scatterGl.setPointColorer(i => {\n        const labelIndex = metadata[i].labelIndex;\n        return colorsByLabel[labelIndex].string();\n      });\n    });\n  };\n\n  const getBackgroundColor = (labelIndex, selectedLabelIndices) => {\n    const isSelected = selectedLabelIndices.has(labelIndex);\n    const noneSelected = selectedLabelIndices.size === 0;\n    const color = colorsByLabel[labelIndex];\n    return isSelected || noneSelected\n      ? color.string()\n      : color.lighten(0.35).string();\n  };\n\n  const toggleOrbit = () => {\n    isOrbiting = true;\n    [umapScatterGL, tsneScatterGL].forEach(scatterGl => {\n      scatterGl.startOrbitAnimation();\n    });\n  };\n\n  onMount(async () => {\n    data = await loadData();\n    isLoaded = true;\n\n    metadata = [];\n    const umapPoints = [];\n    const tsnePoints = [];\n\n    data.umapProjection.forEach((vector, index) => {\n      const labelIndex = data.labels[index];\n      umapPoints.push([vector[2], vector[0], vector[1]]);\n      const tsneVector = data.tsneProjection[index];\n      tsnePoints.push(tsneVector);\n      metadata.push({\n        labelIndex,\n        label: data.labelNames[labelIndex]\n      });\n    });\n\n    const dataset = {\n      dimensions: 3,\n      metadata,\n      spriteMetadata: {\n        spriteImage: \"spritesheet.png\",\n        singleSpriteSize: [28, 28]\n      }\n    };\n\n    umapDataset = {\n      ...dataset,\n      points: umapPoints\n    };\n\n    tsneDataset = {\n      ...dataset,\n      points: tsnePoints\n    };\n\n    colorsByLabel = [...new Array(10)].map((_, i) => {\n      let hue = Math.floor((360 / 10) * i);\n      return new Color({ h: hue, s: 100, l: 70 });\n    });\n\n    const onCameraMove = () => {\n      if (isOrbiting) isOrbiting = false;\n      stopOrbitAnimations();\n    };\n\n    const scatterGLOptions = {\n      renderMode: \"SPRITE\",\n      selectEnabled: false,\n      onClick: onPointClick,\n      onCameraMove\n    };\n\n    umapScatterGL = new ScatterGL(umapContainer, {\n      ...scatterGLOptions,\n      camera: { zoom: 1.2 },\n      onHover: d => tsneScatterGL.setHoverPointIndex(d)\n    });\n    tsneScatterGL = new ScatterGL(tsneContainer, {\n      ...scatterGLOptions,\n      camera: { zoom: 0.9 },\n      onHover: d => umapScatterGL.setHoverPointIndex(d)\n    });\n    setDefaultPointColorer();\n\n    umapScatterGL.render(umapDataset);\n    tsneScatterGL.render(tsneDataset);\n  });\n</script>\n\n<style>\n  .container {\n    position: relative;\n    width: 100%;\n    min-height: 500px;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      min-height: 400px;\n    }\n  }\n\n  .scatter-gl-container {\n    height: 100%;\n    position: absolute;\n    width: 50%;\n    top: 0;\n  }\n\n  .umap-container {\n    left: 0;\n    width: 55%;\n  }\n\n  .tsne-container {\n    right: 0;\n    width: 45%;\n  }\n\n  .categories {\n    width: 100%;\n    position: absolute;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    flex-wrap: wrap;\n    bottom: 0;\n  }\n\n  .category {\n    cursor: pointer;\n    margin: 2px;\n    padding: 8px;\n    user-select: none;\n    color: #333;\n  }\n\n  .category.selected {\n    /*font-weight: 800;*/\n    outline: 1px solid #000;\n  }\n\n  .category:hover {\n    text-decoration: underline;\n  }\n\n  .projection-types {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    font-weight: 600;\n    user-select: none;\n  }\n\n  .projection-type-umap {\n    width: 55%;\n    text-align: center;\n  }\n\n  .projection-type-tsne {\n    width: 45%;\n    text-align: center;\n  }\n\n  .orbit {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    cursor: pointer;\n  }\n  .orbit:hover {\n    color: #333;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .orbit {\n      top: 0;\n    }\n  }\n</style>\n\n<div class=\"container\">\n  <div class=\"scatter-gl-container umap-container\" bind:this={umapContainer} />\n  <div class=\"scatter-gl-container tsne-container\" bind:this={tsneContainer} />\n  <div class=\"projection-types\">\n    <div class=\"projection-type-umap\">UMAP</div>\n    <div class=\"projection-type-umap\">t-SNE</div>\n  </div>\n  <div class=\"categories\">\n    {#if isLoaded}\n      {#each data.labelNames as labelName, labelIndex}\n        <div\n          class=\"category {selectedLabelIndices.has(labelIndex) ? 'selected' : ''}\"\n          style=\"background-color: {getBackgroundColor(labelIndex, selectedLabelIndices)}\"\n          on:click={onCategoryClick(labelIndex)}>\n          {labelName}\n        </div>\n      {/each}\n    {/if}\n  </div>\n  {#if !isOrbiting}\n    <div class=\"orbit\" on:click={toggleOrbit}>\n      <i class=\"material-icons\">3d_rotation</i>\n    </div>\n  {/if}\n</div>\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nclass BitArray {\n  constructor(length) {\n    length = Math.ceil(length / 32);\n    this.backingArray = new Uint32Array(length);\n    this.length = length;\n  }\n  get(n) {\n    return (this.backingArray[(n / 32) | 0] & (1 << n % 32)) !== 0;\n  }\n  on(n) {\n    this.backingArray[(n / 32) | 0] |= 1 << n % 32;\n  }\n  off(n) {\n    this.backingArray[(n / 32) | 0] &= ~(1 << n % 32);\n  }\n  toggle(n) {\n    this.backingArray[(n / 32) | 0] ^= 1 << n % 32;\n  }\n}\n\nmodule.exports.encode = function encode(numbers, nBits) {\n  const count = numbers.length;\n  const encodeBitArray = new BitArray(count * nBits);\n\n  for (let i = 0; i < numbers.length; i++) {\n    const number = numbers[i];\n    for (let j = 0; j < nBits; j++) {\n      const bitIndex = i * nBits + j;\n      if ((number & (2 ** j)) !== 0) encodeBitArray.on(bitIndex);\n    }\n  }\n\n  const byteArrayLength = Math.ceil((count * nBits) / 8);\n  const byteArray = new Uint8Array(byteArrayLength);\n  for (let i = 0; i < byteArray.length; i++) {\n    let number = 0;\n    for (let j = 0; j < 8; j++) {\n      const bitIndex = i * 8 + j;\n      const bit = encodeBitArray.get(bitIndex);\n      number += bit ? 2 ** j : 0;\n    }\n    byteArray[i] = number;\n  }\n  return byteArray;\n};\n\nmodule.exports.decode = function(byteArray, count, nBits) {\n  const totalBits = count * nBits;\n  const parseBitArray = new BitArray(totalBits);\n  for (let i = 0; i < byteArray.length; i++) {\n    const byte = byteArray[i];\n    for (let j = 0; j < 8; j++) {\n      const bitIndex = i * 8 + j;\n      if (byte & (2 ** j)) parseBitArray.on(bitIndex);\n    }\n  }\n\n  const parsed = [];\n  for (let index = 0; index < count; index++) {\n    let number = 0;\n    for (let bitIndex = 0; bitIndex < nBits; bitIndex++) {\n      const absBitIndex = index * nBits + bitIndex;\n      if (parseBitArray.get(absBitIndex)) number += 2 ** bitIndex;\n    }\n    parsed.push(number);\n  }\n  return parsed;\n};\n\nmodule.exports.toString = function toString(arr) {\n  return String.fromCharCode.apply(null, arr);\n};\n\nmodule.exports.fromString = function fromString(str) {\n  return Uint8Array.from(str, x => x.charCodeAt(0));\n};\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nexport const TSNE_MAMMOTH_PERPLEXITIES = [\n  5,\n  15,\n  30,\n  50,\n  100,\n  200,\n  500,\n  1000,\n  2000\n];\n\nexport const N_BITS_HYPERPARAMETERS = 8;\nexport const N_BITS_TOY_COMPARISON = 8;\nexport const N_BITS_MAMMOTH = 10;\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport { decode, fromString } from \"../../../shared/js/parse-binary\";\nimport { N_BITS_HYPERPARAMETERS } from \"../../../shared/js/parameters\";\n\nconst dataCache = new Map();\n\nfunction process(compressed) {\n  const processed = compressed.map((entry, index) => {\n    // Define an object with getter for lazy processing of the data for each key\n    const object = {};\n    Object.keys(entry).forEach(key => {\n      Object.defineProperty(object, key, {\n        get: function() {\n          const cacheKey = `${index}:${key}`;\n          if (dataCache.has(cacheKey)) return dataCache.get(cacheKey);\n\n          const encoded = entry[key];\n          const { data, length, nDimensions, ranges } = encoded;\n          const byteArray = fromString(atob(data));\n          const decoded = decode(\n            byteArray,\n            nDimensions * length,\n            N_BITS_HYPERPARAMETERS\n          );\n          const unzipped = [];\n          const [rangeX, rangeY] = ranges;\n          const { min: minX, max: maxX } = rangeX;\n          const { min: minY, max: maxY } = rangeY;\n          const scale = 2 ** N_BITS_HYPERPARAMETERS;\n          for (let i = 0; i < decoded.length; i += 2) {\n            const x = (decoded[i] / scale) * (maxX - minX) + minX;\n            const y = (decoded[i + 1] / scale) * (maxY - minY) + minY;\n            unzipped.push([x, y]);\n          }\n\n          dataCache.set(cacheKey, unzipped);\n          return unzipped;\n        },\n        enumerable: true\n      });\n    });\n    return object;\n  });\n  return processed;\n}\n\nexport async function loadData() {\n  const res = await fetch(`hyperparameters_encoded.json`);\n  const json = await res.json();\n  return process(json);\n}\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport * as d3 from \"d3\";\n// import { createCanvas } from \"canvas\"; // Temporarily disabled for build\n\n// Euclidean distance.\nexport function dist(a, b) {\n  var d = 0;\n  for (var i = 0; i < a.length; i++) {\n    d += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return Math.sqrt(d);\n}\n\n// Gaussian generator, mean = 0, std = 1.\nvar normal = d3.randomNormal();\n\n// Create random Gaussian vector.\nexport function normalVector(dim) {\n  var p = [];\n  for (var j = 0; j < dim; j++) {\n    p[j] = normal();\n  }\n  return p;\n}\n\n// Scale the given vector.\nexport function scale(vector, a) {\n  for (var i = 0; i < vector.length; i++) {\n    vector[i] *= a;\n  }\n}\n\n// Add two vectors.\nexport function add(a, b) {\n  var n = a.length;\n  var c = [];\n  for (var i = 0; i < n; i++) {\n    c[i] = a[i] + b[i];\n  }\n  return c;\n}\n\n// A point with color info.\nexport class Point {\n  constructor(coords, color) {\n    this.coords = coords;\n    this.color = color || \"#039\";\n  }\n}\n\n// Adds colors to points depending on 2D location of original.\nexport function addSpatialColors(points) {\n  var xExtent = d3.extent(points, function(p) {\n    return p.coords[0];\n  });\n  var yExtent = d3.extent(points, function(p) {\n    return p.coords[1];\n  });\n  var xScale = d3\n    .scaleLinear()\n    .domain(xExtent)\n    .range([0, 255]);\n  var yScale = d3\n    .scaleLinear()\n    .domain(yExtent)\n    .range([0, 255]);\n  points.forEach(function(p) {\n    var c1 = ~~xScale(p.coords[0]);\n    var c2 = ~~yScale(p.coords[1]);\n    p.color = \"rgb(20,\" + c1 + \",\" + c2 + \")\";\n  });\n}\n\n// Convenience function to wrap 2d arrays as Points, using a default\n// color scheme.\nexport function makePoints(originals) {\n  var points = originals.map(function(p) {\n    return new Point(p);\n  });\n  addSpatialColors(points);\n  return points;\n}\n\n// Creates distance matrix for t-SNE input.\nexport function distanceMatrix(points) {\n  var matrix = [];\n  var n = points.length;\n  for (var i = 0; i < n; i++) {\n    for (var j = 0; j < n; j++) {\n      matrix.push(dist(points[i].coords, points[j].coords));\n    }\n  }\n  return matrix;\n}\n\n// Data in shape of 2D grid.\nexport function gridData(size) {\n  var points = [];\n  for (var x = 0; x < size; x++) {\n    for (var y = 0; y < size; y++) {\n      points.push([x, y]);\n    }\n  }\n  return makePoints(points);\n}\n\n// Gaussian cloud, symmetric, of given dimension.\nexport function gaussianData(n, dim) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p = normalVector(dim);\n    points.push(new Point(p));\n  }\n  return points;\n}\n\n// Elongated Gaussian ellipsoid.\nexport function longGaussianData(n, dim) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p = normalVector(dim);\n    for (var j = 0; j < dim; j++) {\n      p[j] /= 1 + j;\n    }\n    points.push(new Point(p));\n  }\n  return points;\n}\n\n// Return a color for the given angle.\nexport function angleColor(t) {\n  var hue = ~~((300 * t) / (2 * Math.PI));\n  return \"hsl(\" + hue + \",50%,50%)\";\n}\n\n// Data in a 2D circle, regularly spaced.\nexport function circleData(numPoints) {\n  var points = [];\n  for (var i = 0; i < numPoints; i++) {\n    var t = (2 * Math.PI * i) / numPoints;\n    points.push(new Point([Math.cos(t), Math.sin(t)], angleColor(t)));\n  }\n  return points;\n}\n\n// Random points on a 2D circle.\nexport function randomCircleData(numPoints) {\n  var points = [];\n  for (var i = 0; i < numPoints; i++) {\n    var t = 2 * Math.PI * Math.random();\n    points.push(new Point([Math.cos(t), Math.sin(t)], angleColor(t)));\n  }\n  return points;\n}\n\n// Clusters arranged in a circle.\nexport function randomCircleClusterData(numPoints) {\n  var points = [];\n  for (var i = 0; i < numPoints; i++) {\n    var t = (2 * Math.PI * i) / numPoints; //Math.random();\n    var color = angleColor(t);\n    for (var j = 0; j < 20; j++) {\n      var x = Math.cos(t) + 0.01 * normal();\n      var y = Math.sin(t) + 0.01 * normal();\n      points.push(new Point([x, y], color));\n    }\n  }\n  return points;\n}\n\n// Two 2D clusters of different sizes.\nexport function twoDifferentClustersData2D(n) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    points.push(new Point([10 * normal(), 10 * normal()], \"#039\"));\n    points.push(new Point([100 + normal(), normal()], \"#f90\"));\n  }\n  return points;\n}\n\n// Two clusters of the same size.\nexport function twoClustersData(n, dim) {\n  dim = dim || 50;\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    points.push(new Point(normalVector(dim), \"#039\"));\n    var v = normalVector(dim);\n    v[0] += 10;\n    points.push(new Point(v, \"#f90\"));\n  }\n  return points;\n}\n\n// Two differently sized clusters, of arbitrary dimensions.\nexport function twoDifferentClustersData(n, dim, scale) {\n  dim = dim || 50;\n  scale = scale || 10;\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    points.push(new Point(normalVector(dim), \"#039\"));\n    var v = normalVector(dim);\n    for (var j = 0; j < dim; j++) {\n      v[j] /= scale;\n    }\n    v[0] += 20;\n    points.push(new Point(v, \"#f90\"));\n  }\n  return points;\n}\n\n// Three clusters, at different distances from each other, in 2D\nexport function threeClustersData2d(n) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    points.push(new Point([normal(), normal()], \"#039\"));\n    points.push(new Point([10 + normal(), normal()], \"#f90\"));\n    points.push(new Point([50 + normal(), normal()], \"#6a3\"));\n  }\n  return points;\n}\n\n// Three clusters, at different distances from each other, in any dimension.\nexport function threeClustersData(n, dim) {\n  dim = dim || 50;\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p1 = normalVector(dim);\n    points.push(new Point(p1, \"#039\"));\n    var p2 = normalVector(dim);\n    p2[0] += 10;\n    points.push(new Point(p2, \"#f90\"));\n    var p3 = normalVector(dim);\n    p3[0] += 50;\n    points.push(new Point(p3, \"#6a3\"));\n  }\n  return points;\n}\n\n// One tiny cluster inside of a big cluster.\nexport function subsetClustersData(n, dim) {\n  dim = dim || 2;\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p1 = normalVector(dim);\n    points.push(new Point(p1, \"#039\"));\n    var p2 = normalVector(dim);\n    scale(p2, 50);\n    points.push(new Point(p2, \"#f90\"));\n  }\n  return points;\n}\n\n// Data in a rough simplex.\nexport function simplexData(n, noise) {\n  noise = noise || 0.5;\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p = [];\n    for (var j = 0; j < n; j++) {\n      p[j] = i == j ? 1 + noise * normal() : 0;\n    }\n    points.push(new Point(p));\n  }\n  return points;\n}\n\n// Uniform points from a cube.\nexport function cubeData(n, dim) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var p = [];\n    for (var j = 0; j < dim; j++) {\n      p[j] = Math.random();\n    }\n    points.push(new Point(p));\n  }\n  return points;\n}\n\n// Points in two unlinked rings.\nexport function unlinkData(n) {\n  var points = [];\n  function rotate(x, y, z) {\n    var u = x;\n    var cos = Math.cos(0.4);\n    var sin = Math.sin(0.4);\n    var v = cos * y + sin * z;\n    var w = -sin * y + cos * z;\n    return [u, v, w];\n  }\n  for (var i = 0; i < n; i++) {\n    var t = (2 * Math.PI * i) / n;\n    var sin = Math.sin(t);\n    var cos = Math.cos(t);\n    // Ring 1.\n    points.push(new Point(rotate(cos, sin, 0), \"#f90\"));\n    // Ring 2.\n    points.push(new Point(rotate(3 + cos, 0, sin), \"#039\"));\n  }\n  return points;\n}\n\n// Points in linked rings.\nexport function linkData(n) {\n  var points = [];\n  function rotate(x, y, z) {\n    var u = x;\n    var cos = Math.cos(0.4);\n    var sin = Math.sin(0.4);\n    var v = cos * y + sin * z;\n    var w = -sin * y + cos * z;\n    return [u, v, w];\n  }\n  for (var i = 0; i < n; i++) {\n    var t = (2 * Math.PI * i) / n;\n    var sin = Math.sin(t);\n    var cos = Math.cos(t);\n    // Ring 1.\n    points.push(new Point(rotate(cos, sin, 0), \"#f90\"));\n    // Ring 2.\n    points.push(new Point(rotate(1 + cos, 0, sin), \"#039\"));\n  }\n  return points;\n}\n\n// Points in a trefoil knot.\nexport function trefoilData(n) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var t = (2 * Math.PI * i) / n;\n    var x = Math.sin(t) + 2 * Math.sin(2 * t);\n    var y = Math.cos(t) - 2 * Math.cos(2 * t);\n    var z = -Math.sin(3 * t);\n    points.push(new Point([x, y, z], angleColor(t)));\n  }\n  return points;\n}\n\n// Two long, linear clusters in 2D.\nexport function longClusterData(n) {\n  var points = [];\n  var s = 0.03 * n;\n  for (var i = 0; i < n; i++) {\n    var x1 = i + s * normal();\n    var y1 = i + s * normal();\n    points.push(new Point([x1, y1], \"#039\"));\n    var x2 = i + s * normal() + n / 5;\n    var y2 = i + s * normal() - n / 5;\n    points.push(new Point([x2, y2], \"#f90\"));\n  }\n  return points;\n}\n\n// Mutually orthogonal steps.\nexport function orthoCurve(n) {\n  var points = [];\n  for (var i = 0; i < n; i++) {\n    var coords = [];\n    for (var j = 0; j < n; j++) {\n      coords[j] = j < i ? 1 : 0;\n    }\n    var t = (1.5 * Math.PI * i) / n;\n    points.push(new Point(coords, angleColor(t)));\n  }\n  return points;\n}\n\n// Random walk\nexport function randomWalk(n, dim) {\n  var points = [];\n  var current = [];\n  for (var i = 0; i < dim; i++) {\n    current[i] = 0;\n  }\n  for (var i = 0; i < n; i++) {\n    var step = normalVector(dim);\n    var next = current.slice();\n    for (var j = 0; j < dim; j++) {\n      next[j] = current[j] + step[j];\n    }\n    var t = (1.5 * Math.PI * i) / n;\n    points.push(new Point(next, angleColor(t)));\n    current = next;\n  }\n  return points;\n}\n\n// Random jump: a random walk with\n// additional noise added at each step.\nexport function randomJump(n, dim) {\n  var points = [];\n  var current = [];\n  for (var i = 0; i < dim; i++) {\n    current[i] = 0;\n  }\n  for (var i = 0; i < n; i++) {\n    var step = normalVector(dim);\n    var next = add(step, current.slice());\n    var r = normalVector(dim);\n    scale(r, Math.sqrt(dim));\n    var t = (1.5 * Math.PI * i) / n;\n    var coords = add(r, next);\n    points.push(new Point(coords, angleColor(t)));\n    current = next;\n  }\n  return points;\n}\n\nfunction multiplyScalar(vector, x) {\n  return vector.map(val => val * x);\n}\n\nfunction addNoise(vector, x) {\n  return vector.map(val => {\n    const noise = Math.random() * x - x / 2;\n    return val + noise;\n  });\n}\n\nexport function star(n, nArms, dim) {\n  const points = [];\n  const pointsPerArm = Math.floor(n / nArms);\n  for (let i = 0; i < nArms; i++) {\n    const color = angleColor((Math.PI * 2 * i) / nArms);\n    const armVector = normalVector(dim);\n    for (let i = 0; i < pointsPerArm; i++) {\n      const percent = i / pointsPerArm;\n      const noise = 0.01;\n      const p = addNoise(multiplyScalar(armVector, percent), noise);\n      points.push(new Point(p, color));\n    }\n  }\n  return points;\n}\n\nfunction interpolate(a, b, percent) {\n  return a.map((val, i) => {\n    const d = b[i] - val;\n    return d * percent + val;\n  });\n}\n\nexport function linkedClusters(nClusters, perCluster, perLink, dim) {\n  const points = [];\n  const centroids = [];\n  for (let i = 0; i < nClusters; i++) {\n    const color = angleColor((Math.PI * 2 * i) / nClusters);\n    const centroid = normalVector(dim);\n    centroids.push(centroid);\n\n    for (let i = 0; i < perCluster; i++) {\n      const p = addNoise(centroid, 0.2);\n      points.push(new Point(p, color));\n    }\n\n    if (i > 0) {\n      const lastCentroid = centroids[i - 1];\n      for (let i = 0; i < perLink; i++) {\n        const percent = i / perLink;\n        const p = interpolate(centroid, lastCentroid, percent);\n        points.push(new Point(addNoise(p, 0.01), \"darkgray\"));\n      }\n    }\n  }\n  return points;\n}\n\nfunction drawLine(ctx, angle, nPixels) {\n  const center = nPixels / 2;\n  const lineDistance = nPixels * 2;\n\n  ctx.fillStyle = \"#000\";\n  ctx.strokeStyle = \"#fff\";\n  ctx.lineWidth = 2;\n\n  ctx.fillRect(0, 0, nPixels, nPixels);\n\n  const dY = Math.sin(angle) * lineDistance;\n  const dX = Math.cos(angle) * lineDistance;\n\n  ctx.beginPath();\n  ctx.moveTo(center - dX, center - dY);\n  ctx.lineTo(center + dX, center + dY);\n  ctx.stroke();\n\n  const { data } = ctx.getImageData(0, 0, nPixels, nPixels);\n  const pixelData = [];\n  for (let j = 0; j < data.length; j += 4) {\n    pixelData.push(data[j]);\n  }\n\n  return pixelData;\n}\n\nexport function continuousLineImages(nLines, nPixels = 28) {\n  // Temporarily disabled - requires canvas package\n  return [];\n  /*\n  const canvas = createCanvas(nPixels, nPixels);\n  const ctx = canvas.getContext(\"2d\");\n\n  const output = [];\n  for (let i = 0; i < nLines; i++) {\n    const progress = i / nLines;\n    const angle = Math.PI * progress;\n    const pixelData = drawLine(ctx, angle, nPixels);\n\n    output.push(new Point(pixelData, angleColor(angle)));\n  }\n  return output;\n  */\n}\n\nexport function clusteredLineImages(\n  nLines,\n  nClusters,\n  noiseParam = 25,\n  nPixels = 28\n) {\n  // Temporarily disabled - requires canvas package  \n  return [];\n  /*\n  const canvas = createCanvas(nPixels, nPixels);\n  const ctx = canvas.getContext(\"2d\");\n\n  const linesPerCluster = Math.floor(nLines / nClusters);\n\n  const output = [];\n  for (let i = 0; i < nClusters; i++) {\n    const progress = i / nClusters;\n\n    for (let j = 0; j < linesPerCluster; j++) {\n      const noise = Math.random() * (noiseParam / 100) * Math.PI;\n      const angle = Math.PI * progress + noise;\n      const pixelData = drawLine(ctx, angle, nPixels);\n      output.push(new Point(pixelData, angleColor(angle * 2)));\n    }\n  }\n  return output;\n  */\n}\n\nexport function linePreview() {\n  const nPixels = Array.prototype.slice.apply(arguments).pop();\n  const output = [];\n  for (let x = 0; x < nPixels; x++) {\n    for (let y = 0; y < nPixels; y++) {\n      const vector = [x, y];\n      output.push(new Point(vector, y === x ? \"aliceblue\" : \"black\"));\n    }\n  }\n  return output;\n}\n\nexport function lineClusterPreview() {\n  const nPixels = Array.prototype.slice.apply(arguments).pop();\n  const output = [];\n  for (let x = 0; x < nPixels; x++) {\n    for (let y = 0; y < nPixels; y++) {\n      const vector = [x, y];\n      output.push(new Point(vector, y === nPixels - x ? \"aliceblue\" : \"black\"));\n    }\n  }\n  return output;\n}\n\nexport function sineFrequency(nVectors, vectorSize) {\n  const minFreq = Math.PI / (2 * vectorSize);\n  const maxFreq = Math.PI / ((1 / 10) * vectorSize);\n\n  const output = [];\n  for (let i = 0; i < nVectors; i++) {\n    const progress = i / nVectors;\n    const freq = (maxFreq - minFreq) * progress + minFreq;\n\n    const vector = [];\n    for (let x = 0; x < vectorSize; x++) {\n      vector.push(Math.sin(freq * x));\n    }\n    output.push(new Point(vector, angleColor(Math.PI * 2 * progress)));\n  }\n  return output;\n}\n\nexport function sinePhase(nVectors, vectorSize) {\n  const freq = (2 * Math.PI) / vectorSize;\n  const phase = vectorSize / nVectors;\n\n  const output = [];\n  for (let i = 0; i < nVectors; i++) {\n    const progress = i / nVectors;\n    const phaseOffset = phase * progress;\n\n    const vector = [];\n    for (let x = 0; x < vectorSize; x++) {\n      vector.push(Math.sin(freq * (x + phaseOffset)));\n    }\n    output.push(new Point(vector, angleColor(Math.PI * 2 * progress)));\n  }\n  return output;\n}\n\nexport function sinePreview(nPoints, angle) {\n  const amplitude = nPoints / 2;\n  const freq = Math.PI / (nPoints / 5);\n\n  const output = [];\n  for (let x = 0; x < nPoints; x++) {\n    const progress = x / nPoints;\n    const vector = [x, Math.sin(freq * x) * amplitude];\n    output.push(new Point(vector, angleColor(angle)));\n  }\n  return output;\n}\n\nexport function sineFreqPreview(nPoints) {\n  return sinePreview(nPoints, 0);\n}\n\nexport function sinePhasePreview(nPoints) {\n  return sinePreview(nPoints, Math.PI / 2);\n}\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport * as generators from \"./generators\";\n\nexport const extendedDemos = [\n  {\n    name: \"Star\",\n    description: \"Points arranged in a radial star pattern\",\n    options: [\n      {\n        name: \"Number of points\",\n        min: 10,\n        max: 300,\n        start: 100\n      },\n      {\n        name: \"Number of arms\",\n        min: 3,\n        max: 20,\n        start: 5\n      },\n      {\n        name: \"Dimensions\",\n        min: 3,\n        max: 50,\n        start: 10\n      }\n    ],\n    generator: generators.star\n  },\n  {\n    name: \"Linked Clusters\",\n    description: \"Clusters linked with a chain of points\",\n    options: [\n      {\n        name: \"Number of clusters\",\n        min: 3,\n        max: 20,\n        start: 6\n      },\n      {\n        name: \"Points per cluster\",\n        min: 10,\n        max: 100,\n        start: 30\n      },\n      {\n        name: \"Points per link\",\n        min: 5,\n        max: 100,\n        start: 15\n      },\n      {\n        name: \"Dimensions\",\n        min: 3,\n        max: 100,\n        start: 10\n      }\n    ],\n    generator: generators.linkedClusters\n  },\n  {\n    name: \"Rotated lines\",\n    description:\n      \"nxn images of a line rotated smoothly around the center, represented as an n*n dimensional vector.\",\n    options: [\n      {\n        name: \"Number of lines\",\n        min: 10,\n        max: 200,\n        start: 50\n      },\n      {\n        name: \"Pixels per side\",\n        min: 5,\n        max: 28,\n        start: 10\n      }\n    ],\n    generator: generators.continuousLineImages,\n    previewOverride: generators.linePreview\n  },\n  {\n    name: \"Rotated lines, clustered\",\n    description:\n      \"nxn images of a line rotated around the center, represented as an n*n dimensional vector. Grouped by similar angles.\",\n    options: [\n      {\n        name: \"Number of lines\",\n        min: 10,\n        max: 200,\n        start: 50\n      },\n      {\n        name: \"Number of clusters\",\n        min: 3,\n        max: 12,\n        start: 5\n      },\n      {\n        name: \"Noise\",\n        min: 0,\n        max: 100,\n        start: 8\n      },\n      {\n        name: \"Pixels per side\",\n        min: 5,\n        max: 28,\n        start: 10\n      }\n    ],\n    generator: generators.clusteredLineImages,\n    previewOverride: generators.lineClusterPreview\n  },\n  {\n    name: \"Sine frequency\",\n    description:\n      \"Vectors of a sine wave parameterized by frequency. Hue corresponds to frequency.\",\n    options: [\n      {\n        name: \"Number of vectors\",\n        min: 10,\n        max: 200,\n        start: 50\n      },\n      {\n        name: \"Vector size\",\n        min: 3,\n        max: 300,\n        start: 100\n      }\n    ],\n    generator: generators.sineFrequency,\n    previewOverride: generators.sineFreqPreview\n  },\n  {\n    name: \"Sine phase\",\n    description:\n      \"Vectors of a sine wave parameterized by phase. Hue corresponds to phase.\",\n    options: [\n      {\n        name: \"Number of vectors\",\n        min: 10,\n        max: 200,\n        start: 50\n      },\n      {\n        name: \"Vector size\",\n        min: 3,\n        max: 300,\n        start: 100\n      }\n    ],\n    generator: generators.sinePhase,\n    previewOverride: generators.sinePhasePreview\n  }\n];\n\nexport const demos = [\n  {\n    name: \"Grid\",\n    description: \"A square grid with equal spacing between points.\",\n    options: [\n      {\n        name: \"Points Per Side\",\n        min: 5,\n        max: 20,\n        start: 10\n      }\n    ],\n    generator: generators.gridData\n  },\n  {\n    name: \"Two Clusters\",\n    description: \"Two clusters with equal numbers of points.\",\n    options: [\n      {\n        name: \"Points Per Cluster\",\n        min: 10,\n        max: 100,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      }\n    ],\n    generator: generators.twoClustersData\n  },\n  {\n    name: \"Three Clusters\",\n    description:\n      \"Three clusters with equal numbers of points, but at \" +\n      \"different distances from each other.\",\n    options: [\n      {\n        name: \"Points Per Cluster\",\n        min: 10,\n        max: 100,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      }\n    ],\n    generator: generators.threeClustersData\n  },\n  {\n    name: \"Two Different-Sized Clusters\",\n    description:\n      \"Two clusters with equal numbers of points, but different \" +\n      \"variances within the clusters.\",\n    options: [\n      {\n        name: \"Points Per Cluster\",\n        min: 10,\n        max: 100,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      },\n      {\n        name: \"Scale\",\n        min: 1,\n        max: 10,\n        start: 5\n      }\n    ],\n    generator: generators.twoDifferentClustersData\n  },\n  {\n    name: \"Two Long Linear Clusters\",\n    description:\n      \"Two sets of points, arranged in parallel lines that \" +\n      \"are close to each other. Note curvature of lines.\",\n    options: [\n      {\n        name: \"Points Per Cluster\",\n        min: 10,\n        max: 100,\n        start: 50\n      }\n    ],\n    generator: generators.longClusterData\n  },\n  {\n    name: \"Cluster In Cluster\",\n    description: \"A dense, tight cluster inside of a wide, sparse cluster.\",\n    options: [\n      {\n        name: \"Points Per Cluster\",\n        min: 10,\n        max: 100,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      }\n    ],\n    generator: generators.subsetClustersData\n  },\n  {\n    name: \"Circle (Evenly Spaced)\",\n    description:\n      \"Points evenly distributed in a circle. \" +\n      \"Hue corresponds to angle in the circle.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 100,\n        start: 50\n      }\n    ],\n    generator: generators.circleData\n  },\n  {\n    name: \"Circle (Randomly Spaced)\",\n    description:\n      \"Points randomly distributed in a circle. \" +\n      \"Hue corresponds to angle in the circle.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 100,\n        start: 50\n      }\n    ],\n    generator: generators.randomCircleData\n  },\n  {\n    name: \"Gaussian Cloud\",\n    description:\n      \"Points in a unit Gaussian distribution. \" +\n      \"Data is entirely random, so any visible subclusters are \" +\n      \"not statistically significant\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 500,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      }\n    ],\n    generator: generators.gaussianData\n  },\n  {\n    name: \"Ellipsoidal Gaussian Cloud\",\n    description:\n      \"Points in an ellipsoidal Gaussian distribution. \" +\n      \" Dimension n has variance 1/n. Elongation is visible in plot.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 500,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 100,\n        start: 2\n      }\n    ],\n    generator: generators.longGaussianData\n  },\n  {\n    name: \"Trefoil Knot\",\n    description:\n      \"Points arranged in 3D, following a trefoil knot. \" +\n      \"Different runs may give different results.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 200,\n        start: 50\n      }\n    ],\n    generator: generators.trefoilData\n  },\n  {\n    name: \"Linked Rings\",\n    description: \"Points arranged in 3D, on two linked circles. \",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 200,\n        start: 50\n      }\n    ],\n    generator: generators.linkData\n  },\n  {\n    name: \"Unlinked Rings\",\n    description: \"Points arranged in 3D, on two unlinked circles\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 200,\n        start: 50\n      }\n    ],\n    generator: generators.unlinkData\n  },\n  {\n    name: \"Orthogonal Steps\",\n    description:\n      \"Points related by mutually orthogonal steps. \" +\n      \"Very similar to a random walk.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 500,\n        start: 50\n      }\n    ],\n    generator: generators.orthoCurve\n  },\n  {\n    name: \"Random Walk\",\n    description: \"Random (Gaussian) walk. \" + \"Smoother than you might think.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 1000,\n        start: 100\n      },\n      {\n        name: \"Dimension\",\n        min: 1,\n        max: 1000,\n        start: 100\n      }\n    ],\n    generator: generators.randomWalk\n  },\n  {\n    name: \"Random Jump\",\n    description: \"Random (Gaussian) Jump\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 1000,\n        start: 100\n      },\n      {\n        name: \"Dimension\",\n        min: 1,\n        max: 1000,\n        start: 100\n      }\n    ],\n    generator: generators.randomJump\n  },\n  {\n    name: \"Equally Spaced\",\n    description:\n      \"A set of points, where distances between all pairs of \" +\n      \"points are the same in the original space.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 100,\n        start: 50\n      }\n    ],\n    generator: generators.simplexData\n  },\n  {\n    name: \"Uniform Distribution\",\n    description: \"Points uniformly distributed in a unit cube.\",\n    options: [\n      {\n        name: \"Number Of Points\",\n        min: 20,\n        max: 200,\n        start: 50\n      },\n      {\n        name: \"Dimensions\",\n        min: 1,\n        max: 10,\n        start: 3\n      }\n    ],\n    generator: generators.cubeData\n  }\n];\n\nexport const allDemos = [...extendedDemos, ...demos];\n\n// Euclidean distance.\nfunction dist(a, b) {\n  var d = 0;\n  for (var i = 0; i < a.length; i++) {\n    d += (a[i] - b[i]) * (a[i] - b[i]);\n  }\n  return Math.sqrt(d);\n}\n\n// Creates distance matrix for t-SNE input.\nexport function distanceMatrix(points) {\n  var matrix = [];\n  var n = points.length;\n  for (var i = 0; i < n; i++) {\n    for (var j = 0; j < n; j++) {\n      matrix.push(dist(points[i], points[j]));\n    }\n  }\n  return matrix;\n}\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport {\n  demos as originalDemos,\n  extendedDemos\n} from \"../../../shared/js/toy-configs\";\n\nexport const originalOverrides = [\n  {\n    name: \"Grid\",\n    options: [{ name: \"Points Per Side\", start: 20 }],\n    description: \"A square grid with equal spacing between points.\"\n  },\n  {\n    name: \"Two Clusters\",\n    options: [\n      { name: \"Points Per Cluster\", start: 100 },\n      { name: \"Dimensions\", start: 50 }\n    ]\n  },\n  {\n    name: \"Three Clusters\",\n    options: [\n      { name: \"Points Per Cluster\", start: 100 },\n      { name: \"Dimensions\", start: 50 }\n    ]\n  },\n  {\n    name: \"Two Different-Sized Clusters\",\n    options: [\n      { name: \"Points Per Cluster\", start: 100 },\n      { name: \"Dimensions\", start: 50 },\n      { name: \"Scale\", start: 5 }\n    ]\n  },\n  {\n    name: \"Two Long Linear Clusters\",\n    options: [{ name: \"Points Per Cluster\", start: 100 }]\n  },\n  {\n    name: \"Cluster In Cluster\",\n    options: [\n      { name: \"Points Per Cluster\", start: 100 },\n      { name: \"Dimensions\", start: 50 }\n    ]\n  },\n  {\n    name: \"Circle (Evenly Spaced)\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Circle (Randomly Spaced)\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Gaussian Cloud\",\n    options: [\n      { name: \"Number Of Points\", start: 250 },\n      { name: \"Dimensions\", start: 50 }\n    ]\n  },\n  {\n    name: \"Ellipsoidal Gaussian Cloud\",\n    options: [\n      { name: \"Number Of Points\", start: 250 },\n      { name: \"Dimensions\", start: 50 }\n    ]\n  },\n  {\n    name: \"Trefoil Knot\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Linked Rings\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Unlinked Rings\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Orthogonal Steps\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Random Walk\",\n    options: [\n      { name: \"Number Of Points\", start: 200 },\n      { name: \"Dimension\", start: 100 }\n    ]\n  },\n  {\n    name: \"Random Jump\",\n    options: [\n      { name: \"Number Of Points\", start: 200 },\n      { name: \"Dimension\", start: 100 }\n    ]\n  },\n  {\n    name: \"Equally Spaced\",\n    options: [{ name: \"Number Of Points\", start: 200 }]\n  },\n  {\n    name: \"Uniform Distribution\",\n    options: [\n      { name: \"Number Of Points\", start: 200 },\n      { name: \"Dimensions\", start: 10 }\n    ]\n  }\n];\n\nconst extendedOverrides = [\n  {\n    name: \"Star\",\n    options: [\n      { name: \"Number of points\", start: 300 },\n      { name: \"Number of arms\", start: 12 },\n      { name: \"Dimensions\", start: 10 }\n    ]\n  },\n  {\n    name: \"Linked Clusters\",\n    options: [\n      { name: \"Number of clusters\", start: 6 },\n      { name: \"Points per cluster\", start: 100 },\n      { name: \"Points per link\", start: 50 },\n      { name: \"Dimensions\", start: 10 }\n    ]\n  },\n  {\n    name: \"Rotated lines\",\n    options: [\n      { name: \"Number of lines\", start: 200 },\n      { name: \"Pixels per side\", start: 28 }\n    ]\n  },\n  {\n    name: \"Rotated lines, clustered\",\n    options: [\n      { name: \"Number of lines\", start: 200 },\n      { name: \"Number of clusters\", start: 10 },\n      { name: \"Noise\", start: 8 },\n      { name: \"Pixels per side\", start: 28 }\n    ]\n  },\n  {\n    name: \"Sine frequency\",\n    options: [\n      { name: \"Number of vectors\", start: 200 },\n      { name: \"Vector size\", start: 256 }\n    ]\n  },\n  {\n    name: \"Sine phase\",\n    options: [\n      { name: \"Number of vectors\", start: 200 },\n      { name: \"Vector size\", start: 256 }\n    ]\n  }\n];\n\nconst optionsOverrides = [...extendedOverrides, ...originalOverrides];\n\nconst allDemos = [...extendedDemos, ...originalDemos].map((demo, i) => {\n  const modified = JSON.parse(JSON.stringify(demo)); // Simple clone\n  modified.generator = demo.generator;\n  modified.previewOverride = demo.previewOverride;\n  modified.options = modified.options.map((option, j) => {\n    const override = optionsOverrides[i];\n    option.start = override.options[j].start;\n    if (override.description) {\n      option.description = override.description;\n    }\n    return option;\n  });\n  return modified;\n});\n\nexport default allDemos;\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nconst pointsCache = new Map();\nexport function getPoints(demo, params) {\n  if (!params) {\n    params = demo.options.map(option => option.start);\n  }\n\n  return demo.generator.apply(null, params);\n}\n\nconst overrideCache = new Map();\nexport function getDemoPreviewOverride(demo, params) {\n  if (!params) {\n    params = demo.options.map(option => option.start);\n  }\n\n  if (demo.previewOverride) {\n    return demo.previewOverride.apply(null, params);\n  }\n  return null;\n}\n\n// Helper function to draw a circle.\n// TODO: replace with canvas blitting for web rendering\nfunction circle(g, x, y, r) {\n  g.beginPath();\n  g.arc(x, y, r, 0, 2 * Math.PI);\n  g.fill();\n  g.stroke();\n}\n\n// Visualize the given points with the given message.\n// If \"no3d\" is set, ignore the 3D cue for size.\nexport function visualize(points, canvas, message, no3d) {\n  var width = canvas.width;\n  var height = canvas.height;\n  var g = canvas.getContext(\"2d\");\n  g.fillStyle = \"white\";\n  g.fillRect(0, 0, width, height);\n  var xExtent = d3.extent(points, function(p) {\n    return p.coords[0];\n  });\n  var yExtent = d3.extent(points, function(p) {\n    return p.coords[1];\n  });\n  var zExtent = d3.extent(points, function(p) {\n    return p.coords[2];\n  });\n  var zScale = d3\n    .scaleLinear()\n    .domain(zExtent)\n    .range([2, 10]);\n\n  var centerX = (xExtent[0] + xExtent[1]) / 2;\n  var centerY = (yExtent[0] + yExtent[1]) / 2;\n  var scale =\n    Math.min(width, height) /\n    Math.max(xExtent[1] - xExtent[0], yExtent[1] - yExtent[0]);\n  scale *= 0.9; // Leave a little margin.\n  g.strokeStyle = \"rgba(255,255,255,.5)\";\n  var is3d = !no3d && points[0].coords.length > 2;\n  var index = [];\n  var n = points.length;\n  if (is3d) {\n    for (var i = 0; i < n; i++) {\n      index[i] = i;\n    }\n    index.sort(function(a, b) {\n      return d3.ascending(points[a].coords[2], points[b].coords[2]);\n    });\n  }\n\n  for (var i = 0; i < n; i++) {\n    var p = is3d ? points[index[i]] : points[i];\n    g.fillStyle = p.color;\n    var x = (p.coords[0] - centerX) * scale + width / 2;\n    var y = -(p.coords[1] - centerY) * scale + height / 2;\n    var r = is3d ? zScale(p.coords[2]) : 4;\n    circle(g, x, y, r);\n\n    if (!is3d) {\n      p.px = x;\n      p.py = y;\n    }\n  }\n\n  if (message) {\n    g.fillStyle = \"#000\";\n    g.font = \"24pt Lato\";\n    g.fillText(message, 8, 34);\n  }\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount, createEventDispatcher } from \"svelte\";\n  import { getPoints, visualize } from \"../../../shared/js/visualize\";\n\n  const dispatch = createEventDispatcher();\n\n  export let points;\n  export let onClick;\n  export let selected;\n  export let hoveredPointIndex = -1;\n  export let selectable = true;\n  export let highlighted = false;\n  export let size = 150;\n\n  function handleMousemove(){\n    var scale = size/canvas.offsetWidth\n    var mx = event.layerX*scale;\n    var my = event.layerY*scale;\n\n    if (!points && points.length) return;\n\n    var minDist = Infinity;\n    var minIndex = 0;\n    points.forEach((d, i) => {\n      var dx = d.px - mx;\n      var dy = d.py - my;\n\n      var dist = dx*dx + dy*dy;\n      if (dist < minDist){\n        minDist = dist;\n        minIndex = i;\n      }\n    })\n\n    dispatch('hover', minIndex);\n  }\n\n  let canvas;\n  let svg;\n\n  onMount(() => {\n    visualize(points, canvas, null, null);\n  });\n\n  let prevPoints = null;\n  afterUpdate(() => {\n    if (points == prevPoints) return;\n    prevPoints = points;\n    visualize(points, canvas, null, null);\n  });\n</script>\n\n<style>\n  .demo-data {\n    cursor: pointer;\n    position: relative;\n    font-size: 10px;\n    line-height: 1.2em;\n    box-sizing: border-box;\n    float: left;\n    margin: 2px;\n    padding: 4px;\n    width: calc(33% - 4px);\n    background: white;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.08);\n  }\n  .demo-data.non-selectable {\n    cursor: default;\n    box-shadow: none;\n    margin: -1px !important;\n    position: relative;\n    left: 4px;\n    top: 4px;\n    border-radius: 0px;\n    padding: 0px;\n  }\n\n  @media (min-width: 480px) {\n    .demo-data {\n      padding: 8px;\n      margin: 4px;\n    }\n  }\n  @media (min-width: 768px) {\n    .demo-data {\n      padding: 8px;\n      margin: 4px;\n    }\n  }\n  .demo-data:hover {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n  }\n  .demo-data.non-selectable:hover {\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n  .demo-data.selected::after {\n    content: \"\";\n    border: 2px solid rgba(70, 130, 180, 0.8);\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    box-sizing: border-box;\n    border-radius: 4px;\n  }\n  .demo-data:hover canvas {\n    opacity: 1;\n  }\n  .demo-data canvas {\n    width: 100%;\n    opacity: 0.3;\n  }\n  .demo-data svg{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n  }\n  .demo-data.highlighted canvas {\n    opacity: 1;\n  }\n  .demo-data.selected canvas {\n    opacity: 1;\n  }\n</style>\n\n<div\n  class=\"demo-data {selected ? 'selected' : ''}\n  {highlighted ? 'highlighted' : ''}\n  {selectable ? '' : 'non-selectable'}\"\n  on:click={onClick}>\n  <canvas bind:this={canvas} width={size} height={size} on:mousemove={handleMousemove} />\n  <svg bind:this={svg} viewBox=\"0 0 {size} {size}\">\n    {#if points[hoveredPointIndex] && points[hoveredPointIndex].px}\n      <circle\n        r='5' fill='none' stroke='#000' stroke-width='2' \n        opacity='{hoveredPointIndex > -1 ? 1 : 0}'\n        cx={points[hoveredPointIndex].px}\n        cy={points[hoveredPointIndex].py}>\n      </circle>\n    {/if}\n  </svg>\n</div>\n","\"use strict\";\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction tauRandInt(n, random) {\n    return Math.floor(random() * n);\n}\nexports.tauRandInt = tauRandInt;\nfunction tauRand(random) {\n    return random();\n}\nexports.tauRand = tauRand;\nfunction norm(vec) {\n    var e_1, _a;\n    var result = 0;\n    try {\n        for (var vec_1 = __values(vec), vec_1_1 = vec_1.next(); !vec_1_1.done; vec_1_1 = vec_1.next()) {\n            var item = vec_1_1.value;\n            result += Math.pow(item, 2);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (vec_1_1 && !vec_1_1.done && (_a = vec_1.return)) _a.call(vec_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return Math.sqrt(result);\n}\nexports.norm = norm;\nfunction empty(n) {\n    var output = [];\n    for (var i = 0; i < n; i++) {\n        output.push(undefined);\n    }\n    return output;\n}\nexports.empty = empty;\nfunction range(n) {\n    return empty(n).map(function (_, i) { return i; });\n}\nexports.range = range;\nfunction filled(n, v) {\n    return empty(n).map(function () { return v; });\n}\nexports.filled = filled;\nfunction zeros(n) {\n    return filled(n, 0);\n}\nexports.zeros = zeros;\nfunction ones(n) {\n    return filled(n, 1);\n}\nexports.ones = ones;\nfunction linear(a, b, len) {\n    return empty(len).map(function (_, i) {\n        return a + i * ((b - a) / (len - 1));\n    });\n}\nexports.linear = linear;\nfunction sum(input) {\n    return input.reduce(function (sum, val) { return sum + val; });\n}\nexports.sum = sum;\nfunction mean(input) {\n    return sum(input) / input.length;\n}\nexports.mean = mean;\nfunction max(input) {\n    var max = 0;\n    for (var i = 0; i < input.length; i++) {\n        max = input[i] > max ? input[i] : max;\n    }\n    return max;\n}\nexports.max = max;\nfunction max2d(input) {\n    var max = 0;\n    for (var i = 0; i < input.length; i++) {\n        for (var j = 0; j < input[i].length; j++) {\n            max = input[i][j] > max ? input[i][j] : max;\n        }\n    }\n    return max;\n}\nexports.max2d = max2d;\nfunction rejectionSample(nSamples, poolSize, random) {\n    var result = zeros(nSamples);\n    for (var i = 0; i < nSamples; i++) {\n        var rejectSample = true;\n        while (rejectSample) {\n            var j = tauRandInt(poolSize, random);\n            var broken = false;\n            for (var k = 0; k < i; k++) {\n                if (j === result[k]) {\n                    broken = true;\n                    break;\n                }\n            }\n            if (!broken) {\n                rejectSample = false;\n            }\n            result[i] = j;\n        }\n    }\n    return result;\n}\nexports.rejectionSample = rejectionSample;\nfunction reshape2d(x, a, b) {\n    var rows = [];\n    var count = 0;\n    var index = 0;\n    if (x.length !== a * b) {\n        throw new Error('Array dimensions must match input length.');\n    }\n    for (var i = 0; i < a; i++) {\n        var col = [];\n        for (var j = 0; j < b; j++) {\n            col.push(x[index]);\n            index += 1;\n        }\n        rows.push(col);\n        count += 1;\n    }\n    return rows;\n}\nexports.reshape2d = reshape2d;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils = __importStar(require(\"./utils\"));\nfunction makeHeap(nPoints, size) {\n    var makeArrays = function (fillValue) {\n        return utils.empty(nPoints).map(function () {\n            return utils.filled(size, fillValue);\n        });\n    };\n    var heap = [];\n    heap.push(makeArrays(-1));\n    heap.push(makeArrays(Infinity));\n    heap.push(makeArrays(0));\n    return heap;\n}\nexports.makeHeap = makeHeap;\nfunction rejectionSample(nSamples, poolSize, random) {\n    var result = utils.zeros(nSamples);\n    for (var i = 0; i < nSamples; i++) {\n        var rejectSample = true;\n        var j = 0;\n        while (rejectSample) {\n            j = utils.tauRandInt(poolSize, random);\n            var broken = false;\n            for (var k = 0; k < i; k++) {\n                if (j === result[k]) {\n                    broken = true;\n                    break;\n                }\n            }\n            if (!broken)\n                rejectSample = false;\n        }\n        result[i] = j;\n    }\n    return result;\n}\nexports.rejectionSample = rejectionSample;\nfunction heapPush(heap, row, weight, index, flag) {\n    row = Math.floor(row);\n    var indices = heap[0][row];\n    var weights = heap[1][row];\n    var isNew = heap[2][row];\n    if (weight >= weights[0]) {\n        return 0;\n    }\n    for (var i = 0; i < indices.length; i++) {\n        if (index === indices[i]) {\n            return 0;\n        }\n    }\n    return uncheckedHeapPush(heap, row, weight, index, flag);\n}\nexports.heapPush = heapPush;\nfunction uncheckedHeapPush(heap, row, weight, index, flag) {\n    var indices = heap[0][row];\n    var weights = heap[1][row];\n    var isNew = heap[2][row];\n    if (weight >= weights[0]) {\n        return 0;\n    }\n    weights[0] = weight;\n    indices[0] = index;\n    isNew[0] = flag;\n    var i = 0;\n    var iSwap = 0;\n    while (true) {\n        var ic1 = 2 * i + 1;\n        var ic2 = ic1 + 1;\n        var heapShape2 = heap[0][0].length;\n        if (ic1 >= heapShape2) {\n            break;\n        }\n        else if (ic2 >= heapShape2) {\n            if (weights[ic1] > weight) {\n                iSwap = ic1;\n            }\n            else {\n                break;\n            }\n        }\n        else if (weights[ic1] >= weights[ic2]) {\n            if (weight < weights[ic1]) {\n                iSwap = ic1;\n            }\n            else {\n                break;\n            }\n        }\n        else {\n            if (weight < weights[ic2]) {\n                iSwap = ic2;\n            }\n            else {\n                break;\n            }\n        }\n        weights[i] = weights[iSwap];\n        indices[i] = indices[iSwap];\n        isNew[i] = isNew[iSwap];\n        i = iSwap;\n    }\n    weights[i] = weight;\n    indices[i] = index;\n    isNew[i] = flag;\n    return 1;\n}\nexports.uncheckedHeapPush = uncheckedHeapPush;\nfunction buildCandidates(currentGraph, nVertices, nNeighbors, maxCandidates, random) {\n    var candidateNeighbors = makeHeap(nVertices, maxCandidates);\n    for (var i = 0; i < nVertices; i++) {\n        for (var j = 0; j < nNeighbors; j++) {\n            if (currentGraph[0][i][j] < 0) {\n                continue;\n            }\n            var idx = currentGraph[0][i][j];\n            var isn = currentGraph[2][i][j];\n            var d = utils.tauRand(random);\n            heapPush(candidateNeighbors, i, d, idx, isn);\n            heapPush(candidateNeighbors, idx, d, i, isn);\n            currentGraph[2][i][j] = 0;\n        }\n    }\n    return candidateNeighbors;\n}\nexports.buildCandidates = buildCandidates;\nfunction deheapSort(heap) {\n    var indices = heap[0];\n    var weights = heap[1];\n    for (var i = 0; i < indices.length; i++) {\n        var indHeap = indices[i];\n        var distHeap = weights[i];\n        for (var j = 0; j < indHeap.length - 1; j++) {\n            var indHeapIndex = indHeap.length - j - 1;\n            var distHeapIndex = distHeap.length - j - 1;\n            var temp1 = indHeap[0];\n            indHeap[0] = indHeap[indHeapIndex];\n            indHeap[indHeapIndex] = temp1;\n            var temp2 = distHeap[0];\n            distHeap[0] = distHeap[distHeapIndex];\n            distHeap[distHeapIndex] = temp2;\n            siftDown(distHeap, indHeap, distHeapIndex, 0);\n        }\n    }\n    return { indices: indices, weights: weights };\n}\nexports.deheapSort = deheapSort;\nfunction siftDown(heap1, heap2, ceiling, elt) {\n    while (elt * 2 + 1 < ceiling) {\n        var leftChild = elt * 2 + 1;\n        var rightChild = leftChild + 1;\n        var swap = elt;\n        if (heap1[swap] < heap1[leftChild]) {\n            swap = leftChild;\n        }\n        if (rightChild < ceiling && heap1[swap] < heap1[rightChild]) {\n            swap = rightChild;\n        }\n        if (swap === elt) {\n            break;\n        }\n        else {\n            var temp1 = heap1[elt];\n            heap1[elt] = heap1[swap];\n            heap1[swap] = temp1;\n            var temp2 = heap2[elt];\n            heap2[elt] = heap2[swap];\n            heap2[swap] = temp2;\n            elt = swap;\n        }\n    }\n}\nfunction smallestFlagged(heap, row) {\n    var ind = heap[0][row];\n    var dist = heap[1][row];\n    var flag = heap[2][row];\n    var minDist = Infinity;\n    var resultIndex = -1;\n    for (var i = 0; i > ind.length; i++) {\n        if (flag[i] === 1 && dist[i] < minDist) {\n            minDist = dist[i];\n            resultIndex = i;\n        }\n    }\n    if (resultIndex >= 0) {\n        flag[resultIndex] = 0;\n        return Math.floor(ind[resultIndex]);\n    }\n    else {\n        return -1;\n    }\n}\nexports.smallestFlagged = smallestFlagged;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _a;\nvar utils = __importStar(require(\"./utils\"));\nvar SparseMatrix = (function () {\n    function SparseMatrix(rows, cols, values, dims) {\n        this.entries = new Map();\n        this.nRows = 0;\n        this.nCols = 0;\n        this.rows = __spread(rows);\n        this.cols = __spread(cols);\n        this.values = __spread(values);\n        for (var i = 0; i < values.length; i++) {\n            var key = this.makeKey(this.rows[i], this.cols[i]);\n            this.entries.set(key, i);\n        }\n        this.nRows = dims[0];\n        this.nCols = dims[1];\n    }\n    SparseMatrix.prototype.makeKey = function (row, col) {\n        return row + \":\" + col;\n    };\n    SparseMatrix.prototype.checkDims = function (row, col) {\n        var withinBounds = row < this.nRows && col < this.nCols;\n        if (!withinBounds) {\n            throw new Error('array index out of bounds');\n        }\n    };\n    SparseMatrix.prototype.set = function (row, col, value) {\n        this.checkDims(row, col);\n        var key = this.makeKey(row, col);\n        if (!this.entries.has(key)) {\n            this.rows.push(row);\n            this.cols.push(col);\n            this.values.push(value);\n            this.entries.set(key, this.values.length - 1);\n        }\n        else {\n            var index = this.entries.get(key);\n            this.values[index] = value;\n        }\n    };\n    SparseMatrix.prototype.get = function (row, col, defaultValue) {\n        if (defaultValue === void 0) { defaultValue = 0; }\n        this.checkDims(row, col);\n        var key = this.makeKey(row, col);\n        if (this.entries.has(key)) {\n            var index = this.entries.get(key);\n            return this.values[index];\n        }\n        else {\n            return defaultValue;\n        }\n    };\n    SparseMatrix.prototype.getDims = function () {\n        return [this.nRows, this.nCols];\n    };\n    SparseMatrix.prototype.getRows = function () {\n        return __spread(this.rows);\n    };\n    SparseMatrix.prototype.getCols = function () {\n        return __spread(this.cols);\n    };\n    SparseMatrix.prototype.getValues = function () {\n        return __spread(this.values);\n    };\n    SparseMatrix.prototype.forEach = function (fn) {\n        for (var i = 0; i < this.values.length; i++) {\n            fn(this.values[i], this.rows[i], this.cols[i]);\n        }\n    };\n    SparseMatrix.prototype.map = function (fn) {\n        var vals = [];\n        for (var i = 0; i < this.values.length; i++) {\n            vals.push(fn(this.values[i], this.rows[i], this.cols[i]));\n        }\n        var dims = [this.nRows, this.nCols];\n        return new SparseMatrix(this.rows, this.cols, vals, dims);\n    };\n    SparseMatrix.prototype.toArray = function () {\n        var _this = this;\n        var rows = utils.empty(this.nRows);\n        var output = rows.map(function () {\n            return utils.zeros(_this.nCols);\n        });\n        for (var i = 0; i < this.values.length; i++) {\n            output[this.rows[i]][this.cols[i]] = this.values[i];\n        }\n        return output;\n    };\n    return SparseMatrix;\n}());\nexports.SparseMatrix = SparseMatrix;\nfunction transpose(matrix) {\n    var cols = [];\n    var rows = [];\n    var vals = [];\n    matrix.forEach(function (value, row, col) {\n        cols.push(row);\n        rows.push(col);\n        vals.push(value);\n    });\n    var dims = [matrix.nCols, matrix.nRows];\n    return new SparseMatrix(rows, cols, vals, dims);\n}\nexports.transpose = transpose;\nfunction identity(size) {\n    var _a = __read(size, 1), rows = _a[0];\n    var matrix = new SparseMatrix([], [], [], size);\n    for (var i = 0; i < rows; i++) {\n        matrix.set(i, i, 1);\n    }\n    return matrix;\n}\nexports.identity = identity;\nfunction pairwiseMultiply(a, b) {\n    return elementWise(a, b, function (x, y) { return x * y; });\n}\nexports.pairwiseMultiply = pairwiseMultiply;\nfunction add(a, b) {\n    return elementWise(a, b, function (x, y) { return x + y; });\n}\nexports.add = add;\nfunction subtract(a, b) {\n    return elementWise(a, b, function (x, y) { return x - y; });\n}\nexports.subtract = subtract;\nfunction maximum(a, b) {\n    return elementWise(a, b, function (x, y) { return (x > y ? x : y); });\n}\nexports.maximum = maximum;\nfunction multiplyScalar(a, scalar) {\n    return a.map(function (value) {\n        return value * scalar;\n    });\n}\nexports.multiplyScalar = multiplyScalar;\nfunction eliminateZeros(m) {\n    var zeroIndices = new Set();\n    var values = m.getValues();\n    var rows = m.getRows();\n    var cols = m.getCols();\n    for (var i = 0; i < values.length; i++) {\n        if (values[i] === 0) {\n            zeroIndices.add(i);\n        }\n    }\n    var removeByZeroIndex = function (_, index) { return !zeroIndices.has(index); };\n    var nextValues = values.filter(removeByZeroIndex);\n    var nextRows = rows.filter(removeByZeroIndex);\n    var nextCols = cols.filter(removeByZeroIndex);\n    return new SparseMatrix(nextRows, nextCols, nextValues, m.getDims());\n}\nexports.eliminateZeros = eliminateZeros;\nfunction normalize(m, normType) {\n    if (normType === void 0) { normType = \"l2\"; }\n    var e_1, _a;\n    var normFn = normFns[normType];\n    var colsByRow = new Map();\n    m.forEach(function (_, row, col) {\n        var cols = colsByRow.get(row) || [];\n        cols.push(col);\n        colsByRow.set(row, cols);\n    });\n    var nextMatrix = new SparseMatrix([], [], [], m.getDims());\n    var _loop_1 = function (row) {\n        var cols = colsByRow.get(row).sort();\n        var vals = cols.map(function (col) { return m.get(row, col); });\n        var norm = normFn(vals);\n        for (var i = 0; i < norm.length; i++) {\n            nextMatrix.set(row, cols[i], norm[i]);\n        }\n    };\n    try {\n        for (var _b = __values(colsByRow.keys()), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var row = _c.value;\n            _loop_1(row);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return nextMatrix;\n}\nexports.normalize = normalize;\nvar normFns = (_a = {},\n    _a[\"max\"] = function (xs) {\n        var max = -Infinity;\n        for (var i = 0; i < xs.length; i++) {\n            max = xs[i] > max ? xs[i] : max;\n        }\n        return xs.map(function (x) { return x / max; });\n    },\n    _a[\"l1\"] = function (xs) {\n        var sum = 0;\n        for (var i = 0; i < xs.length; i++) {\n            sum += xs[i];\n        }\n        return xs.map(function (x) { return x / sum; });\n    },\n    _a[\"l2\"] = function (xs) {\n        var sum = 0;\n        for (var i = 0; i < xs.length; i++) {\n            sum += Math.pow(xs[i], 2);\n        }\n        return xs.map(function (x) { return Math.sqrt(Math.pow(x, 2) / sum); });\n    },\n    _a);\nfunction elementWise(a, b, op) {\n    var visited = new Set();\n    var rows = [];\n    var cols = [];\n    var vals = [];\n    var operate = function (row, col) {\n        rows.push(row);\n        cols.push(col);\n        var nextValue = op(a.get(row, col), b.get(row, col));\n        vals.push(nextValue);\n    };\n    var valuesA = a.getValues();\n    var rowsA = a.getRows();\n    var colsA = a.getCols();\n    for (var i = 0; i < valuesA.length; i++) {\n        var row = rowsA[i];\n        var col = colsA[i];\n        var key = row + \":\" + col;\n        visited.add(key);\n        operate(row, col);\n    }\n    var valuesB = b.getValues();\n    var rowsB = b.getRows();\n    var colsB = b.getCols();\n    for (var i = 0; i < valuesB.length; i++) {\n        var row = rowsB[i];\n        var col = colsB[i];\n        var key = row + \":\" + col;\n        if (visited.has(key))\n            continue;\n        operate(row, col);\n    }\n    var dims = [a.nRows, a.nCols];\n    return new SparseMatrix(rows, cols, vals, dims);\n}\nfunction getCSR(x) {\n    var entries = [];\n    x.forEach(function (value, row, col) {\n        entries.push({ value: value, row: row, col: col });\n    });\n    entries.sort(function (a, b) {\n        if (a.row === b.row) {\n            return a.col - b.col;\n        }\n        else {\n            return a.row - b.col;\n        }\n    });\n    var indices = [];\n    var values = [];\n    var indptr = [];\n    var currentRow = -1;\n    for (var i = 0; i < entries.length; i++) {\n        var _a = entries[i], row = _a.row, col = _a.col, value = _a.value;\n        if (row !== currentRow) {\n            currentRow = row;\n            indptr.push(i);\n        }\n        indices.push(col);\n        values.push(value);\n    }\n    return { indices: indices, values: values, indptr: indptr };\n}\nexports.getCSR = getCSR;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils = __importStar(require(\"./utils\"));\nvar FlatTree = (function () {\n    function FlatTree(hyperplanes, offsets, children, indices) {\n        this.hyperplanes = hyperplanes;\n        this.offsets = offsets;\n        this.children = children;\n        this.indices = indices;\n    }\n    return FlatTree;\n}());\nexports.FlatTree = FlatTree;\nfunction makeForest(data, nNeighbors, nTrees, random) {\n    var leafSize = Math.max(10, nNeighbors);\n    var trees = utils\n        .range(nTrees)\n        .map(function (_, i) { return makeTree(data, leafSize, i, random); });\n    var forest = trees.map(function (tree) { return flattenTree(tree, leafSize); });\n    return forest;\n}\nexports.makeForest = makeForest;\nfunction makeTree(data, leafSize, n, random) {\n    if (leafSize === void 0) { leafSize = 30; }\n    var indices = utils.range(data.length);\n    var tree = makeEuclideanTree(data, indices, leafSize, n, random);\n    return tree;\n}\nfunction makeEuclideanTree(data, indices, leafSize, q, random) {\n    if (leafSize === void 0) { leafSize = 30; }\n    if (indices.length > leafSize) {\n        var splitResults = euclideanRandomProjectionSplit(data, indices, random);\n        var indicesLeft = splitResults.indicesLeft, indicesRight = splitResults.indicesRight, hyperplane = splitResults.hyperplane, offset = splitResults.offset;\n        var leftChild = makeEuclideanTree(data, indicesLeft, leafSize, q + 1, random);\n        var rightChild = makeEuclideanTree(data, indicesRight, leafSize, q + 1, random);\n        var node = { leftChild: leftChild, rightChild: rightChild, isLeaf: false, hyperplane: hyperplane, offset: offset };\n        return node;\n    }\n    else {\n        var node = { indices: indices, isLeaf: true };\n        return node;\n    }\n}\nfunction euclideanRandomProjectionSplit(data, indices, random) {\n    var dim = data[0].length;\n    var leftIndex = utils.tauRandInt(indices.length, random);\n    var rightIndex = utils.tauRandInt(indices.length, random);\n    rightIndex += leftIndex === rightIndex ? 1 : 0;\n    rightIndex = rightIndex % indices.length;\n    var left = indices[leftIndex];\n    var right = indices[rightIndex];\n    var hyperplaneOffset = 0;\n    var hyperplaneVector = utils.zeros(dim);\n    for (var i = 0; i < hyperplaneVector.length; i++) {\n        hyperplaneVector[i] = data[left][i] - data[right][i];\n        hyperplaneOffset -=\n            (hyperplaneVector[i] * (data[left][i] + data[right][i])) / 2.0;\n    }\n    var nLeft = 0;\n    var nRight = 0;\n    var side = utils.zeros(indices.length);\n    for (var i = 0; i < indices.length; i++) {\n        var margin = hyperplaneOffset;\n        for (var d = 0; d < dim; d++) {\n            margin += hyperplaneVector[d] * data[indices[i]][d];\n        }\n        if (margin === 0) {\n            side[i] = utils.tauRandInt(2, random);\n            if (side[i] === 0) {\n                nLeft += 1;\n            }\n            else {\n                nRight += 1;\n            }\n        }\n        else if (margin > 0) {\n            side[i] = 0;\n            nLeft += 1;\n        }\n        else {\n            side[i] = 1;\n            nRight += 1;\n        }\n    }\n    var indicesLeft = utils.zeros(nLeft);\n    var indicesRight = utils.zeros(nRight);\n    nLeft = 0;\n    nRight = 0;\n    for (var i in utils.range(side.length)) {\n        if (side[i] === 0) {\n            indicesLeft[nLeft] = indices[i];\n            nLeft += 1;\n        }\n        else {\n            indicesRight[nRight] = indices[i];\n            nRight += 1;\n        }\n    }\n    return {\n        indicesLeft: indicesLeft,\n        indicesRight: indicesRight,\n        hyperplane: hyperplaneVector,\n        offset: hyperplaneOffset,\n    };\n}\nfunction flattenTree(tree, leafSize) {\n    var nNodes = numNodes(tree);\n    var nLeaves = numLeaves(tree);\n    var hyperplanes = utils\n        .range(nNodes)\n        .map(function () { return utils.zeros(tree.hyperplane.length); });\n    var offsets = utils.zeros(nNodes);\n    var children = utils.range(nNodes).map(function () { return [-1, -1]; });\n    var indices = utils\n        .range(nLeaves)\n        .map(function () { return utils.range(leafSize).map(function () { return -1; }); });\n    recursiveFlatten(tree, hyperplanes, offsets, children, indices, 0, 0);\n    return new FlatTree(hyperplanes, offsets, children, indices);\n}\nfunction recursiveFlatten(tree, hyperplanes, offsets, children, indices, nodeNum, leafNum) {\n    var _a;\n    if (tree.isLeaf) {\n        children[nodeNum][0] = -leafNum;\n        (_a = indices[leafNum]).splice.apply(_a, __spread([0, tree.indices.length], tree.indices));\n        leafNum += 1;\n        return { nodeNum: nodeNum, leafNum: leafNum };\n    }\n    else {\n        hyperplanes[nodeNum] = tree.hyperplane;\n        offsets[nodeNum] = tree.offset;\n        children[nodeNum][0] = nodeNum + 1;\n        var oldNodeNum = nodeNum;\n        var res = recursiveFlatten(tree.leftChild, hyperplanes, offsets, children, indices, nodeNum + 1, leafNum);\n        nodeNum = res.nodeNum;\n        leafNum = res.leafNum;\n        children[oldNodeNum][1] = nodeNum + 1;\n        res = recursiveFlatten(tree.rightChild, hyperplanes, offsets, children, indices, nodeNum + 1, leafNum);\n        return { nodeNum: res.nodeNum, leafNum: res.leafNum };\n    }\n}\nfunction numNodes(tree) {\n    if (tree.isLeaf) {\n        return 1;\n    }\n    else {\n        return 1 + numNodes(tree.leftChild) + numNodes(tree.rightChild);\n    }\n}\nfunction numLeaves(tree) {\n    if (tree.isLeaf) {\n        return 1;\n    }\n    else {\n        return numLeaves(tree.leftChild) + numLeaves(tree.rightChild);\n    }\n}\nfunction makeLeafArray(rpForest) {\n    var e_1, _a;\n    if (rpForest.length > 0) {\n        var output = [];\n        try {\n            for (var rpForest_1 = __values(rpForest), rpForest_1_1 = rpForest_1.next(); !rpForest_1_1.done; rpForest_1_1 = rpForest_1.next()) {\n                var tree = rpForest_1_1.value;\n                output.push.apply(output, __spread(tree.indices));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (rpForest_1_1 && !rpForest_1_1.done && (_a = rpForest_1.return)) _a.call(rpForest_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return output;\n    }\n    else {\n        return [[-1]];\n    }\n}\nexports.makeLeafArray = makeLeafArray;\nfunction selectSide(hyperplane, offset, point, random) {\n    var margin = offset;\n    for (var d = 0; d < point.length; d++) {\n        margin += hyperplane[d] * point[d];\n    }\n    if (margin === 0) {\n        var side = utils.tauRandInt(2, random);\n        return side;\n    }\n    else if (margin > 0) {\n        return 0;\n    }\n    else {\n        return 1;\n    }\n}\nfunction searchFlatTree(point, tree, random) {\n    var node = 0;\n    while (tree.children[node][0] > 0) {\n        var side = selectSide(tree.hyperplanes[node], tree.offsets[node], point, random);\n        if (side === 0) {\n            node = tree.children[node][0];\n        }\n        else {\n            node = tree.children[node][1];\n        }\n    }\n    var index = -1 * tree.children[node][0];\n    return tree.indices[index];\n}\nexports.searchFlatTree = searchFlatTree;\n","\"use strict\";\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar heap = __importStar(require(\"./heap\"));\nvar matrix = __importStar(require(\"./matrix\"));\nvar tree = __importStar(require(\"./tree\"));\nvar utils = __importStar(require(\"./utils\"));\nfunction makeNNDescent(distanceFn, random) {\n    return function nNDescent(data, leafArray, nNeighbors, nIters, maxCandidates, delta, rho, rpTreeInit) {\n        if (nIters === void 0) { nIters = 10; }\n        if (maxCandidates === void 0) { maxCandidates = 50; }\n        if (delta === void 0) { delta = 0.001; }\n        if (rho === void 0) { rho = 0.5; }\n        if (rpTreeInit === void 0) { rpTreeInit = true; }\n        var nVertices = data.length;\n        var currentGraph = heap.makeHeap(data.length, nNeighbors);\n        for (var i = 0; i < data.length; i++) {\n            var indices = heap.rejectionSample(nNeighbors, data.length, random);\n            for (var j = 0; j < indices.length; j++) {\n                var d = distanceFn(data[i], data[indices[j]]);\n                heap.heapPush(currentGraph, i, d, indices[j], 1);\n                heap.heapPush(currentGraph, indices[j], d, i, 1);\n            }\n        }\n        if (rpTreeInit) {\n            for (var n = 0; n < leafArray.length; n++) {\n                for (var i = 0; i < leafArray[n].length; i++) {\n                    if (leafArray[n][i] < 0) {\n                        break;\n                    }\n                    for (var j = i + 1; j < leafArray[n].length; j++) {\n                        if (leafArray[n][j] < 0) {\n                            break;\n                        }\n                        var d = distanceFn(data[leafArray[n][i]], data[leafArray[n][j]]);\n                        heap.heapPush(currentGraph, leafArray[n][i], d, leafArray[n][j], 1);\n                        heap.heapPush(currentGraph, leafArray[n][j], d, leafArray[n][i], 1);\n                    }\n                }\n            }\n        }\n        for (var n = 0; n < nIters; n++) {\n            var candidateNeighbors = heap.buildCandidates(currentGraph, nVertices, nNeighbors, maxCandidates, random);\n            var c = 0;\n            for (var i = 0; i < nVertices; i++) {\n                for (var j = 0; j < maxCandidates; j++) {\n                    var p = Math.floor(candidateNeighbors[0][i][j]);\n                    if (p < 0 || utils.tauRand(random) < rho) {\n                        continue;\n                    }\n                    for (var k = 0; k < maxCandidates; k++) {\n                        var q = Math.floor(candidateNeighbors[0][i][k]);\n                        var cj = candidateNeighbors[2][i][j];\n                        var ck = candidateNeighbors[2][i][k];\n                        if (q < 0 || (!cj && !ck)) {\n                            continue;\n                        }\n                        var d = distanceFn(data[p], data[q]);\n                        c += heap.heapPush(currentGraph, p, d, q, 1);\n                        c += heap.heapPush(currentGraph, q, d, p, 1);\n                    }\n                }\n            }\n            if (c <= delta * nNeighbors * data.length) {\n                break;\n            }\n        }\n        var sorted = heap.deheapSort(currentGraph);\n        return sorted;\n    };\n}\nexports.makeNNDescent = makeNNDescent;\nfunction makeInitializations(distanceFn) {\n    function initFromRandom(nNeighbors, data, queryPoints, _heap, random) {\n        for (var i = 0; i < queryPoints.length; i++) {\n            var indices = utils.rejectionSample(nNeighbors, data.length, random);\n            for (var j = 0; j < indices.length; j++) {\n                if (indices[j] < 0) {\n                    continue;\n                }\n                var d = distanceFn(data[indices[j]], queryPoints[i]);\n                heap.heapPush(_heap, i, d, indices[j], 1);\n            }\n        }\n    }\n    function initFromTree(_tree, data, queryPoints, _heap, random) {\n        for (var i = 0; i < queryPoints.length; i++) {\n            var indices = tree.searchFlatTree(queryPoints[i], _tree, random);\n            for (var j = 0; j < indices.length; j++) {\n                if (indices[j] < 0) {\n                    return;\n                }\n                var d = distanceFn(data[indices[j]], queryPoints[i]);\n                heap.heapPush(_heap, i, d, indices[j], 1);\n            }\n        }\n        return;\n    }\n    return { initFromRandom: initFromRandom, initFromTree: initFromTree };\n}\nexports.makeInitializations = makeInitializations;\nfunction makeInitializedNNSearch(distanceFn) {\n    return function nnSearchFn(data, graph, initialization, queryPoints) {\n        var e_1, _a;\n        var _b = matrix.getCSR(graph), indices = _b.indices, indptr = _b.indptr;\n        for (var i = 0; i < queryPoints.length; i++) {\n            var tried = new Set(initialization[0][i]);\n            while (true) {\n                var vertex = heap.smallestFlagged(initialization, i);\n                if (vertex === -1) {\n                    break;\n                }\n                var candidates = indices.slice(indptr[vertex], indptr[vertex + 1]);\n                try {\n                    for (var candidates_1 = __values(candidates), candidates_1_1 = candidates_1.next(); !candidates_1_1.done; candidates_1_1 = candidates_1.next()) {\n                        var candidate = candidates_1_1.value;\n                        if (candidate === vertex ||\n                            candidate === -1 ||\n                            tried.has(candidate)) {\n                            continue;\n                        }\n                        var d = distanceFn(data[candidate], queryPoints[i]);\n                        heap.uncheckedHeapPush(initialization, i, d, candidate, 1);\n                        tried.add(candidate);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (candidates_1_1 && !candidates_1_1.done && (_a = candidates_1.return)) _a.call(candidates_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        }\n        return initialization;\n    };\n}\nexports.makeInitializedNNSearch = makeInitializedNNSearch;\nfunction initializeSearch(forest, data, queryPoints, nNeighbors, initFromRandom, initFromTree, random) {\n    var e_2, _a;\n    var results = heap.makeHeap(queryPoints.length, nNeighbors);\n    initFromRandom(nNeighbors, data, queryPoints, results, random);\n    if (forest) {\n        try {\n            for (var forest_1 = __values(forest), forest_1_1 = forest_1.next(); !forest_1_1.done; forest_1_1 = forest_1.next()) {\n                var tree_1 = forest_1_1.value;\n                initFromTree(tree_1, data, queryPoints, results, random);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (forest_1_1 && !forest_1_1.done && (_a = forest_1.return)) _a.call(forest_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    return results;\n}\nexports.initializeSearch = initializeSearch;\n","/**\n * Calculate current error\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} parameters - Array of current parameter values\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {number}\n */\nexport default function errorCalculation(\n  data,\n  parameters,\n  parameterizedFunction\n) {\n  var error = 0;\n  const func = parameterizedFunction(parameters);\n\n  for (var i = 0; i < data.x.length; i++) {\n    error += Math.abs(data.y[i] - func(data.x[i]));\n  }\n\n  return error;\n}\n","'use strict';\n\nconst toString = Object.prototype.toString;\n\nfunction isAnyArray(object) {\n  return toString.call(object).endsWith('Array]');\n}\n\nmodule.exports = isAnyArray;\n","import max from 'ml-array-max';\nimport min from 'ml-array-min';\nimport isArray from 'is-any-array';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport default rescale;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the minimum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction min(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var minValue = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport default min;\n","import isArray from 'is-any-array';\n\n/**\n * Computes the maximum of the given values\n * @param {Array<number>} input\n * @return {number}\n */\n\nfunction max(input) {\n  if (!isArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var maxValue = input[0];\n\n  for (var i = 1; i < input.length; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport default max;\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\n/**\r\n * @class LuDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/LuDecomposition.cs\r\n * @param {Matrix} matrix\r\n */\r\nexport default class LuDecomposition {\r\n  constructor(matrix) {\r\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\r\n\r\n    var lu = matrix.clone();\r\n    var rows = lu.rows;\r\n    var columns = lu.columns;\r\n    var pivotVector = new Array(rows);\r\n    var pivotSign = 1;\r\n    var i, j, k, p, s, t, v;\r\n    var LUcolj, kmax;\r\n\r\n    for (i = 0; i < rows; i++) {\r\n      pivotVector[i] = i;\r\n    }\r\n\r\n    LUcolj = new Array(rows);\r\n\r\n    for (j = 0; j < columns; j++) {\r\n      for (i = 0; i < rows; i++) {\r\n        LUcolj[i] = lu.get(i, j);\r\n      }\r\n\r\n      for (i = 0; i < rows; i++) {\r\n        kmax = Math.min(i, j);\r\n        s = 0;\r\n        for (k = 0; k < kmax; k++) {\r\n          s += lu.get(i, k) * LUcolj[k];\r\n        }\r\n        LUcolj[i] -= s;\r\n        lu.set(i, j, LUcolj[i]);\r\n      }\r\n\r\n      p = j;\r\n      for (i = j + 1; i < rows; i++) {\r\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\r\n          p = i;\r\n        }\r\n      }\r\n\r\n      if (p !== j) {\r\n        for (k = 0; k < columns; k++) {\r\n          t = lu.get(p, k);\r\n          lu.set(p, k, lu.get(j, k));\r\n          lu.set(j, k, t);\r\n        }\r\n\r\n        v = pivotVector[p];\r\n        pivotVector[p] = pivotVector[j];\r\n        pivotVector[j] = v;\r\n\r\n        pivotSign = -pivotSign;\r\n      }\r\n\r\n      if (j < rows && lu.get(j, j) !== 0) {\r\n        for (i = j + 1; i < rows; i++) {\r\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\r\n        }\r\n      }\r\n    }\r\n\r\n    this.LU = lu;\r\n    this.pivotVector = pivotVector;\r\n    this.pivotSign = pivotSign;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  isSingular() {\r\n    var data = this.LU;\r\n    var col = data.columns;\r\n    for (var j = 0; j < col; j++) {\r\n      if (data[j][j] === 0) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Matrix} value\r\n   * @return {Matrix}\r\n   */\r\n  solve(value) {\r\n    value = Matrix.checkMatrix(value);\r\n\r\n    var lu = this.LU;\r\n    var rows = lu.rows;\r\n\r\n    if (rows !== value.rows) {\r\n      throw new Error('Invalid matrix dimensions');\r\n    }\r\n    if (this.isSingular()) {\r\n      throw new Error('LU matrix is singular');\r\n    }\r\n\r\n    var count = value.columns;\r\n    var X = value.subMatrixRow(this.pivotVector, 0, count - 1);\r\n    var columns = lu.columns;\r\n    var i, j, k;\r\n\r\n    for (k = 0; k < columns; k++) {\r\n      for (i = k + 1; i < columns; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * lu[i][k];\r\n        }\r\n      }\r\n    }\r\n    for (k = columns - 1; k >= 0; k--) {\r\n      for (j = 0; j < count; j++) {\r\n        X[k][j] /= lu[k][k];\r\n      }\r\n      for (i = 0; i < k; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * lu[i][k];\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get determinant() {\r\n    var data = this.LU;\r\n    if (!data.isSquare()) {\r\n      throw new Error('Matrix must be square');\r\n    }\r\n    var determinant = this.pivotSign;\r\n    var col = data.columns;\r\n    for (var j = 0; j < col; j++) {\r\n      determinant *= data[j][j];\r\n    }\r\n    return determinant;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get lowerTriangularMatrix() {\r\n    var data = this.LU;\r\n    var rows = data.rows;\r\n    var columns = data.columns;\r\n    var X = new Matrix(rows, columns);\r\n    for (var i = 0; i < rows; i++) {\r\n      for (var j = 0; j < columns; j++) {\r\n        if (i > j) {\r\n          X[i][j] = data[i][j];\r\n        } else if (i === j) {\r\n          X[i][j] = 1;\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get upperTriangularMatrix() {\r\n    var data = this.LU;\r\n    var rows = data.rows;\r\n    var columns = data.columns;\r\n    var X = new Matrix(rows, columns);\r\n    for (var i = 0; i < rows; i++) {\r\n      for (var j = 0; j < columns; j++) {\r\n        if (i <= j) {\r\n          X[i][j] = data[i][j];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get pivotPermutationVector() {\r\n    return this.pivotVector.slice();\r\n  }\r\n}\r\n","export function hypotenuse(a, b) {\r\n  var r = 0;\r\n  if (Math.abs(a) > Math.abs(b)) {\r\n    r = b / a;\r\n    return Math.abs(a) * Math.sqrt(1 + r * r);\r\n  }\r\n  if (b !== 0) {\r\n    r = a / b;\r\n    return Math.abs(b) * Math.sqrt(1 + r * r);\r\n  }\r\n  return 0;\r\n}\r\n\r\nexport function getFilled2DArray(rows, columns, value) {\r\n  var array = new Array(rows);\r\n  for (var i = 0; i < rows; i++) {\r\n    array[i] = new Array(columns);\r\n    for (var j = 0; j < columns; j++) {\r\n      array[i][j] = value;\r\n    }\r\n  }\r\n  return array;\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\nimport { hypotenuse, getFilled2DArray } from './util';\r\n\r\n/**\r\n * @class SingularValueDecomposition\r\n * @see https://github.com/accord-net/framework/blob/development/Sources/Accord.Math/Decompositions/SingularValueDecomposition.cs\r\n * @param {Matrix} value\r\n * @param {object} [options]\r\n * @param {boolean} [options.computeLeftSingularVectors=true]\r\n * @param {boolean} [options.computeRightSingularVectors=true]\r\n * @param {boolean} [options.autoTranspose=false]\r\n */\r\nexport default class SingularValueDecomposition {\r\n  constructor(value, options = {}) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n\r\n    var m = value.rows;\r\n    var n = value.columns;\r\n\r\n    const {\r\n      computeLeftSingularVectors = true,\r\n      computeRightSingularVectors = true,\r\n      autoTranspose = false\r\n    } = options;\r\n\r\n    var wantu = Boolean(computeLeftSingularVectors);\r\n    var wantv = Boolean(computeRightSingularVectors);\r\n\r\n    var swapped = false;\r\n    var a;\r\n    if (m < n) {\r\n      if (!autoTranspose) {\r\n        a = value.clone();\r\n        // eslint-disable-next-line no-console\r\n        console.warn(\r\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose'\r\n        );\r\n      } else {\r\n        a = value.transpose();\r\n        m = a.rows;\r\n        n = a.columns;\r\n        swapped = true;\r\n        var aux = wantu;\r\n        wantu = wantv;\r\n        wantv = aux;\r\n      }\r\n    } else {\r\n      a = value.clone();\r\n    }\r\n\r\n    var nu = Math.min(m, n);\r\n    var ni = Math.min(m + 1, n);\r\n    var s = new Array(ni);\r\n    var U = getFilled2DArray(m, nu, 0);\r\n    var V = getFilled2DArray(n, n, 0);\r\n\r\n    var e = new Array(n);\r\n    var work = new Array(m);\r\n\r\n    var si = new Array(ni);\r\n    for (let i = 0; i < ni; i++) si[i] = i;\r\n\r\n    var nct = Math.min(m - 1, n);\r\n    var nrt = Math.max(0, Math.min(n - 2, m));\r\n    var mrc = Math.max(nct, nrt);\r\n\r\n    for (let k = 0; k < mrc; k++) {\r\n      if (k < nct) {\r\n        s[k] = 0;\r\n        for (let i = k; i < m; i++) {\r\n          s[k] = hypotenuse(s[k], a[i][k]);\r\n        }\r\n        if (s[k] !== 0) {\r\n          if (a[k][k] < 0) {\r\n            s[k] = -s[k];\r\n          }\r\n          for (let i = k; i < m; i++) {\r\n            a[i][k] /= s[k];\r\n          }\r\n          a[k][k] += 1;\r\n        }\r\n        s[k] = -s[k];\r\n      }\r\n\r\n      for (let j = k + 1; j < n; j++) {\r\n        if (k < nct && s[k] !== 0) {\r\n          let t = 0;\r\n          for (let i = k; i < m; i++) {\r\n            t += a[i][k] * a[i][j];\r\n          }\r\n          t = -t / a[k][k];\r\n          for (let i = k; i < m; i++) {\r\n            a[i][j] += t * a[i][k];\r\n          }\r\n        }\r\n        e[j] = a[k][j];\r\n      }\r\n\r\n      if (wantu && k < nct) {\r\n        for (let i = k; i < m; i++) {\r\n          U[i][k] = a[i][k];\r\n        }\r\n      }\r\n\r\n      if (k < nrt) {\r\n        e[k] = 0;\r\n        for (let i = k + 1; i < n; i++) {\r\n          e[k] = hypotenuse(e[k], e[i]);\r\n        }\r\n        if (e[k] !== 0) {\r\n          if (e[k + 1] < 0) {\r\n            e[k] = 0 - e[k];\r\n          }\r\n          for (let i = k + 1; i < n; i++) {\r\n            e[i] /= e[k];\r\n          }\r\n          e[k + 1] += 1;\r\n        }\r\n        e[k] = -e[k];\r\n        if (k + 1 < m && e[k] !== 0) {\r\n          for (let i = k + 1; i < m; i++) {\r\n            work[i] = 0;\r\n          }\r\n          for (let i = k + 1; i < m; i++) {\r\n            for (let j = k + 1; j < n; j++) {\r\n              work[i] += e[j] * a[i][j];\r\n            }\r\n          }\r\n          for (let j = k + 1; j < n; j++) {\r\n            let t = -e[j] / e[k + 1];\r\n            for (let i = k + 1; i < m; i++) {\r\n              a[i][j] += t * work[i];\r\n            }\r\n          }\r\n        }\r\n        if (wantv) {\r\n          for (let i = k + 1; i < n; i++) {\r\n            V[i][k] = e[i];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    let p = Math.min(n, m + 1);\r\n    if (nct < n) {\r\n      s[nct] = a[nct][nct];\r\n    }\r\n    if (m < p) {\r\n      s[p - 1] = 0;\r\n    }\r\n    if (nrt + 1 < p) {\r\n      e[nrt] = a[nrt][p - 1];\r\n    }\r\n    e[p - 1] = 0;\r\n\r\n    if (wantu) {\r\n      for (let j = nct; j < nu; j++) {\r\n        for (let i = 0; i < m; i++) {\r\n          U[i][j] = 0;\r\n        }\r\n        U[j][j] = 1;\r\n      }\r\n      for (let k = nct - 1; k >= 0; k--) {\r\n        if (s[k] !== 0) {\r\n          for (let j = k + 1; j < nu; j++) {\r\n            let t = 0;\r\n            for (let i = k; i < m; i++) {\r\n              t += U[i][k] * U[i][j];\r\n            }\r\n            t = -t / U[k][k];\r\n            for (let i = k; i < m; i++) {\r\n              U[i][j] += t * U[i][k];\r\n            }\r\n          }\r\n          for (let i = k; i < m; i++) {\r\n            U[i][k] = -U[i][k];\r\n          }\r\n          U[k][k] = 1 + U[k][k];\r\n          for (let i = 0; i < k - 1; i++) {\r\n            U[i][k] = 0;\r\n          }\r\n        } else {\r\n          for (let i = 0; i < m; i++) {\r\n            U[i][k] = 0;\r\n          }\r\n          U[k][k] = 1;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (wantv) {\r\n      for (let k = n - 1; k >= 0; k--) {\r\n        if (k < nrt && e[k] !== 0) {\r\n          for (let j = k + 1; j < n; j++) {\r\n            let t = 0;\r\n            for (let i = k + 1; i < n; i++) {\r\n              t += V[i][k] * V[i][j];\r\n            }\r\n            t = -t / V[k + 1][k];\r\n            for (let i = k + 1; i < n; i++) {\r\n              V[i][j] += t * V[i][k];\r\n            }\r\n          }\r\n        }\r\n        for (let i = 0; i < n; i++) {\r\n          V[i][k] = 0;\r\n        }\r\n        V[k][k] = 1;\r\n      }\r\n    }\r\n\r\n    var pp = p - 1;\r\n    var iter = 0;\r\n    var eps = Number.EPSILON;\r\n    while (p > 0) {\r\n      let k, kase;\r\n      for (k = p - 2; k >= -1; k--) {\r\n        if (k === -1) {\r\n          break;\r\n        }\r\n        const alpha =\r\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\r\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\r\n          e[k] = 0;\r\n          break;\r\n        }\r\n      }\r\n      if (k === p - 2) {\r\n        kase = 4;\r\n      } else {\r\n        let ks;\r\n        for (ks = p - 1; ks >= k; ks--) {\r\n          if (ks === k) {\r\n            break;\r\n          }\r\n          let t =\r\n            (ks !== p ? Math.abs(e[ks]) : 0) +\r\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\r\n          if (Math.abs(s[ks]) <= eps * t) {\r\n            s[ks] = 0;\r\n            break;\r\n          }\r\n        }\r\n        if (ks === k) {\r\n          kase = 3;\r\n        } else if (ks === p - 1) {\r\n          kase = 1;\r\n        } else {\r\n          kase = 2;\r\n          k = ks;\r\n        }\r\n      }\r\n\r\n      k++;\r\n\r\n      switch (kase) {\r\n        case 1: {\r\n          let f = e[p - 2];\r\n          e[p - 2] = 0;\r\n          for (let j = p - 2; j >= k; j--) {\r\n            let t = hypotenuse(s[j], f);\r\n            let cs = s[j] / t;\r\n            let sn = f / t;\r\n            s[j] = t;\r\n            if (j !== k) {\r\n              f = -sn * e[j - 1];\r\n              e[j - 1] = cs * e[j - 1];\r\n            }\r\n            if (wantv) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = cs * V[i][j] + sn * V[i][p - 1];\r\n                V[i][p - 1] = -sn * V[i][j] + cs * V[i][p - 1];\r\n                V[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 2: {\r\n          let f = e[k - 1];\r\n          e[k - 1] = 0;\r\n          for (let j = k; j < p; j++) {\r\n            let t = hypotenuse(s[j], f);\r\n            let cs = s[j] / t;\r\n            let sn = f / t;\r\n            s[j] = t;\r\n            f = -sn * e[j];\r\n            e[j] = cs * e[j];\r\n            if (wantu) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = cs * U[i][j] + sn * U[i][k - 1];\r\n                U[i][k - 1] = -sn * U[i][j] + cs * U[i][k - 1];\r\n                U[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 3: {\r\n          const scale = Math.max(\r\n            Math.abs(s[p - 1]),\r\n            Math.abs(s[p - 2]),\r\n            Math.abs(e[p - 2]),\r\n            Math.abs(s[k]),\r\n            Math.abs(e[k])\r\n          );\r\n          const sp = s[p - 1] / scale;\r\n          const spm1 = s[p - 2] / scale;\r\n          const epm1 = e[p - 2] / scale;\r\n          const sk = s[k] / scale;\r\n          const ek = e[k] / scale;\r\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\r\n          const c = sp * epm1 * (sp * epm1);\r\n          let shift = 0;\r\n          if (b !== 0 || c !== 0) {\r\n            if (b < 0) {\r\n              shift = 0 - Math.sqrt(b * b + c);\r\n            } else {\r\n              shift = Math.sqrt(b * b + c);\r\n            }\r\n            shift = c / (b + shift);\r\n          }\r\n          let f = (sk + sp) * (sk - sp) + shift;\r\n          let g = sk * ek;\r\n          for (let j = k; j < p - 1; j++) {\r\n            let t = hypotenuse(f, g);\r\n            if (t === 0) t = Number.MIN_VALUE;\r\n            let cs = f / t;\r\n            let sn = g / t;\r\n            if (j !== k) {\r\n              e[j - 1] = t;\r\n            }\r\n            f = cs * s[j] + sn * e[j];\r\n            e[j] = cs * e[j] - sn * s[j];\r\n            g = sn * s[j + 1];\r\n            s[j + 1] = cs * s[j + 1];\r\n            if (wantv) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = cs * V[i][j] + sn * V[i][j + 1];\r\n                V[i][j + 1] = -sn * V[i][j] + cs * V[i][j + 1];\r\n                V[i][j] = t;\r\n              }\r\n            }\r\n            t = hypotenuse(f, g);\r\n            if (t === 0) t = Number.MIN_VALUE;\r\n            cs = f / t;\r\n            sn = g / t;\r\n            s[j] = t;\r\n            f = cs * e[j] + sn * s[j + 1];\r\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\r\n            g = sn * e[j + 1];\r\n            e[j + 1] = cs * e[j + 1];\r\n            if (wantu && j < m - 1) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = cs * U[i][j] + sn * U[i][j + 1];\r\n                U[i][j + 1] = -sn * U[i][j] + cs * U[i][j + 1];\r\n                U[i][j] = t;\r\n              }\r\n            }\r\n          }\r\n          e[p - 2] = f;\r\n          iter = iter + 1;\r\n          break;\r\n        }\r\n        case 4: {\r\n          if (s[k] <= 0) {\r\n            s[k] = s[k] < 0 ? -s[k] : 0;\r\n            if (wantv) {\r\n              for (let i = 0; i <= pp; i++) {\r\n                V[i][k] = -V[i][k];\r\n              }\r\n            }\r\n          }\r\n          while (k < pp) {\r\n            if (s[k] >= s[k + 1]) {\r\n              break;\r\n            }\r\n            let t = s[k];\r\n            s[k] = s[k + 1];\r\n            s[k + 1] = t;\r\n            if (wantv && k < n - 1) {\r\n              for (let i = 0; i < n; i++) {\r\n                t = V[i][k + 1];\r\n                V[i][k + 1] = V[i][k];\r\n                V[i][k] = t;\r\n              }\r\n            }\r\n            if (wantu && k < m - 1) {\r\n              for (let i = 0; i < m; i++) {\r\n                t = U[i][k + 1];\r\n                U[i][k + 1] = U[i][k];\r\n                U[i][k] = t;\r\n              }\r\n            }\r\n            k++;\r\n          }\r\n          iter = 0;\r\n          p--;\r\n          break;\r\n        }\r\n        // no default\r\n      }\r\n    }\r\n\r\n    if (swapped) {\r\n      var tmp = V;\r\n      V = U;\r\n      U = tmp;\r\n    }\r\n\r\n    this.m = m;\r\n    this.n = n;\r\n    this.s = s;\r\n    this.U = U;\r\n    this.V = V;\r\n  }\r\n\r\n  /**\r\n   * Solve a problem of least square (Ax=b) by using the SVD. Useful when A is singular. When A is not singular, it would be better to use qr.solve(value).\r\n   * Example : We search to approximate x, with A matrix shape m*n, x vector size n, b vector size m (m > n). We will use :\r\n   * var svd = SingularValueDecomposition(A);\r\n   * var x = svd.solve(b);\r\n   * @param {Matrix} value - Matrix 1D which is the vector b (in the equation Ax = b)\r\n   * @return {Matrix} - The vector x\r\n   */\r\n  solve(value) {\r\n    var Y = value;\r\n    var e = this.threshold;\r\n    var scols = this.s.length;\r\n    var Ls = Matrix.zeros(scols, scols);\r\n\r\n    for (let i = 0; i < scols; i++) {\r\n      if (Math.abs(this.s[i]) <= e) {\r\n        Ls[i][i] = 0;\r\n      } else {\r\n        Ls[i][i] = 1 / this.s[i];\r\n      }\r\n    }\r\n\r\n    var U = this.U;\r\n    var V = this.rightSingularVectors;\r\n\r\n    var VL = V.mmul(Ls);\r\n    var vrows = V.rows;\r\n    var urows = U.length;\r\n    var VLU = Matrix.zeros(vrows, urows);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < urows; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < scols; k++) {\r\n          sum += VL[i][k] * U[j][k];\r\n        }\r\n        VLU[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return VLU.mmul(Y);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Array<number>} value\r\n   * @return {Matrix}\r\n   */\r\n  solveForDiagonal(value) {\r\n    return this.solve(Matrix.diag(value));\r\n  }\r\n\r\n  /**\r\n   * Get the inverse of the matrix. We compute the inverse of a matrix using SVD when this matrix is singular or ill-conditioned. Example :\r\n   * var svd = SingularValueDecomposition(A);\r\n   * var inverseA = svd.inverse();\r\n   * @return {Matrix} - The approximation of the inverse of the matrix\r\n   */\r\n  inverse() {\r\n    var V = this.V;\r\n    var e = this.threshold;\r\n    var vrows = V.length;\r\n    var vcols = V[0].length;\r\n    var X = new Matrix(vrows, this.s.length);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < vcols; j++) {\r\n        if (Math.abs(this.s[j]) > e) {\r\n          X[i][j] = V[i][j] / this.s[j];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    var U = this.U;\r\n\r\n    var urows = U.length;\r\n    var ucols = U[0].length;\r\n    var Y = new Matrix(vrows, urows);\r\n\r\n    for (let i = 0; i < vrows; i++) {\r\n      for (let j = 0; j < urows; j++) {\r\n        let sum = 0;\r\n        for (let k = 0; k < ucols; k++) {\r\n          sum += X[i][k] * U[j][k];\r\n        }\r\n        Y[i][j] = sum;\r\n      }\r\n    }\r\n\r\n    return Y;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get condition() {\r\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get norm2() {\r\n    return this.s[0];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get rank() {\r\n    var tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\r\n    var r = 0;\r\n    var s = this.s;\r\n    for (var i = 0, ii = s.length; i < ii; i++) {\r\n      if (s[i] > tol) {\r\n        r++;\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Array<number>}\r\n   */\r\n  get diagonal() {\r\n    return this.s;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  get threshold() {\r\n    return Number.EPSILON / 2 * Math.max(this.m, this.n) * this.s[0];\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get leftSingularVectors() {\r\n    if (!Matrix.isMatrix(this.U)) {\r\n      this.U = new Matrix(this.U);\r\n    }\r\n    return this.U;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get rightSingularVectors() {\r\n    if (!Matrix.isMatrix(this.V)) {\r\n      this.V = new Matrix(this.V);\r\n    }\r\n    return this.V;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get diagonalMatrix() {\r\n    return Matrix.diag(this.s);\r\n  }\r\n}\r\n","import Matrix from './matrix';\r\n\r\n/**\r\n * @private\r\n * Check that a row index is not out of bounds\r\n * @param {Matrix} matrix\r\n * @param {number} index\r\n * @param {boolean} [outer]\r\n */\r\nexport function checkRowIndex(matrix, index, outer) {\r\n  var max = outer ? matrix.rows : matrix.rows - 1;\r\n  if (index < 0 || index > max) {\r\n    throw new RangeError('Row index out of range');\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that a column index is not out of bounds\r\n * @param {Matrix} matrix\r\n * @param {number} index\r\n * @param {boolean} [outer]\r\n */\r\nexport function checkColumnIndex(matrix, index, outer) {\r\n  var max = outer ? matrix.columns : matrix.columns - 1;\r\n  if (index < 0 || index > max) {\r\n    throw new RangeError('Column index out of range');\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that the provided vector is an array with the right length\r\n * @param {Matrix} matrix\r\n * @param {Array|Matrix} vector\r\n * @return {Array}\r\n * @throws {RangeError}\r\n */\r\nexport function checkRowVector(matrix, vector) {\r\n  if (vector.to1DArray) {\r\n    vector = vector.to1DArray();\r\n  }\r\n  if (vector.length !== matrix.columns) {\r\n    throw new RangeError(\r\n      'vector size must be the same as the number of columns'\r\n    );\r\n  }\r\n  return vector;\r\n}\r\n\r\n/**\r\n * @private\r\n * Check that the provided vector is an array with the right length\r\n * @param {Matrix} matrix\r\n * @param {Array|Matrix} vector\r\n * @return {Array}\r\n * @throws {RangeError}\r\n */\r\nexport function checkColumnVector(matrix, vector) {\r\n  if (vector.to1DArray) {\r\n    vector = vector.to1DArray();\r\n  }\r\n  if (vector.length !== matrix.rows) {\r\n    throw new RangeError('vector size must be the same as the number of rows');\r\n  }\r\n  return vector;\r\n}\r\n\r\nexport function checkIndices(matrix, rowIndices, columnIndices) {\r\n  return {\r\n    row: checkRowIndices(matrix, rowIndices),\r\n    column: checkColumnIndices(matrix, columnIndices)\r\n  };\r\n}\r\n\r\nexport function checkRowIndices(matrix, rowIndices) {\r\n  if (typeof rowIndices !== 'object') {\r\n    throw new TypeError('unexpected type for row indices');\r\n  }\r\n\r\n  var rowOut = rowIndices.some((r) => {\r\n    return r < 0 || r >= matrix.rows;\r\n  });\r\n\r\n  if (rowOut) {\r\n    throw new RangeError('row indices are out of range');\r\n  }\r\n\r\n  if (!Array.isArray(rowIndices)) rowIndices = Array.from(rowIndices);\r\n\r\n  return rowIndices;\r\n}\r\n\r\nexport function checkColumnIndices(matrix, columnIndices) {\r\n  if (typeof columnIndices !== 'object') {\r\n    throw new TypeError('unexpected type for column indices');\r\n  }\r\n\r\n  var columnOut = columnIndices.some((c) => {\r\n    return c < 0 || c >= matrix.columns;\r\n  });\r\n\r\n  if (columnOut) {\r\n    throw new RangeError('column indices are out of range');\r\n  }\r\n  if (!Array.isArray(columnIndices)) columnIndices = Array.from(columnIndices);\r\n\r\n  return columnIndices;\r\n}\r\n\r\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\r\n  if (arguments.length !== 5) {\r\n    throw new RangeError('expected 4 arguments');\r\n  }\r\n  checkNumber('startRow', startRow);\r\n  checkNumber('endRow', endRow);\r\n  checkNumber('startColumn', startColumn);\r\n  checkNumber('endColumn', endColumn);\r\n  if (\r\n    startRow > endRow ||\r\n    startColumn > endColumn ||\r\n    startRow < 0 ||\r\n    startRow >= matrix.rows ||\r\n    endRow < 0 ||\r\n    endRow >= matrix.rows ||\r\n    startColumn < 0 ||\r\n    startColumn >= matrix.columns ||\r\n    endColumn < 0 ||\r\n    endColumn >= matrix.columns\r\n  ) {\r\n    throw new RangeError('Submatrix indices are out of range');\r\n  }\r\n}\r\n\r\nexport function getRange(from, to) {\r\n  var arr = new Array(to - from + 1);\r\n  for (var i = 0; i < arr.length; i++) {\r\n    arr[i] = from + i;\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport function sumByRow(matrix) {\r\n  var sum = Matrix.zeros(matrix.rows, 1);\r\n  for (var i = 0; i < matrix.rows; ++i) {\r\n    for (var j = 0; j < matrix.columns; ++j) {\r\n      sum.set(i, 0, sum.get(i, 0) + matrix.get(i, j));\r\n    }\r\n  }\r\n  return sum;\r\n}\r\n\r\nexport function sumByColumn(matrix) {\r\n  var sum = Matrix.zeros(1, matrix.columns);\r\n  for (var i = 0; i < matrix.rows; ++i) {\r\n    for (var j = 0; j < matrix.columns; ++j) {\r\n      sum.set(0, j, sum.get(0, j) + matrix.get(i, j));\r\n    }\r\n  }\r\n  return sum;\r\n}\r\n\r\nexport function sumAll(matrix) {\r\n  var v = 0;\r\n  for (var i = 0; i < matrix.rows; i++) {\r\n    for (var j = 0; j < matrix.columns; j++) {\r\n      v += matrix.get(i, j);\r\n    }\r\n  }\r\n  return v;\r\n}\r\n\r\nfunction checkNumber(name, value) {\r\n  if (typeof value !== 'number') {\r\n    throw new TypeError(`${name} must be a number`);\r\n  }\r\n}\r\n","import AbstractMatrix from '../abstractMatrix';\r\nimport Matrix from '../matrix';\r\n\r\nexport default class BaseView extends AbstractMatrix() {\r\n  constructor(matrix, rows, columns) {\r\n    super();\r\n    this.matrix = matrix;\r\n    this.rows = rows;\r\n    this.columns = columns;\r\n  }\r\n\r\n  static get [Symbol.species]() {\r\n    return Matrix;\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixTransposeView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.columns, matrix.rows);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(columnIndex, rowIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(columnIndex, rowIndex);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixRowView extends BaseView {\r\n  constructor(matrix, row) {\r\n    super(matrix, 1, matrix.columns);\r\n    this.row = row;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.row, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.row, columnIndex);\r\n  }\r\n}\r\n","import { checkRange } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSubView extends BaseView {\r\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\r\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\r\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\r\n    this.startRow = startRow;\r\n    this.startColumn = startColumn;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex,\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.startRow + rowIndex,\r\n      this.startColumn + columnIndex\r\n    );\r\n  }\r\n}\r\n","import { checkIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices, columnIndices) {\r\n    var indices = checkIndices(matrix, rowIndices, columnIndices);\r\n    super(matrix, indices.row.length, indices.column.length);\r\n    this.rowIndices = indices.row;\r\n    this.columnIndices = indices.column;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex],\r\n      value\r\n    );\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(\r\n      this.rowIndices[rowIndex],\r\n      this.columnIndices[columnIndex]\r\n    );\r\n  }\r\n}\r\n","import { checkRowIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixRowSelectionView extends BaseView {\r\n  constructor(matrix, rowIndices) {\r\n    rowIndices = checkRowIndices(matrix, rowIndices);\r\n    super(matrix, rowIndices.length, matrix.columns);\r\n    this.rowIndices = rowIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\r\n  }\r\n}\r\n","import { checkColumnIndices } from '../util';\r\n\r\nimport BaseView from './base';\r\n\r\nexport default class MatrixColumnSelectionView extends BaseView {\r\n  constructor(matrix, columnIndices) {\r\n    columnIndices = checkColumnIndices(matrix, columnIndices);\r\n    super(matrix, matrix.rows, columnIndices.length);\r\n    this.columnIndices = columnIndices;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixColumnView extends BaseView {\r\n  constructor(matrix, column) {\r\n    super(matrix, matrix.rows, 1);\r\n    this.column = column;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.column, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex) {\r\n    return this.matrix.get(rowIndex, this.column);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipRowView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\r\n  }\r\n}\r\n","import BaseView from './base';\r\n\r\nexport default class MatrixFlipColumnView extends BaseView {\r\n  constructor(matrix) {\r\n    super(matrix, matrix.rows, matrix.columns);\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\r\n  }\r\n}\r\n","import rescale from 'ml-array-rescale';\r\n\r\nimport LuDecomposition from './dc/lu';\r\nimport SvDecomposition from './dc/svd';\r\nimport {\r\n  checkRowVector, checkRowIndex, checkColumnIndex, checkColumnVector,\r\n  checkRange, checkIndices,\r\n  sumByRow, sumByColumn, sumAll\r\n} from './util';\r\nimport MatrixTransposeView from './views/transpose';\r\nimport MatrixRowView from './views/row';\r\nimport MatrixSubView from './views/sub';\r\nimport MatrixSelectionView from './views/selection';\r\nimport MatrixRowSelectionView from './views/rowSelection';\r\nimport MatrixColumnSelectionView from './views/columnSelection';\r\nimport MatrixColumnView from './views/column';\r\nimport MatrixFlipRowView from './views/flipRow';\r\nimport MatrixFlipColumnView from './views/flipColumn';\r\n\r\nexport default function AbstractMatrix(superCtor) {\r\n  if (superCtor === undefined) superCtor = Object;\r\n\r\n  /**\r\n   * Real matrix\r\n   * @class Matrix\r\n   * @param {number|Array|Matrix} nRows - Number of rows of the new matrix,\r\n   * 2D array containing the data or Matrix instance to clone\r\n   * @param {number} [nColumns] - Number of columns of the new matrix\r\n   */\r\n  class Matrix extends superCtor {\r\n    static get [Symbol.species]() {\r\n      return this;\r\n    }\r\n\r\n    /**\r\n     * Constructs a Matrix with the chosen dimensions from a 1D array\r\n     * @param {number} newRows - Number of rows\r\n     * @param {number} newColumns - Number of columns\r\n     * @param {Array} newData - A 1D array containing data for the matrix\r\n     * @return {Matrix} - The new matrix\r\n     */\r\n    static from1DArray(newRows, newColumns, newData) {\r\n      var length = newRows * newColumns;\r\n      if (length !== newData.length) {\r\n        throw new RangeError('Data length does not match given dimensions');\r\n      }\r\n      var newMatrix = new this(newRows, newColumns);\r\n      for (var row = 0; row < newRows; row++) {\r\n        for (var column = 0; column < newColumns; column++) {\r\n          newMatrix.set(row, column, newData[row * newColumns + column]);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a row vector, a matrix with only one row.\r\n         * @param {Array} newData - A 1D array containing data for the vector\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static rowVector(newData) {\r\n      var vector = new this(1, newData.length);\r\n      for (var i = 0; i < newData.length; i++) {\r\n        vector.set(0, i, newData[i]);\r\n      }\r\n      return vector;\r\n    }\r\n\r\n    /**\r\n         * Creates a column vector, a matrix with only one column.\r\n         * @param {Array} newData - A 1D array containing data for the vector\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static columnVector(newData) {\r\n      var vector = new this(newData.length, 1);\r\n      for (var i = 0; i < newData.length; i++) {\r\n        vector.set(i, 0, newData[i]);\r\n      }\r\n      return vector;\r\n    }\r\n\r\n    /**\r\n         * Creates an empty matrix with the given dimensions. Values will be undefined. Same as using new Matrix(rows, columns).\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static empty(rows, columns) {\r\n      return new this(rows, columns);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be set to zero.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static zeros(rows, columns) {\r\n      return this.empty(rows, columns).fill(0);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be set to one.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @return {Matrix} - The new matrix\r\n         */\r\n    static ones(rows, columns) {\r\n      return this.empty(rows, columns).fill(1);\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be randomly set.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @param {function} [rng=Math.random] - Random number generator\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    static rand(rows, columns, rng) {\r\n      if (rng === undefined) rng = Math.random;\r\n      var matrix = this.empty(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          matrix.set(i, j, rng());\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a matrix with the given dimensions. Values will be random integers.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} columns - Number of columns\r\n         * @param {number} [maxValue=1000] - Maximum value\r\n         * @param {function} [rng=Math.random] - Random number generator\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    static randInt(rows, columns, maxValue, rng) {\r\n      if (maxValue === undefined) maxValue = 1000;\r\n      if (rng === undefined) rng = Math.random;\r\n      var matrix = this.empty(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          var value = Math.floor(rng() * maxValue);\r\n          matrix.set(i, j, value);\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates an identity matrix with the given dimension. Values of the diagonal will be 1 and others will be 0.\r\n         * @param {number} rows - Number of rows\r\n         * @param {number} [columns=rows] - Number of columns\r\n         * @param {number} [value=1] - Value to fill the diagonal with\r\n         * @return {Matrix} - The new identity matrix\r\n         */\r\n    static eye(rows, columns, value) {\r\n      if (columns === undefined) columns = rows;\r\n      if (value === undefined) value = 1;\r\n      var min = Math.min(rows, columns);\r\n      var matrix = this.zeros(rows, columns);\r\n      for (var i = 0; i < min; i++) {\r\n        matrix.set(i, i, value);\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Creates a diagonal matrix based on the given array.\r\n         * @param {Array} data - Array containing the data for the diagonal\r\n         * @param {number} [rows] - Number of rows (Default: data.length)\r\n         * @param {number} [columns] - Number of columns (Default: rows)\r\n         * @return {Matrix} - The new diagonal matrix\r\n         */\r\n    static diag(data, rows, columns) {\r\n      var l = data.length;\r\n      if (rows === undefined) rows = l;\r\n      if (columns === undefined) columns = rows;\r\n      var min = Math.min(l, rows, columns);\r\n      var matrix = this.zeros(rows, columns);\r\n      for (var i = 0; i < min; i++) {\r\n        matrix.set(i, i, data[i]);\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a matrix whose elements are the minimum between matrix1 and matrix2\r\n         * @param {Matrix} matrix1\r\n         * @param {Matrix} matrix2\r\n         * @return {Matrix}\r\n         */\r\n    static min(matrix1, matrix2) {\r\n      matrix1 = this.checkMatrix(matrix1);\r\n      matrix2 = this.checkMatrix(matrix2);\r\n      var rows = matrix1.rows;\r\n      var columns = matrix1.columns;\r\n      var result = new this(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Returns a matrix whose elements are the maximum between matrix1 and matrix2\r\n         * @param {Matrix} matrix1\r\n         * @param {Matrix} matrix2\r\n         * @return {Matrix}\r\n         */\r\n    static max(matrix1, matrix2) {\r\n      matrix1 = this.checkMatrix(matrix1);\r\n      matrix2 = this.checkMatrix(matrix2);\r\n      var rows = matrix1.rows;\r\n      var columns = matrix1.columns;\r\n      var result = new this(rows, columns);\r\n      for (var i = 0; i < rows; i++) {\r\n        for (var j = 0; j < columns; j++) {\r\n          result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Check that the provided value is a Matrix and tries to instantiate one if not\r\n         * @param {*} value - The value to check\r\n         * @return {Matrix}\r\n         */\r\n    static checkMatrix(value) {\r\n      return Matrix.isMatrix(value) ? value : new this(value);\r\n    }\r\n\r\n    /**\r\n         * Returns true if the argument is a Matrix, false otherwise\r\n         * @param {*} value - The value to check\r\n         * @return {boolean}\r\n         */\r\n    static isMatrix(value) {\r\n      return (value != null) && (value.klass === 'Matrix');\r\n    }\r\n\r\n    /**\r\n         * @prop {number} size - The number of elements in the matrix.\r\n         */\r\n    get size() {\r\n      return this.rows * this.columns;\r\n    }\r\n\r\n    /**\r\n         * Applies a callback for each element of the matrix. The function is called in the matrix (this) context.\r\n         * @param {function} callback - Function that will be called with two parameters : i (row) and j (column)\r\n         * @return {Matrix} this\r\n         */\r\n    apply(callback) {\r\n      if (typeof callback !== 'function') {\r\n        throw new TypeError('callback must be a function');\r\n      }\r\n      var ii = this.rows;\r\n      var jj = this.columns;\r\n      for (var i = 0; i < ii; i++) {\r\n        for (var j = 0; j < jj; j++) {\r\n          callback.call(this, i, j);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a new 1D array filled row by row with the matrix values\r\n         * @return {Array}\r\n         */\r\n    to1DArray() {\r\n      var array = new Array(this.size);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          array[i * this.columns + j] = this.get(i, j);\r\n        }\r\n      }\r\n      return array;\r\n    }\r\n\r\n    /**\r\n         * Returns a 2D array containing a copy of the data\r\n         * @return {Array}\r\n         */\r\n    to2DArray() {\r\n      var copy = new Array(this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        copy[i] = new Array(this.columns);\r\n        for (var j = 0; j < this.columns; j++) {\r\n          copy[i][j] = this.get(i, j);\r\n        }\r\n      }\r\n      return copy;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one row\r\n         */\r\n    isRowVector() {\r\n      return this.rows === 1;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one column\r\n         */\r\n    isColumnVector() {\r\n      return this.columns === 1;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has one row or one column\r\n         */\r\n    isVector() {\r\n      return (this.rows === 1) || (this.columns === 1);\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix has the same number of rows and columns\r\n         */\r\n    isSquare() {\r\n      return this.rows === this.columns;\r\n    }\r\n\r\n    /**\r\n         * @return {boolean} true if the matrix is square and has the same values on both sides of the diagonal\r\n         */\r\n    isSymmetric() {\r\n      if (this.isSquare()) {\r\n        for (var i = 0; i < this.rows; i++) {\r\n          for (var j = 0; j <= i; j++) {\r\n            if (this.get(i, j) !== this.get(j, i)) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n          * @return true if the matrix is in echelon form\r\n          */\r\n    isEchelonForm() {\r\n      let i = 0;\r\n      let j = 0;\r\n      let previousColumn = -1;\r\n      let isEchelonForm = true;\r\n      let checked = false;\r\n      while ((i < this.rows) && (isEchelonForm)) {\r\n        j = 0;\r\n        checked = false;\r\n        while ((j < this.columns) && (checked === false)) {\r\n          if (this.get(i, j) === 0) {\r\n            j++;\r\n          } else if ((this.get(i, j) === 1) && (j > previousColumn)) {\r\n            checked = true;\r\n            previousColumn = j;\r\n          } else {\r\n            isEchelonForm = false;\r\n            checked = true;\r\n          }\r\n        }\r\n        i++;\r\n      }\r\n      return isEchelonForm;\r\n    }\r\n\r\n    /**\r\n             * @return true if the matrix is in reduced echelon form\r\n             */\r\n    isReducedEchelonForm() {\r\n      let i = 0;\r\n      let j = 0;\r\n      let previousColumn = -1;\r\n      let isReducedEchelonForm = true;\r\n      let checked = false;\r\n      while ((i < this.rows) && (isReducedEchelonForm)) {\r\n        j = 0;\r\n        checked = false;\r\n        while ((j < this.columns) && (checked === false)) {\r\n          if (this.get(i, j) === 0) {\r\n            j++;\r\n          } else if ((this.get(i, j) === 1) && (j > previousColumn)) {\r\n            checked = true;\r\n            previousColumn = j;\r\n          } else {\r\n            isReducedEchelonForm = false;\r\n            checked = true;\r\n          }\r\n        }\r\n        for (let k = j + 1; k < this.rows; k++) {\r\n          if (this.get(i, k) !== 0) {\r\n            isReducedEchelonForm = false;\r\n          }\r\n        }\r\n        i++;\r\n      }\r\n      return isReducedEchelonForm;\r\n    }\r\n\r\n    /**\r\n         * Sets a given element of the matrix. mat.set(3,4,1) is equivalent to mat[3][4]=1\r\n         * @abstract\r\n         * @param {number} rowIndex - Index of the row\r\n         * @param {number} columnIndex - Index of the column\r\n         * @param {number} value - The new value for the element\r\n         * @return {Matrix} this\r\n         */\r\n    set(rowIndex, columnIndex, value) { // eslint-disable-line no-unused-vars\r\n      throw new Error('set method is unimplemented');\r\n    }\r\n\r\n    /**\r\n         * Returns the given element of the matrix. mat.get(3,4) is equivalent to matrix[3][4]\r\n         * @abstract\r\n         * @param {number} rowIndex - Index of the row\r\n         * @param {number} columnIndex - Index of the column\r\n         * @return {number}\r\n         */\r\n    get(rowIndex, columnIndex) { // eslint-disable-line no-unused-vars\r\n      throw new Error('get method is unimplemented');\r\n    }\r\n\r\n    /**\r\n         * Creates a new matrix that is a repetition of the current matrix. New matrix has rowRep times the number of\r\n         * rows of the matrix, and colRep times the number of columns of the matrix\r\n         * @param {number} rowRep - Number of times the rows should be repeated\r\n         * @param {number} colRep - Number of times the columns should be re\r\n         * @return {Matrix}\r\n         * @example\r\n         * var matrix = new Matrix([[1,2]]);\r\n         * matrix.repeat(2); // [[1,2],[1,2]]\r\n         */\r\n    repeat(rowRep, colRep) {\r\n      rowRep = rowRep || 1;\r\n      colRep = colRep || 1;\r\n      var matrix = new this.constructor[Symbol.species](this.rows * rowRep, this.columns * colRep);\r\n      for (var i = 0; i < rowRep; i++) {\r\n        for (var j = 0; j < colRep; j++) {\r\n          matrix.setSubMatrix(this, this.rows * i, this.columns * j);\r\n        }\r\n      }\r\n      return matrix;\r\n    }\r\n\r\n    /**\r\n         * Fills the matrix with a given value. All elements will be set to this value.\r\n         * @param {number} value - New value\r\n         * @return {Matrix} this\r\n         */\r\n    fill(value) {\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, value);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Negates the matrix. All elements will be multiplied by (-1)\r\n         * @return {Matrix} this\r\n         */\r\n    neg() {\r\n      return this.mulS(-1);\r\n    }\r\n\r\n    /**\r\n         * Returns a new array from the given row index\r\n         * @param {number} index - Row index\r\n         * @return {Array}\r\n         */\r\n    getRow(index) {\r\n      checkRowIndex(this, index);\r\n      var row = new Array(this.columns);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        row[i] = this.get(index, i);\r\n      }\r\n      return row;\r\n    }\r\n\r\n    /**\r\n         * Returns a new row vector from the given row index\r\n         * @param {number} index - Row index\r\n         * @return {Matrix}\r\n         */\r\n    getRowVector(index) {\r\n      return this.constructor.rowVector(this.getRow(index));\r\n    }\r\n\r\n    /**\r\n         * Sets a row at the given index\r\n         * @param {number} index - Row index\r\n         * @param {Array|Matrix} array - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    setRow(index, array) {\r\n      checkRowIndex(this, index);\r\n      array = checkRowVector(this, array);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.set(index, i, array[i]);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Swaps two rows\r\n         * @param {number} row1 - First row index\r\n         * @param {number} row2 - Second row index\r\n         * @return {Matrix} this\r\n         */\r\n    swapRows(row1, row2) {\r\n      checkRowIndex(this, row1);\r\n      checkRowIndex(this, row2);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        var temp = this.get(row1, i);\r\n        this.set(row1, i, this.get(row2, i));\r\n        this.set(row2, i, temp);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a new array from the given column index\r\n         * @param {number} index - Column index\r\n         * @return {Array}\r\n         */\r\n    getColumn(index) {\r\n      checkColumnIndex(this, index);\r\n      var column = new Array(this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        column[i] = this.get(i, index);\r\n      }\r\n      return column;\r\n    }\r\n\r\n    /**\r\n         * Returns a new column vector from the given column index\r\n         * @param {number} index - Column index\r\n         * @return {Matrix}\r\n         */\r\n    getColumnVector(index) {\r\n      return this.constructor.columnVector(this.getColumn(index));\r\n    }\r\n\r\n    /**\r\n         * Sets a column at the given index\r\n         * @param {number} index - Column index\r\n         * @param {Array|Matrix} array - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    setColumn(index, array) {\r\n      checkColumnIndex(this, index);\r\n      array = checkColumnVector(this, array);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.set(i, index, array[i]);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Swaps two columns\r\n         * @param {number} column1 - First column index\r\n         * @param {number} column2 - Second column index\r\n         * @return {Matrix} this\r\n         */\r\n    swapColumns(column1, column2) {\r\n      checkColumnIndex(this, column1);\r\n      checkColumnIndex(this, column2);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        var temp = this.get(i, column1);\r\n        this.set(i, column1, this.get(i, column2));\r\n        this.set(i, column2, temp);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Adds the values of a vector to each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    addRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) + vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Subtracts the values of a vector from each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    subRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) - vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a vector with each row\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    mulRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) * vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Divides the values of each row by those of a vector\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    divRowVector(vector) {\r\n      vector = checkRowVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) / vector[j]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Adds the values of a vector to each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    addColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) + vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Subtracts the values of a vector from each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    subColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) - vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a vector with each column\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    mulColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) * vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Divides the values of each column by those of a vector\r\n         * @param {Array|Matrix} vector - Array or vector\r\n         * @return {Matrix} this\r\n         */\r\n    divColumnVector(vector) {\r\n      vector = checkColumnVector(this, vector);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          this.set(i, j, this.get(i, j) / vector[i]);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a row with a scalar\r\n         * @param {number} index - Row index\r\n         * @param {number} value\r\n         * @return {Matrix} this\r\n         */\r\n    mulRow(index, value) {\r\n      checkRowIndex(this, index);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.set(index, i, this.get(index, i) * value);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Multiplies the values of a column with a scalar\r\n         * @param {number} index - Column index\r\n         * @param {number} value\r\n         * @return {Matrix} this\r\n         */\r\n    mulColumn(index, value) {\r\n      checkColumnIndex(this, index);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.set(i, index, this.get(i, index) * value);\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of the matrix\r\n         * @return {number}\r\n         */\r\n    max() {\r\n      var v = this.get(0, 0);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) > v) {\r\n            v = this.get(i, j);\r\n          }\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value\r\n         * @return {Array}\r\n         */\r\n    maxIndex() {\r\n      var v = this.get(0, 0);\r\n      var idx = [0, 0];\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) > v) {\r\n            v = this.get(i, j);\r\n            idx[0] = i;\r\n            idx[1] = j;\r\n          }\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of the matrix\r\n         * @return {number}\r\n         */\r\n    min() {\r\n      var v = this.get(0, 0);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) < v) {\r\n            v = this.get(i, j);\r\n          }\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the minimum value\r\n         * @return {Array}\r\n         */\r\n    minIndex() {\r\n      var v = this.get(0, 0);\r\n      var idx = [0, 0];\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          if (this.get(i, j) < v) {\r\n            v = this.get(i, j);\r\n            idx[0] = i;\r\n            idx[1] = j;\r\n          }\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {number}\r\n         */\r\n    maxRow(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) > v) {\r\n          v = this.get(row, i);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {Array}\r\n         */\r\n    maxRowIndex(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      var idx = [row, 0];\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) > v) {\r\n          v = this.get(row, i);\r\n          idx[1] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {number}\r\n         */\r\n    minRow(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) < v) {\r\n          v = this.get(row, i);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one row\r\n         * @param {number} row - Row index\r\n         * @return {Array}\r\n         */\r\n    minRowIndex(row) {\r\n      checkRowIndex(this, row);\r\n      var v = this.get(row, 0);\r\n      var idx = [row, 0];\r\n      for (var i = 1; i < this.columns; i++) {\r\n        if (this.get(row, i) < v) {\r\n          v = this.get(row, i);\r\n          idx[1] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the maximum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {number}\r\n         */\r\n    maxColumn(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) > v) {\r\n          v = this.get(i, column);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the maximum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {Array}\r\n         */\r\n    maxColumnIndex(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      var idx = [0, column];\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) > v) {\r\n          v = this.get(i, column);\r\n          idx[0] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns the minimum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {number}\r\n         */\r\n    minColumn(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) < v) {\r\n          v = this.get(i, column);\r\n        }\r\n      }\r\n      return v;\r\n    }\r\n\r\n    /**\r\n         * Returns the index of the minimum value of one column\r\n         * @param {number} column - Column index\r\n         * @return {Array}\r\n         */\r\n    minColumnIndex(column) {\r\n      checkColumnIndex(this, column);\r\n      var v = this.get(0, column);\r\n      var idx = [0, column];\r\n      for (var i = 1; i < this.rows; i++) {\r\n        if (this.get(i, column) < v) {\r\n          v = this.get(i, column);\r\n          idx[0] = i;\r\n        }\r\n      }\r\n      return idx;\r\n    }\r\n\r\n    /**\r\n         * Returns an array containing the diagonal values of the matrix\r\n         * @return {Array}\r\n         */\r\n    diag() {\r\n      var min = Math.min(this.rows, this.columns);\r\n      var diag = new Array(min);\r\n      for (var i = 0; i < min; i++) {\r\n        diag[i] = this.get(i, i);\r\n      }\r\n      return diag;\r\n    }\r\n\r\n    /**\r\n         * Returns the sum by the argument given, if no argument given,\r\n         * it returns the sum of all elements of the matrix.\r\n         * @param {string} by - sum by 'row' or 'column'.\r\n         * @return {Matrix|number}\r\n         */\r\n    sum(by) {\r\n      switch (by) {\r\n        case 'row':\r\n          return sumByRow(this);\r\n        case 'column':\r\n          return sumByColumn(this);\r\n        default:\r\n          return sumAll(this);\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Returns the mean of all elements of the matrix\r\n         * @return {number}\r\n         */\r\n    mean() {\r\n      return this.sum() / this.size;\r\n    }\r\n\r\n    /**\r\n         * Returns the product of all elements of the matrix\r\n         * @return {number}\r\n         */\r\n    prod() {\r\n      var prod = 1;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          prod *= this.get(i, j);\r\n        }\r\n      }\r\n      return prod;\r\n    }\r\n\r\n    /**\r\n         * Returns the norm of a matrix.\r\n         * @param {string} type - \"frobenius\" (default) or \"max\" return resp. the Frobenius norm and the max norm.\r\n         * @return {number}\r\n         */\r\n    norm(type = 'frobenius') {\r\n      var result = 0;\r\n      if (type === 'max') {\r\n        return this.max();\r\n      } else if (type === 'frobenius') {\r\n        for (var i = 0; i < this.rows; i++) {\r\n          for (var j = 0; j < this.columns; j++) {\r\n            result = result + this.get(i, j) * this.get(i, j);\r\n          }\r\n        }\r\n        return Math.sqrt(result);\r\n      } else {\r\n        throw new RangeError(`unknown norm type: ${type}`);\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Computes the cumulative sum of the matrix elements (in place, row by row)\r\n         * @return {Matrix} this\r\n         */\r\n    cumulativeSum() {\r\n      var sum = 0;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          sum += this.get(i, j);\r\n          this.set(i, j, sum);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Computes the dot (scalar) product between the matrix and another\r\n         * @param {Matrix} vector2 vector\r\n         * @return {number}\r\n         */\r\n    dot(vector2) {\r\n      if (Matrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\r\n      var vector1 = this.to1DArray();\r\n      if (vector1.length !== vector2.length) {\r\n        throw new RangeError('vectors do not have the same size');\r\n      }\r\n      var dot = 0;\r\n      for (var i = 0; i < vector1.length; i++) {\r\n        dot += vector1[i] * vector2[i];\r\n      }\r\n      return dot;\r\n    }\r\n\r\n    /**\r\n         * Returns the matrix product between this and other\r\n         * @param {Matrix} other\r\n         * @return {Matrix}\r\n         */\r\n    mmul(other) {\r\n      other = this.constructor.checkMatrix(other);\r\n      if (this.columns !== other.rows) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn('Number of columns of left matrix are not equal to number of rows of right matrix.');\r\n      }\r\n\r\n      var m = this.rows;\r\n      var n = this.columns;\r\n      var p = other.columns;\r\n\r\n      var result = new this.constructor[Symbol.species](m, p);\r\n\r\n      var Bcolj = new Array(n);\r\n      for (var j = 0; j < p; j++) {\r\n        for (var k = 0; k < n; k++) {\r\n          Bcolj[k] = other.get(k, j);\r\n        }\r\n\r\n        for (var i = 0; i < m; i++) {\r\n          var s = 0;\r\n          for (k = 0; k < n; k++) {\r\n            s += this.get(i, k) * Bcolj[k];\r\n          }\r\n\r\n          result.set(i, j, s);\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    strassen2x2(other) {\r\n      var result = new this.constructor[Symbol.species](2, 2);\r\n      const a11 = this.get(0, 0);\r\n      const b11 = other.get(0, 0);\r\n      const a12 = this.get(0, 1);\r\n      const b12 = other.get(0, 1);\r\n      const a21 = this.get(1, 0);\r\n      const b21 = other.get(1, 0);\r\n      const a22 = this.get(1, 1);\r\n      const b22 = other.get(1, 1);\r\n\r\n      // Compute intermediate values.\r\n      const m1 = (a11 + a22) * (b11 + b22);\r\n      const m2 = (a21 + a22) * b11;\r\n      const m3 = a11 * (b12 - b22);\r\n      const m4 = a22 * (b21 - b11);\r\n      const m5 = (a11 + a12) * b22;\r\n      const m6 = (a21 - a11) * (b11 + b12);\r\n      const m7 = (a12 - a22) * (b21 + b22);\r\n\r\n      // Combine intermediate values into the output.\r\n      const c00 = m1 + m4 - m5 + m7;\r\n      const c01 = m3 + m5;\r\n      const c10 = m2 + m4;\r\n      const c11 = m1 - m2 + m3 + m6;\r\n\r\n      result.set(0, 0, c00);\r\n      result.set(0, 1, c01);\r\n      result.set(1, 0, c10);\r\n      result.set(1, 1, c11);\r\n      return result;\r\n    }\r\n\r\n    strassen3x3(other) {\r\n      var result = new this.constructor[Symbol.species](3, 3);\r\n\r\n      const a00 = this.get(0, 0);\r\n      const a01 = this.get(0, 1);\r\n      const a02 = this.get(0, 2);\r\n      const a10 = this.get(1, 0);\r\n      const a11 = this.get(1, 1);\r\n      const a12 = this.get(1, 2);\r\n      const a20 = this.get(2, 0);\r\n      const a21 = this.get(2, 1);\r\n      const a22 = this.get(2, 2);\r\n\r\n      const b00 = other.get(0, 0);\r\n      const b01 = other.get(0, 1);\r\n      const b02 = other.get(0, 2);\r\n      const b10 = other.get(1, 0);\r\n      const b11 = other.get(1, 1);\r\n      const b12 = other.get(1, 2);\r\n      const b20 = other.get(2, 0);\r\n      const b21 = other.get(2, 1);\r\n      const b22 = other.get(2, 2);\r\n\r\n      const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\r\n      const m2 = (a00 - a10) * (-b01 + b11);\r\n      const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\r\n      const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\r\n      const m5 = (a10 + a11) * (-b00 + b01);\r\n      const m6 = a00 * b00;\r\n      const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\r\n      const m8 = (-a00 + a20) * (b02 - b12);\r\n      const m9 = (a20 + a21) * (-b00 + b02);\r\n      const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\r\n      const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\r\n      const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\r\n      const m13 = (a02 - a22) * (b11 - b21);\r\n      const m14 = a02 * b20;\r\n      const m15 = (a21 + a22) * (-b20 + b21);\r\n      const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\r\n      const m17 = (a02 - a12) * (b12 - b22);\r\n      const m18 = (a11 + a12) * (-b20 + b22);\r\n      const m19 = a01 * b10;\r\n      const m20 = a12 * b21;\r\n      const m21 = a10 * b02;\r\n      const m22 = a20 * b01;\r\n      const m23 = a22 * b22;\r\n\r\n      const c00 = m6 + m14 + m19;\r\n      const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\r\n      const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\r\n      const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\r\n      const c11 = m2 + m4 + m5 + m6 + m20;\r\n      const c12 = m14 + m16 + m17 + m18 + m21;\r\n      const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\r\n      const c21 = m12 + m13 + m14 + m15 + m22;\r\n      const c22 = m6 + m7 + m8 + m9 + m23;\r\n\r\n      result.set(0, 0, c00);\r\n      result.set(0, 1, c01);\r\n      result.set(0, 2, c02);\r\n      result.set(1, 0, c10);\r\n      result.set(1, 1, c11);\r\n      result.set(1, 2, c12);\r\n      result.set(2, 0, c20);\r\n      result.set(2, 1, c21);\r\n      result.set(2, 2, c22);\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Returns the matrix product between x and y. More efficient than mmul(other) only when we multiply squared matrix and when the size of the matrix is > 1000.\r\n         * @param {Matrix} y\r\n         * @return {Matrix}\r\n         */\r\n    mmulStrassen(y) {\r\n      var x = this.clone();\r\n      var r1 = x.rows;\r\n      var c1 = x.columns;\r\n      var r2 = y.rows;\r\n      var c2 = y.columns;\r\n      if (c1 !== r2) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(`Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`);\r\n      }\r\n\r\n      // Put a matrix into the top left of a matrix of zeros.\r\n      // `rows` and `cols` are the dimensions of the output matrix.\r\n      function embed(mat, rows, cols) {\r\n        var r = mat.rows;\r\n        var c = mat.columns;\r\n        if ((r === rows) && (c === cols)) {\r\n          return mat;\r\n        } else {\r\n          var resultat = Matrix.zeros(rows, cols);\r\n          resultat = resultat.setSubMatrix(mat, 0, 0);\r\n          return resultat;\r\n        }\r\n      }\r\n\r\n\r\n      // Make sure both matrices are the same size.\r\n      // This is exclusively for simplicity:\r\n      // this algorithm can be implemented with matrices of different sizes.\r\n\r\n      var r = Math.max(r1, r2);\r\n      var c = Math.max(c1, c2);\r\n      x = embed(x, r, c);\r\n      y = embed(y, r, c);\r\n\r\n      // Our recursive multiplication function.\r\n      function blockMult(a, b, rows, cols) {\r\n        // For small matrices, resort to naive multiplication.\r\n        if (rows <= 512 || cols <= 512) {\r\n          return a.mmul(b); // a is equivalent to this\r\n        }\r\n\r\n        // Apply dynamic padding.\r\n        if ((rows % 2 === 1) && (cols % 2 === 1)) {\r\n          a = embed(a, rows + 1, cols + 1);\r\n          b = embed(b, rows + 1, cols + 1);\r\n        } else if (rows % 2 === 1) {\r\n          a = embed(a, rows + 1, cols);\r\n          b = embed(b, rows + 1, cols);\r\n        } else if (cols % 2 === 1) {\r\n          a = embed(a, rows, cols + 1);\r\n          b = embed(b, rows, cols + 1);\r\n        }\r\n\r\n        var halfRows = parseInt(a.rows / 2, 10);\r\n        var halfCols = parseInt(a.columns / 2, 10);\r\n        // Subdivide input matrices.\r\n        var a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\r\n        var b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\r\n\r\n        var a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\r\n        var b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\r\n\r\n        var a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\r\n        var b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\r\n\r\n        var a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\r\n        var b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\r\n\r\n        // Compute intermediate values.\r\n        var m1 = blockMult(Matrix.add(a11, a22), Matrix.add(b11, b22), halfRows, halfCols);\r\n        var m2 = blockMult(Matrix.add(a21, a22), b11, halfRows, halfCols);\r\n        var m3 = blockMult(a11, Matrix.sub(b12, b22), halfRows, halfCols);\r\n        var m4 = blockMult(a22, Matrix.sub(b21, b11), halfRows, halfCols);\r\n        var m5 = blockMult(Matrix.add(a11, a12), b22, halfRows, halfCols);\r\n        var m6 = blockMult(Matrix.sub(a21, a11), Matrix.add(b11, b12), halfRows, halfCols);\r\n        var m7 = blockMult(Matrix.sub(a12, a22), Matrix.add(b21, b22), halfRows, halfCols);\r\n\r\n        // Combine intermediate values into the output.\r\n        var c11 = Matrix.add(m1, m4);\r\n        c11.sub(m5);\r\n        c11.add(m7);\r\n        var c12 = Matrix.add(m3, m5);\r\n        var c21 = Matrix.add(m2, m4);\r\n        var c22 = Matrix.sub(m1, m2);\r\n        c22.add(m3);\r\n        c22.add(m6);\r\n\r\n        // Crop output to the desired size (undo dynamic padding).\r\n        var resultat = Matrix.zeros(2 * c11.rows, 2 * c11.columns);\r\n        resultat = resultat.setSubMatrix(c11, 0, 0);\r\n        resultat = resultat.setSubMatrix(c12, c11.rows, 0);\r\n        resultat = resultat.setSubMatrix(c21, 0, c11.columns);\r\n        resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\r\n        return resultat.subMatrix(0, rows - 1, 0, cols - 1);\r\n      }\r\n      return blockMult(x, y, r, c);\r\n    }\r\n\r\n    /**\r\n         * Returns a row-by-row scaled matrix\r\n         * @param {number} [min=0] - Minimum scaled value\r\n         * @param {number} [max=1] - Maximum scaled value\r\n         * @return {Matrix} - The scaled matrix\r\n         */\r\n    scaleRows(min, max) {\r\n      min = min === undefined ? 0 : min;\r\n      max = max === undefined ? 1 : max;\r\n      if (min >= max) {\r\n        throw new RangeError('min should be strictly smaller than max');\r\n      }\r\n      var newMatrix = this.constructor.empty(this.rows, this.columns);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        var scaled = rescale(this.getRow(i), { min, max });\r\n        newMatrix.setRow(i, scaled);\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a new column-by-column scaled matrix\r\n         * @param {number} [min=0] - Minimum scaled value\r\n         * @param {number} [max=1] - Maximum scaled value\r\n         * @return {Matrix} - The new scaled matrix\r\n         * @example\r\n         * var matrix = new Matrix([[1,2],[-1,0]]);\r\n         * var scaledMatrix = matrix.scaleColumns(); // [[1,1],[0,0]]\r\n         */\r\n    scaleColumns(min, max) {\r\n      min = min === undefined ? 0 : min;\r\n      max = max === undefined ? 1 : max;\r\n      if (min >= max) {\r\n        throw new RangeError('min should be strictly smaller than max');\r\n      }\r\n      var newMatrix = this.constructor.empty(this.rows, this.columns);\r\n      for (var i = 0; i < this.columns; i++) {\r\n        var scaled = rescale(this.getColumn(i), {\r\n          min: min,\r\n          max: max\r\n        });\r\n        newMatrix.setColumn(i, scaled);\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n\r\n    /**\r\n         * Returns the Kronecker product (also known as tensor product) between this and other\r\n         * See https://en.wikipedia.org/wiki/Kronecker_product\r\n         * @param {Matrix} other\r\n         * @return {Matrix}\r\n         */\r\n    kroneckerProduct(other) {\r\n      other = this.constructor.checkMatrix(other);\r\n\r\n      var m = this.rows;\r\n      var n = this.columns;\r\n      var p = other.rows;\r\n      var q = other.columns;\r\n\r\n      var result = new this.constructor[Symbol.species](m * p, n * q);\r\n      for (var i = 0; i < m; i++) {\r\n        for (var j = 0; j < n; j++) {\r\n          for (var k = 0; k < p; k++) {\r\n            for (var l = 0; l < q; l++) {\r\n              result[p * i + k][q * j + l] = this.get(i, j) * other.get(k, l);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Transposes the matrix and returns a new one containing the result\r\n         * @return {Matrix}\r\n         */\r\n    transpose() {\r\n      var result = new this.constructor[Symbol.species](this.columns, this.rows);\r\n      for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n          result.set(j, i, this.get(i, j));\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n         * Sorts the rows (in place)\r\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\r\n         * @return {Matrix} this\r\n         */\r\n    sortRows(compareFunction) {\r\n      if (compareFunction === undefined) compareFunction = compareNumbers;\r\n      for (var i = 0; i < this.rows; i++) {\r\n        this.setRow(i, this.getRow(i).sort(compareFunction));\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Sorts the columns (in place)\r\n         * @param {function} compareFunction - usual Array.prototype.sort comparison function\r\n         * @return {Matrix} this\r\n         */\r\n    sortColumns(compareFunction) {\r\n      if (compareFunction === undefined) compareFunction = compareNumbers;\r\n      for (var i = 0; i < this.columns; i++) {\r\n        this.setColumn(i, this.getColumn(i).sort(compareFunction));\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix\r\n         * @param {number} startRow - First row index\r\n         * @param {number} endRow - Last row index\r\n         * @param {number} startColumn - First column index\r\n         * @param {number} endColumn - Last column index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrix(startRow, endRow, startColumn, endColumn) {\r\n      checkRange(this, startRow, endRow, startColumn, endColumn);\r\n      var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, endColumn - startColumn + 1);\r\n      for (var i = startRow; i <= endRow; i++) {\r\n        for (var j = startColumn; j <= endColumn; j++) {\r\n          newMatrix[i - startRow][j - startColumn] = this.get(i, j);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix based on an array of row indices\r\n         * @param {Array} indices - Array containing the row indices\r\n         * @param {number} [startColumn = 0] - First column index\r\n         * @param {number} [endColumn = this.columns-1] - Last column index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrixRow(indices, startColumn, endColumn) {\r\n      if (startColumn === undefined) startColumn = 0;\r\n      if (endColumn === undefined) endColumn = this.columns - 1;\r\n      if ((startColumn > endColumn) || (startColumn < 0) || (startColumn >= this.columns) || (endColumn < 0) || (endColumn >= this.columns)) {\r\n        throw new RangeError('Argument out of range');\r\n      }\r\n\r\n      var newMatrix = new this.constructor[Symbol.species](indices.length, endColumn - startColumn + 1);\r\n      for (var i = 0; i < indices.length; i++) {\r\n        for (var j = startColumn; j <= endColumn; j++) {\r\n          if (indices[i] < 0 || indices[i] >= this.rows) {\r\n            throw new RangeError(`Row index out of range: ${indices[i]}`);\r\n          }\r\n          newMatrix.set(i, j - startColumn, this.get(indices[i], j));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns a subset of the matrix based on an array of column indices\r\n         * @param {Array} indices - Array containing the column indices\r\n         * @param {number} [startRow = 0] - First row index\r\n         * @param {number} [endRow = this.rows-1] - Last row index\r\n         * @return {Matrix}\r\n         */\r\n    subMatrixColumn(indices, startRow, endRow) {\r\n      if (startRow === undefined) startRow = 0;\r\n      if (endRow === undefined) endRow = this.rows - 1;\r\n      if ((startRow > endRow) || (startRow < 0) || (startRow >= this.rows) || (endRow < 0) || (endRow >= this.rows)) {\r\n        throw new RangeError('Argument out of range');\r\n      }\r\n\r\n      var newMatrix = new this.constructor[Symbol.species](endRow - startRow + 1, indices.length);\r\n      for (var i = 0; i < indices.length; i++) {\r\n        for (var j = startRow; j <= endRow; j++) {\r\n          if (indices[i] < 0 || indices[i] >= this.columns) {\r\n            throw new RangeError(`Column index out of range: ${indices[i]}`);\r\n          }\r\n          newMatrix.set(j - startRow, i, this.get(j, indices[i]));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Set a part of the matrix to the given sub-matrix\r\n         * @param {Matrix|Array< Array >} matrix - The source matrix from which to extract values.\r\n         * @param {number} startRow - The index of the first row to set\r\n         * @param {number} startColumn - The index of the first column to set\r\n         * @return {Matrix}\r\n         */\r\n    setSubMatrix(matrix, startRow, startColumn) {\r\n      matrix = this.constructor.checkMatrix(matrix);\r\n      var endRow = startRow + matrix.rows - 1;\r\n      var endColumn = startColumn + matrix.columns - 1;\r\n      checkRange(this, startRow, endRow, startColumn, endColumn);\r\n      for (var i = 0; i < matrix.rows; i++) {\r\n        for (var j = 0; j < matrix.columns; j++) {\r\n          this[startRow + i][startColumn + j] = matrix.get(i, j);\r\n        }\r\n      }\r\n      return this;\r\n    }\r\n\r\n    /**\r\n         * Return a new matrix based on a selection of rows and columns\r\n         * @param {Array<number>} rowIndices - The row indices to select. Order matters and an index can be more than once.\r\n         * @param {Array<number>} columnIndices - The column indices to select. Order matters and an index can be use more than once.\r\n         * @return {Matrix} The new matrix\r\n         */\r\n    selection(rowIndices, columnIndices) {\r\n      var indices = checkIndices(this, rowIndices, columnIndices);\r\n      var newMatrix = new this.constructor[Symbol.species](rowIndices.length, columnIndices.length);\r\n      for (var i = 0; i < indices.row.length; i++) {\r\n        var rowIndex = indices.row[i];\r\n        for (var j = 0; j < indices.column.length; j++) {\r\n          var columnIndex = indices.column[j];\r\n          newMatrix[i][j] = this.get(rowIndex, columnIndex);\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n\r\n    /**\r\n         * Returns the trace of the matrix (sum of the diagonal elements)\r\n         * @return {number}\r\n         */\r\n    trace() {\r\n      var min = Math.min(this.rows, this.columns);\r\n      var trace = 0;\r\n      for (var i = 0; i < min; i++) {\r\n        trace += this.get(i, i);\r\n      }\r\n      return trace;\r\n    }\r\n\r\n    /*\r\n         Matrix views\r\n         */\r\n\r\n    /**\r\n         * Returns a view of the transposition of the matrix\r\n         * @return {MatrixTransposeView}\r\n         */\r\n    transposeView() {\r\n      return new MatrixTransposeView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the row vector with the given index\r\n         * @param {number} row - row index of the vector\r\n         * @return {MatrixRowView}\r\n         */\r\n    rowView(row) {\r\n      checkRowIndex(this, row);\r\n      return new MatrixRowView(this, row);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the column vector with the given index\r\n         * @param {number} column - column index of the vector\r\n         * @return {MatrixColumnView}\r\n         */\r\n    columnView(column) {\r\n      checkColumnIndex(this, column);\r\n      return new MatrixColumnView(this, column);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the matrix flipped in the row axis\r\n         * @return {MatrixFlipRowView}\r\n         */\r\n    flipRowView() {\r\n      return new MatrixFlipRowView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the matrix flipped in the column axis\r\n         * @return {MatrixFlipColumnView}\r\n         */\r\n    flipColumnView() {\r\n      return new MatrixFlipColumnView(this);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of a submatrix giving the index boundaries\r\n         * @param {number} startRow - first row index of the submatrix\r\n         * @param {number} endRow - last row index of the submatrix\r\n         * @param {number} startColumn - first column index of the submatrix\r\n         * @param {number} endColumn - last column index of the submatrix\r\n         * @return {MatrixSubView}\r\n         */\r\n    subMatrixView(startRow, endRow, startColumn, endColumn) {\r\n      return new MatrixSubView(this, startRow, endRow, startColumn, endColumn);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the cross of the row indices and the column indices\r\n         * @example\r\n         * // resulting vector is [[2], [2]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).selectionView([0, 0], [1])\r\n         * @param {Array<number>} rowIndices\r\n         * @param {Array<number>} columnIndices\r\n         * @return {MatrixSelectionView}\r\n         */\r\n    selectionView(rowIndices, columnIndices) {\r\n      return new MatrixSelectionView(this, rowIndices, columnIndices);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the row indices\r\n         * @example\r\n         * // resulting vector is [[1,2,3], [1,2,3]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).rowSelectionView([0, 0])\r\n         * @param {Array<number>} rowIndices\r\n         * @return {MatrixRowSelectionView}\r\n         */\r\n    rowSelectionView(rowIndices) {\r\n      return new MatrixRowSelectionView(this, rowIndices);\r\n    }\r\n\r\n    /**\r\n         * Returns a view of the column indices\r\n         * @example\r\n         * // resulting vector is [[2, 2], [5, 5]]\r\n         * var matrix = new Matrix([[1,2,3], [4,5,6]]).columnSelectionView([1, 1])\r\n         * @param {Array<number>} columnIndices\r\n         * @return {MatrixColumnSelectionView}\r\n         */\r\n    columnSelectionView(columnIndices) {\r\n      return new MatrixColumnSelectionView(this, columnIndices);\r\n    }\r\n\r\n\r\n    /**\r\n        * Calculates and returns the determinant of a matrix as a Number\r\n        * @example\r\n        *   new Matrix([[1,2,3], [4,5,6]]).det()\r\n        * @return {number}\r\n        */\r\n    det() {\r\n      if (this.isSquare()) {\r\n        var a, b, c, d;\r\n        if (this.columns === 2) {\r\n          // 2 x 2 matrix\r\n          a = this.get(0, 0);\r\n          b = this.get(0, 1);\r\n          c = this.get(1, 0);\r\n          d = this.get(1, 1);\r\n\r\n          return a * d - (b * c);\r\n        } else if (this.columns === 3) {\r\n          // 3 x 3 matrix\r\n          var subMatrix0, subMatrix1, subMatrix2;\r\n          subMatrix0 = this.selectionView([1, 2], [1, 2]);\r\n          subMatrix1 = this.selectionView([1, 2], [0, 2]);\r\n          subMatrix2 = this.selectionView([1, 2], [0, 1]);\r\n          a = this.get(0, 0);\r\n          b = this.get(0, 1);\r\n          c = this.get(0, 2);\r\n\r\n          return a * subMatrix0.det() - b * subMatrix1.det() + c * subMatrix2.det();\r\n        } else {\r\n          // general purpose determinant using the LU decomposition\r\n          return new LuDecomposition(this).determinant;\r\n        }\r\n      } else {\r\n        throw Error('Determinant can only be calculated for a square matrix.');\r\n      }\r\n    }\r\n\r\n    /**\r\n         * Returns inverse of a matrix if it exists or the pseudoinverse\r\n         * @param {number} threshold - threshold for taking inverse of singular values (default = 1e-15)\r\n         * @return {Matrix} the (pseudo)inverted matrix.\r\n         */\r\n    pseudoInverse(threshold) {\r\n      if (threshold === undefined) threshold = Number.EPSILON;\r\n      var svdSolution = new SvDecomposition(this, { autoTranspose: true });\r\n\r\n      var U = svdSolution.leftSingularVectors;\r\n      var V = svdSolution.rightSingularVectors;\r\n      var s = svdSolution.diagonal;\r\n\r\n      for (var i = 0; i < s.length; i++) {\r\n        if (Math.abs(s[i]) > threshold) {\r\n          s[i] = 1.0 / s[i];\r\n        } else {\r\n          s[i] = 0.0;\r\n        }\r\n      }\r\n\r\n      // convert list to diagonal\r\n      s = this.constructor[Symbol.species].diag(s);\r\n      return V.mmul(s.mmul(U.transposeView()));\r\n    }\r\n\r\n    /**\r\n         * Creates an exact and independent copy of the matrix\r\n         * @return {Matrix}\r\n         */\r\n    clone() {\r\n      var newMatrix = new this.constructor[Symbol.species](this.rows, this.columns);\r\n      for (var row = 0; row < this.rows; row++) {\r\n        for (var column = 0; column < this.columns; column++) {\r\n          newMatrix.set(row, column, this.get(row, column));\r\n        }\r\n      }\r\n      return newMatrix;\r\n    }\r\n  }\r\n\r\n  Matrix.prototype.klass = 'Matrix';\r\n\r\n  function compareNumbers(a, b) {\r\n    return a - b;\r\n  }\r\n\r\n  /*\r\n     Synonyms\r\n     */\r\n\r\n  Matrix.random = Matrix.rand;\r\n  Matrix.diagonal = Matrix.diag;\r\n  Matrix.prototype.diagonal = Matrix.prototype.diag;\r\n  Matrix.identity = Matrix.eye;\r\n  Matrix.prototype.negate = Matrix.prototype.neg;\r\n  Matrix.prototype.tensorProduct = Matrix.prototype.kroneckerProduct;\r\n  Matrix.prototype.determinant = Matrix.prototype.det;\r\n\r\n  /*\r\n     Add dynamically instance and static methods for mathematical operations\r\n     */\r\n\r\n  var inplaceOperator = `\r\n(function %name%(value) {\r\n    if (typeof value === 'number') return this.%name%S(value);\r\n    return this.%name%M(value);\r\n})\r\n`;\r\n\r\n  var inplaceOperatorScalar = `\r\n(function %name%S(value) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, this.get(i, j) %op% value);\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var inplaceOperatorMatrix = `\r\n(function %name%M(matrix) {\r\n    matrix = this.constructor.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n        this.columns !== matrix.columns) {\r\n        throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticOperator = `\r\n(function %name%(matrix, value) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%(value);\r\n})\r\n`;\r\n\r\n  var inplaceMethod = `\r\n(function %name%() {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j)));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticMethod = `\r\n(function %name%(matrix) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%();\r\n})\r\n`;\r\n\r\n  var inplaceMethodWithArgs = `\r\n(function %name%(%args%) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), %args%));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var staticMethodWithArgs = `\r\n(function %name%(matrix, %args%) {\r\n    var newMatrix = new this[Symbol.species](matrix);\r\n    return newMatrix.%name%(%args%);\r\n})\r\n`;\r\n\r\n\r\n  var inplaceMethodWithOneArgScalar = `\r\n(function %name%S(value) {\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), value));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n  var inplaceMethodWithOneArgMatrix = `\r\n(function %name%M(matrix) {\r\n    matrix = this.constructor.checkMatrix(matrix);\r\n    if (this.rows !== matrix.rows ||\r\n        this.columns !== matrix.columns) {\r\n        throw new RangeError('Matrices dimensions must be equal');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n        for (var j = 0; j < this.columns; j++) {\r\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\r\n        }\r\n    }\r\n    return this;\r\n})\r\n`;\r\n\r\n  var inplaceMethodWithOneArg = `\r\n(function %name%(value) {\r\n    if (typeof value === 'number') return this.%name%S(value);\r\n    return this.%name%M(value);\r\n})\r\n`;\r\n\r\n  var staticMethodWithOneArg = staticMethodWithArgs;\r\n\r\n  var operators = [\r\n    // Arithmetic operators\r\n    ['+', 'add'],\r\n    ['-', 'sub', 'subtract'],\r\n    ['*', 'mul', 'multiply'],\r\n    ['/', 'div', 'divide'],\r\n    ['%', 'mod', 'modulus'],\r\n    // Bitwise operators\r\n    ['&', 'and'],\r\n    ['|', 'or'],\r\n    ['^', 'xor'],\r\n    ['<<', 'leftShift'],\r\n    ['>>', 'signPropagatingRightShift'],\r\n    ['>>>', 'rightShift', 'zeroFillRightShift']\r\n  ];\r\n\r\n  var i;\r\n  var eval2 = eval; // eslint-disable-line no-eval\r\n  for (var operator of operators) {\r\n    var inplaceOp = eval2(fillTemplateFunction(inplaceOperator, { name: operator[1], op: operator[0] }));\r\n    var inplaceOpS = eval2(fillTemplateFunction(inplaceOperatorScalar, { name: `${operator[1]}S`, op: operator[0] }));\r\n    var inplaceOpM = eval2(fillTemplateFunction(inplaceOperatorMatrix, { name: `${operator[1]}M`, op: operator[0] }));\r\n    var staticOp = eval2(fillTemplateFunction(staticOperator, { name: operator[1] }));\r\n    for (i = 1; i < operator.length; i++) {\r\n      Matrix.prototype[operator[i]] = inplaceOp;\r\n      Matrix.prototype[`${operator[i]}S`] = inplaceOpS;\r\n      Matrix.prototype[`${operator[i]}M`] = inplaceOpM;\r\n      Matrix[operator[i]] = staticOp;\r\n    }\r\n  }\r\n\r\n  var methods = [['~', 'not']];\r\n\r\n  [\r\n    'abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'cbrt', 'ceil',\r\n    'clz32', 'cos', 'cosh', 'exp', 'expm1', 'floor', 'fround', 'log', 'log1p',\r\n    'log10', 'log2', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc'\r\n  ].forEach(function (mathMethod) {\r\n    methods.push([`Math.${mathMethod}`, mathMethod]);\r\n  });\r\n\r\n  for (var method of methods) {\r\n    var inplaceMeth = eval2(fillTemplateFunction(inplaceMethod, { name: method[1], method: method[0] }));\r\n    var staticMeth = eval2(fillTemplateFunction(staticMethod, { name: method[1] }));\r\n    for (i = 1; i < method.length; i++) {\r\n      Matrix.prototype[method[i]] = inplaceMeth;\r\n      Matrix[method[i]] = staticMeth;\r\n    }\r\n  }\r\n\r\n  var methodsWithArgs = [['Math.pow', 1, 'pow']];\r\n\r\n  for (var methodWithArg of methodsWithArgs) {\r\n    var args = 'arg0';\r\n    for (i = 1; i < methodWithArg[1]; i++) {\r\n      args += `, arg${i}`;\r\n    }\r\n    if (methodWithArg[1] !== 1) {\r\n      var inplaceMethWithArgs = eval2(fillTemplateFunction(inplaceMethodWithArgs, {\r\n        name: methodWithArg[2],\r\n        method: methodWithArg[0],\r\n        args: args\r\n      }));\r\n      var staticMethWithArgs = eval2(fillTemplateFunction(staticMethodWithArgs, { name: methodWithArg[2], args: args }));\r\n      for (i = 2; i < methodWithArg.length; i++) {\r\n        Matrix.prototype[methodWithArg[i]] = inplaceMethWithArgs;\r\n        Matrix[methodWithArg[i]] = staticMethWithArgs;\r\n      }\r\n    } else {\r\n      var tmplVar = {\r\n        name: methodWithArg[2],\r\n        args: args,\r\n        method: methodWithArg[0]\r\n      };\r\n      var inplaceMethod2 = eval2(fillTemplateFunction(inplaceMethodWithOneArg, tmplVar));\r\n      var inplaceMethodS = eval2(fillTemplateFunction(inplaceMethodWithOneArgScalar, tmplVar));\r\n      var inplaceMethodM = eval2(fillTemplateFunction(inplaceMethodWithOneArgMatrix, tmplVar));\r\n      var staticMethod2 = eval2(fillTemplateFunction(staticMethodWithOneArg, tmplVar));\r\n      for (i = 2; i < methodWithArg.length; i++) {\r\n        Matrix.prototype[methodWithArg[i]] = inplaceMethod2;\r\n        Matrix.prototype[`${methodWithArg[i]}M`] = inplaceMethodM;\r\n        Matrix.prototype[`${methodWithArg[i]}S`] = inplaceMethodS;\r\n        Matrix[methodWithArg[i]] = staticMethod2;\r\n      }\r\n    }\r\n  }\r\n\r\n  function fillTemplateFunction(template, values) {\r\n    for (var value in values) {\r\n      template = template.replace(new RegExp(`%${value}%`, 'g'), values[value]);\r\n    }\r\n    return template;\r\n  }\r\n\r\n  return Matrix;\r\n}\r\n","import AbstractMatrix from './abstractMatrix';\r\nimport {\r\n  checkColumnIndex,\r\n  checkColumnVector,\r\n  checkRowIndex,\r\n  checkRowVector\r\n} from './util';\r\n\r\nexport default class Matrix extends AbstractMatrix(Array) {\r\n  constructor(nRows, nColumns) {\r\n    var i;\r\n    if (arguments.length === 1 && typeof nRows === 'number') {\r\n      return new Array(nRows);\r\n    }\r\n    if (Matrix.isMatrix(nRows)) {\r\n      return nRows.clone();\r\n    } else if (Number.isInteger(nRows) && nRows > 0) {\r\n      // Create an empty matrix\r\n      super(nRows);\r\n      if (Number.isInteger(nColumns) && nColumns > 0) {\r\n        for (i = 0; i < nRows; i++) {\r\n          this[i] = new Array(nColumns);\r\n        }\r\n      } else {\r\n        throw new TypeError('nColumns must be a positive integer');\r\n      }\r\n    } else if (Array.isArray(nRows)) {\r\n      // Copy the values from the 2D array\r\n      const matrix = nRows;\r\n      nRows = matrix.length;\r\n      nColumns = matrix[0].length;\r\n      if (typeof nColumns !== 'number' || nColumns === 0) {\r\n        throw new TypeError(\r\n          'Data must be a 2D array with at least one element'\r\n        );\r\n      }\r\n      super(nRows);\r\n      for (i = 0; i < nRows; i++) {\r\n        if (matrix[i].length !== nColumns) {\r\n          throw new RangeError('Inconsistent array dimensions');\r\n        }\r\n        this[i] = [].concat(matrix[i]);\r\n      }\r\n    } else {\r\n      throw new TypeError(\r\n        'First argument must be a positive number or an array'\r\n      );\r\n    }\r\n    this.rows = nRows;\r\n    this.columns = nColumns;\r\n    return this;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this[rowIndex][columnIndex] = value;\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this[rowIndex][columnIndex];\r\n  }\r\n\r\n  /**\r\n   * Removes a row from the given index\r\n   * @param {number} index - Row index\r\n   * @return {Matrix} this\r\n   */\r\n  removeRow(index) {\r\n    checkRowIndex(this, index);\r\n    if (this.rows === 1) {\r\n      throw new RangeError('A matrix cannot have less than one row');\r\n    }\r\n    this.splice(index, 1);\r\n    this.rows -= 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a row at the given index\r\n   * @param {number} [index = this.rows] - Row index\r\n   * @param {Array|Matrix} array - Array or vector\r\n   * @return {Matrix} this\r\n   */\r\n  addRow(index, array) {\r\n    if (array === undefined) {\r\n      array = index;\r\n      index = this.rows;\r\n    }\r\n    checkRowIndex(this, index, true);\r\n    array = checkRowVector(this, array, true);\r\n    this.splice(index, 0, array);\r\n    this.rows += 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes a column from the given index\r\n   * @param {number} index - Column index\r\n   * @return {Matrix} this\r\n   */\r\n  removeColumn(index) {\r\n    checkColumnIndex(this, index);\r\n    if (this.columns === 1) {\r\n      throw new RangeError('A matrix cannot have less than one column');\r\n    }\r\n    for (var i = 0; i < this.rows; i++) {\r\n      this[i].splice(index, 1);\r\n    }\r\n    this.columns -= 1;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Adds a column at the given index\r\n   * @param {number} [index = this.columns] - Column index\r\n   * @param {Array|Matrix} array - Array or vector\r\n   * @return {Matrix} this\r\n   */\r\n  addColumn(index, array) {\r\n    if (typeof array === 'undefined') {\r\n      array = index;\r\n      index = this.columns;\r\n    }\r\n    checkColumnIndex(this, index, true);\r\n    array = checkColumnVector(this, array);\r\n    for (var i = 0; i < this.rows; i++) {\r\n      this[i].splice(index, 0, array[i]);\r\n    }\r\n    this.columns += 1;\r\n    return this;\r\n  }\r\n}\r\n","import AbstractMatrix from '../abstractMatrix';\r\nimport Matrix from '../matrix';\r\n\r\nexport default class WrapperMatrix2D extends AbstractMatrix() {\r\n  /**\r\n   * @class WrapperMatrix2D\r\n   * @param {Array<Array<number>>} data\r\n   */\r\n  constructor(data) {\r\n    super();\r\n    this.data = data;\r\n    this.rows = data.length;\r\n    this.columns = data[0].length;\r\n  }\r\n\r\n  set(rowIndex, columnIndex, value) {\r\n    this.data[rowIndex][columnIndex] = value;\r\n    return this;\r\n  }\r\n\r\n  get(rowIndex, columnIndex) {\r\n    return this.data[rowIndex][columnIndex];\r\n  }\r\n\r\n  static get [Symbol.species]() {\r\n    return Matrix;\r\n  }\r\n}\r\n","import { Matrix, WrapperMatrix2D } from '../index';\r\n\r\nimport { hypotenuse } from './util';\r\n\r\n/**\r\n * @class QrDecomposition\r\n * @link https://github.com/lutzroeder/Mapack/blob/master/Source/QrDecomposition.cs\r\n * @param {Matrix} value\r\n */\r\nexport default class QrDecomposition {\r\n  constructor(value) {\r\n    value = WrapperMatrix2D.checkMatrix(value);\r\n\r\n    var qr = value.clone();\r\n    var m = value.rows;\r\n    var n = value.columns;\r\n    var rdiag = new Array(n);\r\n    var i, j, k, s;\r\n\r\n    for (k = 0; k < n; k++) {\r\n      var nrm = 0;\r\n      for (i = k; i < m; i++) {\r\n        nrm = hypotenuse(nrm, qr.get(i, k));\r\n      }\r\n      if (nrm !== 0) {\r\n        if (qr.get(k, k) < 0) {\r\n          nrm = -nrm;\r\n        }\r\n        for (i = k; i < m; i++) {\r\n          qr.set(i, k, qr.get(i, k) / nrm);\r\n        }\r\n        qr.set(k, k, qr.get(k, k) + 1);\r\n        for (j = k + 1; j < n; j++) {\r\n          s = 0;\r\n          for (i = k; i < m; i++) {\r\n            s += qr.get(i, k) * qr.get(i, j);\r\n          }\r\n          s = -s / qr.get(k, k);\r\n          for (i = k; i < m; i++) {\r\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\r\n          }\r\n        }\r\n      }\r\n      rdiag[k] = -nrm;\r\n    }\r\n\r\n    this.QR = qr;\r\n    this.Rdiag = rdiag;\r\n  }\r\n\r\n  /**\r\n   * Solve a problem of least square (Ax=b) by using the QR decomposition. Useful when A is rectangular, but not working when A is singular.\r\n   * Example : We search to approximate x, with A matrix shape m*n, x vector size n, b vector size m (m > n). We will use :\r\n   * var qr = QrDecomposition(A);\r\n   * var x = qr.solve(b);\r\n   * @param {Matrix} value - Matrix 1D which is the vector b (in the equation Ax = b)\r\n   * @return {Matrix} - The vector x\r\n   */\r\n  solve(value) {\r\n    value = Matrix.checkMatrix(value);\r\n\r\n    var qr = this.QR;\r\n    var m = qr.rows;\r\n\r\n    if (value.rows !== m) {\r\n      throw new Error('Matrix row dimensions must agree');\r\n    }\r\n    if (!this.isFullRank()) {\r\n      throw new Error('Matrix is rank deficient');\r\n    }\r\n\r\n    var count = value.columns;\r\n    var X = value.clone();\r\n    var n = qr.columns;\r\n    var i, j, k, s;\r\n\r\n    for (k = 0; k < n; k++) {\r\n      for (j = 0; j < count; j++) {\r\n        s = 0;\r\n        for (i = k; i < m; i++) {\r\n          s += qr[i][k] * X[i][j];\r\n        }\r\n        s = -s / qr[k][k];\r\n        for (i = k; i < m; i++) {\r\n          X[i][j] += s * qr[i][k];\r\n        }\r\n      }\r\n    }\r\n    for (k = n - 1; k >= 0; k--) {\r\n      for (j = 0; j < count; j++) {\r\n        X[k][j] /= this.Rdiag[k];\r\n      }\r\n      for (i = 0; i < k; i++) {\r\n        for (j = 0; j < count; j++) {\r\n          X[i][j] -= X[k][j] * qr[i][k];\r\n        }\r\n      }\r\n    }\r\n\r\n    return X.subMatrix(0, n - 1, 0, count - 1);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  isFullRank() {\r\n    var columns = this.QR.columns;\r\n    for (var i = 0; i < columns; i++) {\r\n      if (this.Rdiag[i] === 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get upperTriangularMatrix() {\r\n    var qr = this.QR;\r\n    var n = qr.columns;\r\n    var X = new Matrix(n, n);\r\n    var i, j;\r\n    for (i = 0; i < n; i++) {\r\n      for (j = 0; j < n; j++) {\r\n        if (i < j) {\r\n          X[i][j] = qr[i][j];\r\n        } else if (i === j) {\r\n          X[i][j] = this.Rdiag[i];\r\n        } else {\r\n          X[i][j] = 0;\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {Matrix}\r\n   */\r\n  get orthogonalMatrix() {\r\n    var qr = this.QR;\r\n    var rows = qr.rows;\r\n    var columns = qr.columns;\r\n    var X = new Matrix(rows, columns);\r\n    var i, j, k, s;\r\n\r\n    for (k = columns - 1; k >= 0; k--) {\r\n      for (i = 0; i < rows; i++) {\r\n        X[i][k] = 0;\r\n      }\r\n      X[k][k] = 1;\r\n      for (j = k; j < columns; j++) {\r\n        if (qr[k][k] !== 0) {\r\n          s = 0;\r\n          for (i = k; i < rows; i++) {\r\n            s += qr[i][k] * X[i][j];\r\n          }\r\n\r\n          s = -s / qr[k][k];\r\n\r\n          for (i = k; i < rows; i++) {\r\n            X[i][j] += s * qr[i][k];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return X;\r\n  }\r\n}\r\n","import LuDecomposition from './dc/lu';\r\nimport QrDecomposition from './dc/qr';\r\nimport SingularValueDecomposition from './dc/svd';\r\n\r\nimport { Matrix, WrapperMatrix2D } from './index';\r\n\r\n/**\r\n * Computes the inverse of a Matrix\r\n * @param {Matrix} matrix\r\n * @param {boolean} [useSVD=false]\r\n * @return {Matrix}\r\n */\r\nexport function inverse(matrix, useSVD = false) {\r\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\r\n  if (useSVD) {\r\n    return new SingularValueDecomposition(matrix).inverse();\r\n  } else {\r\n    return solve(matrix, Matrix.eye(matrix.rows));\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Matrix} leftHandSide\r\n * @param {Matrix} rightHandSide\r\n * @param {boolean} [useSVD = false]\r\n * @return {Matrix}\r\n */\r\nexport function solve(leftHandSide, rightHandSide, useSVD = false) {\r\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\r\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\r\n  if (useSVD) {\r\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\r\n  } else {\r\n    return leftHandSide.isSquare()\r\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\r\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\r\n  }\r\n}\r\n","import { inverse, Matrix } from 'ml-matrix';\n\n/**\n * Difference of the matrix function over the parameters\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} paramFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Matrix}\n */\nfunction gradientFunction(\n  data,\n  evaluatedData,\n  params,\n  gradientDifference,\n  paramFunction\n) {\n  const n = params.length;\n  const m = data.x.length;\n\n  var ans = new Array(n);\n\n  for (var param = 0; param < n; param++) {\n    ans[param] = new Array(m);\n    var auxParams = params.concat();\n    auxParams[param] += gradientDifference;\n    var funcParam = paramFunction(auxParams);\n\n    for (var point = 0; point < m; point++) {\n      ans[param][point] = evaluatedData[point] - funcParam(data.x[point]);\n    }\n  }\n  return new Matrix(ans);\n}\n\n/**\n * Matrix function over the samples\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} evaluatedData - Array of previous evaluated function values\n * @return {Matrix}\n */\nfunction matrixFunction(data, evaluatedData) {\n  const m = data.x.length;\n\n  var ans = new Array(m);\n\n  for (var point = 0; point < m; point++) {\n    ans[point] = [data.y[point] - evaluatedData[point]];\n  }\n\n  return new Matrix(ans);\n}\n\n/**\n * Iteration for Levenberg-Marquardt\n * @ignore\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {Array<number>} params - Array of previous parameter values\n * @param {number} damping - Levenberg-Marquardt parameter\n * @param {number} gradientDifference - Adjustment for decrease the damping parameter\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @return {Array<number>}\n */\nexport default function step(\n  data,\n  params,\n  damping,\n  gradientDifference,\n  parameterizedFunction\n) {\n  var value = damping * gradientDifference * gradientDifference;\n  var identity = Matrix.eye(params.length, params.length, value);\n\n  const func = parameterizedFunction(params);\n  var evaluatedData = data.x.map((e) => func(e));\n\n  var gradientFunc = gradientFunction(\n    data,\n    evaluatedData,\n    params,\n    gradientDifference,\n    parameterizedFunction\n  );\n  var matrixFunc = matrixFunction(data, evaluatedData);\n  var inverseMatrix = inverse(\n    identity.add(gradientFunc.mmul(gradientFunc.transpose()))\n  );\n\n  params = new Matrix([params]);\n  params = params.sub(\n    inverseMatrix\n      .mmul(gradientFunc)\n      .mmul(matrixFunc)\n      .mul(gradientDifference)\n      .transpose()\n  );\n\n  return params.to1DArray();\n}\n","import errorCalculation from './errorCalculation';\nimport step from './step';\n\n/**\n * Curve fitting algorithm\n * @param {{x:Array<number>, y:Array<number>}} data - Array of points to fit in the format [x1, x2, ... ], [y1, y2, ... ]\n * @param {function} parameterizedFunction - The parameters and returns a function with the independent variable as a parameter\n * @param {object} [options] - Options object\n * @param {number} [options.damping] - Levenberg-Marquardt parameter\n * @param {number} [options.gradientDifference = 10e-2] - Adjustment for decrease the damping parameter\n * @param {Array<number>} [options.minValues] - Minimum allowed values for parameters\n * @param {Array<number>} [options.maxValues] - Maximum allowed values for parameters\n * @param {Array<number>} [options.initialValues] - Array of initial parameter values\n * @param {number} [options.maxIterations = 100] - Maximum of allowed iterations\n * @param {number} [options.errorTolerance = 10e-3] - Minimum uncertainty allowed for each point\n * @return {{parameterValues: Array<number>, parameterError: number, iterations: number}}\n */\nexport default function levenbergMarquardt(\n  data,\n  parameterizedFunction,\n  options = {}\n) {\n  let {\n    maxIterations = 100,\n    gradientDifference = 10e-2,\n    damping = 0,\n    errorTolerance = 10e-3,\n    minValues,\n    maxValues,\n    initialValues\n  } = options;\n\n  if (damping <= 0) {\n    throw new Error('The damping option must be a positive number');\n  } else if (!data.x || !data.y) {\n    throw new Error('The data parameter must have x and y elements');\n  } else if (\n    !Array.isArray(data.x) ||\n    data.x.length < 2 ||\n    !Array.isArray(data.y) ||\n    data.y.length < 2\n  ) {\n    throw new Error(\n      'The data parameter elements must be an array with more than 2 points'\n    );\n  } else if (data.x.length !== data.y.length) {\n    throw new Error('The data parameter elements must have the same size');\n  }\n\n  var parameters =\n    initialValues || new Array(parameterizedFunction.length).fill(1);\n  let parLen = parameters.length;\n  maxValues = maxValues || new Array(parLen).fill(Number.MAX_SAFE_INTEGER);\n  minValues = minValues || new Array(parLen).fill(Number.MIN_SAFE_INTEGER);\n\n  if (maxValues.length !== minValues.length) {\n    throw new Error('minValues and maxValues must be the same size');\n  }\n\n  if (!Array.isArray(parameters)) {\n    throw new Error('initialValues must be an array');\n  }\n\n  var error = errorCalculation(data, parameters, parameterizedFunction);\n\n  var converged = error <= errorTolerance;\n\n  for (\n    var iteration = 0;\n    iteration < maxIterations && !converged;\n    iteration++\n  ) {\n    parameters = step(\n      data,\n      parameters,\n      damping,\n      gradientDifference,\n      parameterizedFunction\n    );\n\n    for (let k = 0; k < parLen; k++) {\n      parameters[k] = Math.min(\n        Math.max(minValues[k], parameters[k]),\n        maxValues[k]\n      );\n    }\n\n    error = errorCalculation(data, parameters, parameterizedFunction);\n    if (isNaN(error)) break;\n    converged = error <= errorTolerance;\n  }\n\n  return {\n    parameterValues: parameters,\n    parameterError: error,\n    iterations: iteration\n  };\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar heap = __importStar(require(\"./heap\"));\nvar matrix = __importStar(require(\"./matrix\"));\nvar nnDescent = __importStar(require(\"./nn_descent\"));\nvar tree = __importStar(require(\"./tree\"));\nvar utils = __importStar(require(\"./utils\"));\nvar ml_levenberg_marquardt_1 = __importDefault(require(\"ml-levenberg-marquardt\"));\nvar SMOOTH_K_TOLERANCE = 1e-5;\nvar MIN_K_DIST_SCALE = 1e-3;\nvar UMAP = (function () {\n    function UMAP(params) {\n        if (params === void 0) { params = {}; }\n        var _this = this;\n        this.learningRate = 1.0;\n        this.localConnectivity = 1.0;\n        this.minDist = 0.1;\n        this.nComponents = 2;\n        this.nEpochs = 0;\n        this.nNeighbors = 15;\n        this.negativeSampleRate = 5;\n        this.random = Math.random;\n        this.repulsionStrength = 1.0;\n        this.setOpMixRatio = 1.0;\n        this.spread = 1.0;\n        this.transformQueueSize = 4.0;\n        this.targetMetric = \"categorical\";\n        this.targetWeight = 0.5;\n        this.targetNNeighbors = this.nNeighbors;\n        this.distanceFn = euclidean;\n        this.isInitialized = false;\n        this.rpForest = [];\n        this.embedding = [];\n        this.optimizationState = new OptimizationState();\n        var setParam = function (key) {\n            if (params[key] !== undefined)\n                _this[key] = params[key];\n        };\n        setParam('distanceFn');\n        setParam('learningRate');\n        setParam('localConnectivity');\n        setParam('minDist');\n        setParam('nComponents');\n        setParam('nEpochs');\n        setParam('nNeighbors');\n        setParam('negativeSampleRate');\n        setParam('random');\n        setParam('repulsionStrength');\n        setParam('setOpMixRatio');\n        setParam('spread');\n        setParam('transformQueueSize');\n    }\n    UMAP.prototype.fit = function (X) {\n        this.initializeFit(X);\n        this.optimizeLayout();\n        return this.embedding;\n    };\n    UMAP.prototype.fitAsync = function (X, callback) {\n        if (callback === void 0) { callback = function () { return true; }; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.initializeFit(X);\n                        return [4, this.optimizeLayoutAsync(callback)];\n                    case 1:\n                        _a.sent();\n                        return [2, this.embedding];\n                }\n            });\n        });\n    };\n    UMAP.prototype.setSupervisedProjection = function (Y, params) {\n        if (params === void 0) { params = {}; }\n        this.Y = Y;\n        this.targetMetric = params.targetMetric || this.targetMetric;\n        this.targetWeight = params.targetWeight || this.targetWeight;\n        this.targetNNeighbors = params.targetNNeighbors || this.targetNNeighbors;\n    };\n    UMAP.prototype.setPrecomputedKNN = function (knnIndices, knnDistances) {\n        this.knnIndices = knnIndices;\n        this.knnDistances = knnDistances;\n    };\n    UMAP.prototype.initializeFit = function (X) {\n        if (this.X === X && this.isInitialized) {\n            return this.getNEpochs();\n        }\n        this.X = X;\n        if (!this.knnIndices && !this.knnDistances) {\n            var knnResults = this.nearestNeighbors(X);\n            this.knnIndices = knnResults.knnIndices;\n            this.knnDistances = knnResults.knnDistances;\n        }\n        this.graph = this.fuzzySimplicialSet(X, this.nNeighbors, this.setOpMixRatio);\n        this.makeSearchFns();\n        this.searchGraph = this.makeSearchGraph(X);\n        this.processGraphForSupervisedProjection();\n        var _a = this.initializeSimplicialSetEmbedding(), head = _a.head, tail = _a.tail, epochsPerSample = _a.epochsPerSample;\n        this.optimizationState.head = head;\n        this.optimizationState.tail = tail;\n        this.optimizationState.epochsPerSample = epochsPerSample;\n        this.initializeOptimization();\n        this.prepareForOptimizationLoop();\n        this.isInitialized = true;\n        return this.getNEpochs();\n    };\n    UMAP.prototype.makeSearchFns = function () {\n        var _a = nnDescent.makeInitializations(this.distanceFn), initFromTree = _a.initFromTree, initFromRandom = _a.initFromRandom;\n        this.initFromTree = initFromTree;\n        this.initFromRandom = initFromRandom;\n        this.search = nnDescent.makeInitializedNNSearch(this.distanceFn);\n    };\n    UMAP.prototype.makeSearchGraph = function (X) {\n        var knnIndices = this.knnIndices;\n        var knnDistances = this.knnDistances;\n        var dims = [X.length, X.length];\n        var searchGraph = new matrix.SparseMatrix([], [], [], dims);\n        for (var i = 0; i < knnIndices.length; i++) {\n            var knn = knnIndices[i];\n            var distances = knnDistances[i];\n            for (var j = 0; j < knn.length; j++) {\n                var neighbor = knn[j];\n                var distance = distances[j];\n                if (distance > 0) {\n                    searchGraph.set(i, neighbor, distance);\n                }\n            }\n        }\n        var transpose = matrix.transpose(searchGraph);\n        return matrix.maximum(searchGraph, transpose);\n    };\n    UMAP.prototype.transform = function (toTransform) {\n        var _this = this;\n        var rawData = this.X;\n        if (rawData === undefined || rawData.length === 0) {\n            throw new Error('No data has been fit.');\n        }\n        var nNeighbors = Math.floor(this.nNeighbors * this.transformQueueSize);\n        var init = nnDescent.initializeSearch(this.rpForest, rawData, toTransform, nNeighbors, this.initFromRandom, this.initFromTree, this.random);\n        var result = this.search(rawData, this.searchGraph, init, toTransform);\n        var _a = heap.deheapSort(result), indices = _a.indices, distances = _a.weights;\n        indices = indices.map(function (x) { return x.slice(0, _this.nNeighbors); });\n        distances = distances.map(function (x) { return x.slice(0, _this.nNeighbors); });\n        var adjustedLocalConnectivity = Math.max(0, this.localConnectivity - 1);\n        var _b = this.smoothKNNDistance(distances, this.nNeighbors, adjustedLocalConnectivity), sigmas = _b.sigmas, rhos = _b.rhos;\n        var _c = this.computeMembershipStrengths(indices, distances, sigmas, rhos), rows = _c.rows, cols = _c.cols, vals = _c.vals;\n        var size = [toTransform.length, rawData.length];\n        var graph = new matrix.SparseMatrix(rows, cols, vals, size);\n        var normed = matrix.normalize(graph, \"l1\");\n        var csrMatrix = matrix.getCSR(normed);\n        var nPoints = toTransform.length;\n        var eIndices = utils.reshape2d(csrMatrix.indices, nPoints, this.nNeighbors);\n        var eWeights = utils.reshape2d(csrMatrix.values, nPoints, this.nNeighbors);\n        var embedding = initTransform(eIndices, eWeights, this.embedding);\n        var nEpochs = this.nEpochs\n            ? this.nEpochs / 3\n            : graph.nRows <= 10000\n                ? 100\n                : 30;\n        var graphMax = graph\n            .getValues()\n            .reduce(function (max, val) { return (val > max ? val : max); }, 0);\n        graph = graph.map(function (value) { return (value < graphMax / nEpochs ? 0 : value); });\n        graph = matrix.eliminateZeros(graph);\n        var epochsPerSample = this.makeEpochsPerSample(graph.getValues(), nEpochs);\n        var head = graph.getRows();\n        var tail = graph.getCols();\n        this.assignOptimizationStateParameters({\n            headEmbedding: embedding,\n            tailEmbedding: this.embedding,\n            head: head,\n            tail: tail,\n            currentEpoch: 0,\n            nEpochs: nEpochs,\n            nVertices: graph.getDims()[1],\n            epochsPerSample: epochsPerSample,\n        });\n        this.prepareForOptimizationLoop();\n        return this.optimizeLayout();\n    };\n    UMAP.prototype.processGraphForSupervisedProjection = function () {\n        var _a = this, Y = _a.Y, X = _a.X;\n        if (Y) {\n            if (Y.length !== X.length) {\n                throw new Error('Length of X and y must be equal');\n            }\n            if (this.targetMetric === \"categorical\") {\n                var lt = this.targetWeight < 1.0;\n                var farDist = lt ? 2.5 * (1.0 / (1.0 - this.targetWeight)) : 1.0e12;\n                this.graph = this.categoricalSimplicialSetIntersection(this.graph, Y, farDist);\n            }\n        }\n    };\n    UMAP.prototype.step = function () {\n        var currentEpoch = this.optimizationState.currentEpoch;\n        if (currentEpoch < this.getNEpochs()) {\n            this.optimizeLayoutStep(currentEpoch);\n        }\n        return this.optimizationState.currentEpoch;\n    };\n    UMAP.prototype.getEmbedding = function () {\n        return this.embedding;\n    };\n    UMAP.prototype.nearestNeighbors = function (X) {\n        var _a = this, distanceFn = _a.distanceFn, nNeighbors = _a.nNeighbors;\n        var log2 = function (n) { return Math.log(n) / Math.log(2); };\n        var metricNNDescent = nnDescent.makeNNDescent(distanceFn, this.random);\n        var round = function (n) {\n            return n === 0.5 ? 0 : Math.round(n);\n        };\n        var nTrees = 5 + Math.floor(round(Math.pow(X.length, 0.5) / 20.0));\n        var nIters = Math.max(5, Math.floor(Math.round(log2(X.length))));\n        this.rpForest = tree.makeForest(X, nNeighbors, nTrees, this.random);\n        var leafArray = tree.makeLeafArray(this.rpForest);\n        var _b = metricNNDescent(X, leafArray, nNeighbors, nIters), indices = _b.indices, weights = _b.weights;\n        return { knnIndices: indices, knnDistances: weights };\n    };\n    UMAP.prototype.fuzzySimplicialSet = function (X, nNeighbors, setOpMixRatio) {\n        if (setOpMixRatio === void 0) { setOpMixRatio = 1.0; }\n        var _a = this, _b = _a.knnIndices, knnIndices = _b === void 0 ? [] : _b, _c = _a.knnDistances, knnDistances = _c === void 0 ? [] : _c, localConnectivity = _a.localConnectivity;\n        var _d = this.smoothKNNDistance(knnDistances, nNeighbors, localConnectivity), sigmas = _d.sigmas, rhos = _d.rhos;\n        var _e = this.computeMembershipStrengths(knnIndices, knnDistances, sigmas, rhos), rows = _e.rows, cols = _e.cols, vals = _e.vals;\n        var size = [X.length, X.length];\n        var sparseMatrix = new matrix.SparseMatrix(rows, cols, vals, size);\n        var transpose = matrix.transpose(sparseMatrix);\n        var prodMatrix = matrix.pairwiseMultiply(sparseMatrix, transpose);\n        var a = matrix.subtract(matrix.add(sparseMatrix, transpose), prodMatrix);\n        var b = matrix.multiplyScalar(a, setOpMixRatio);\n        var c = matrix.multiplyScalar(prodMatrix, 1.0 - setOpMixRatio);\n        var result = matrix.add(b, c);\n        return result;\n    };\n    UMAP.prototype.categoricalSimplicialSetIntersection = function (simplicialSet, target, farDist, unknownDist) {\n        if (unknownDist === void 0) { unknownDist = 1.0; }\n        var intersection = fastIntersection(simplicialSet, target, unknownDist, farDist);\n        intersection = matrix.eliminateZeros(intersection);\n        return resetLocalConnectivity(intersection);\n    };\n    UMAP.prototype.smoothKNNDistance = function (distances, k, localConnectivity, nIter, bandwidth) {\n        if (localConnectivity === void 0) { localConnectivity = 1.0; }\n        if (nIter === void 0) { nIter = 64; }\n        if (bandwidth === void 0) { bandwidth = 1.0; }\n        var target = (Math.log(k) / Math.log(2)) * bandwidth;\n        var rho = utils.zeros(distances.length);\n        var result = utils.zeros(distances.length);\n        for (var i = 0; i < distances.length; i++) {\n            var lo = 0.0;\n            var hi = Infinity;\n            var mid = 1.0;\n            var ithDistances = distances[i];\n            var nonZeroDists = ithDistances.filter(function (d) { return d > 0.0; });\n            if (nonZeroDists.length >= localConnectivity) {\n                var index = Math.floor(localConnectivity);\n                var interpolation = localConnectivity - index;\n                if (index > 0) {\n                    rho[i] = nonZeroDists[index - 1];\n                    if (interpolation > SMOOTH_K_TOLERANCE) {\n                        rho[i] +=\n                            interpolation * (nonZeroDists[index] - nonZeroDists[index - 1]);\n                    }\n                }\n                else {\n                    rho[i] = interpolation * nonZeroDists[0];\n                }\n            }\n            else if (nonZeroDists.length > 0) {\n                rho[i] = utils.max(nonZeroDists);\n            }\n            for (var n = 0; n < nIter; n++) {\n                var psum = 0.0;\n                for (var j = 1; j < distances[i].length; j++) {\n                    var d = distances[i][j] - rho[i];\n                    if (d > 0) {\n                        psum += Math.exp(-(d / mid));\n                    }\n                    else {\n                        psum += 1.0;\n                    }\n                }\n                if (Math.abs(psum - target) < SMOOTH_K_TOLERANCE) {\n                    break;\n                }\n                if (psum > target) {\n                    hi = mid;\n                    mid = (lo + hi) / 2.0;\n                }\n                else {\n                    lo = mid;\n                    if (hi === Infinity) {\n                        mid *= 2;\n                    }\n                    else {\n                        mid = (lo + hi) / 2.0;\n                    }\n                }\n            }\n            result[i] = mid;\n            if (rho[i] > 0.0) {\n                var meanIthDistances = utils.mean(ithDistances);\n                if (result[i] < MIN_K_DIST_SCALE * meanIthDistances) {\n                    result[i] = MIN_K_DIST_SCALE * meanIthDistances;\n                }\n            }\n            else {\n                var meanDistances = utils.mean(distances.map(utils.mean));\n                if (result[i] < MIN_K_DIST_SCALE * meanDistances) {\n                    result[i] = MIN_K_DIST_SCALE * meanDistances;\n                }\n            }\n        }\n        return { sigmas: result, rhos: rho };\n    };\n    UMAP.prototype.computeMembershipStrengths = function (knnIndices, knnDistances, sigmas, rhos) {\n        var nSamples = knnIndices.length;\n        var nNeighbors = knnIndices[0].length;\n        var rows = utils.zeros(nSamples * nNeighbors);\n        var cols = utils.zeros(nSamples * nNeighbors);\n        var vals = utils.zeros(nSamples * nNeighbors);\n        for (var i = 0; i < nSamples; i++) {\n            for (var j = 0; j < nNeighbors; j++) {\n                var val = 0;\n                if (knnIndices[i][j] === -1) {\n                    continue;\n                }\n                if (knnIndices[i][j] === i) {\n                    val = 0.0;\n                }\n                else if (knnDistances[i][j] - rhos[i] <= 0.0) {\n                    val = 1.0;\n                }\n                else {\n                    val = Math.exp(-((knnDistances[i][j] - rhos[i]) / sigmas[i]));\n                }\n                rows[i * nNeighbors + j] = i;\n                cols[i * nNeighbors + j] = knnIndices[i][j];\n                vals[i * nNeighbors + j] = val;\n            }\n        }\n        return { rows: rows, cols: cols, vals: vals };\n    };\n    UMAP.prototype.initializeSimplicialSetEmbedding = function () {\n        var _this = this;\n        var nEpochs = this.getNEpochs();\n        var nComponents = this.nComponents;\n        var graphValues = this.graph.getValues();\n        var graphMax = 0;\n        for (var i = 0; i < graphValues.length; i++) {\n            var value = graphValues[i];\n            if (graphMax < graphValues[i]) {\n                graphMax = value;\n            }\n        }\n        var graph = this.graph.map(function (value) {\n            if (value < graphMax / nEpochs) {\n                return 0;\n            }\n            else {\n                return value;\n            }\n        });\n        this.embedding = utils.zeros(graph.nRows).map(function () {\n            return utils.zeros(nComponents).map(function () {\n                return utils.tauRand(_this.random) * 20 + -10;\n            });\n        });\n        var weights = [];\n        var head = [];\n        var tail = [];\n        for (var i = 0; i < graph.nRows; i++) {\n            for (var j = 0; j < graph.nCols; j++) {\n                var value = graph.get(i, j);\n                if (value) {\n                    weights.push(value);\n                    tail.push(i);\n                    head.push(j);\n                }\n            }\n        }\n        var epochsPerSample = this.makeEpochsPerSample(weights, nEpochs);\n        return { head: head, tail: tail, epochsPerSample: epochsPerSample };\n    };\n    UMAP.prototype.makeEpochsPerSample = function (weights, nEpochs) {\n        var result = utils.filled(weights.length, -1.0);\n        var max = utils.max(weights);\n        var nSamples = weights.map(function (w) { return (w / max) * nEpochs; });\n        nSamples.forEach(function (n, i) {\n            if (n > 0)\n                result[i] = nEpochs / nSamples[i];\n        });\n        return result;\n    };\n    UMAP.prototype.assignOptimizationStateParameters = function (state) {\n        Object.assign(this.optimizationState, state);\n    };\n    UMAP.prototype.prepareForOptimizationLoop = function () {\n        var _a = this, repulsionStrength = _a.repulsionStrength, learningRate = _a.learningRate, negativeSampleRate = _a.negativeSampleRate;\n        var _b = this.optimizationState, epochsPerSample = _b.epochsPerSample, headEmbedding = _b.headEmbedding, tailEmbedding = _b.tailEmbedding;\n        var dim = headEmbedding[0].length;\n        var moveOther = headEmbedding.length === tailEmbedding.length;\n        var epochsPerNegativeSample = epochsPerSample.map(function (e) { return e / negativeSampleRate; });\n        var epochOfNextNegativeSample = __spread(epochsPerNegativeSample);\n        var epochOfNextSample = __spread(epochsPerSample);\n        this.assignOptimizationStateParameters({\n            epochOfNextSample: epochOfNextSample,\n            epochOfNextNegativeSample: epochOfNextNegativeSample,\n            epochsPerNegativeSample: epochsPerNegativeSample,\n            moveOther: moveOther,\n            initialAlpha: learningRate,\n            alpha: learningRate,\n            gamma: repulsionStrength,\n            dim: dim,\n        });\n    };\n    UMAP.prototype.initializeOptimization = function () {\n        var headEmbedding = this.embedding;\n        var tailEmbedding = this.embedding;\n        var _a = this.optimizationState, head = _a.head, tail = _a.tail, epochsPerSample = _a.epochsPerSample;\n        var nEpochs = this.getNEpochs();\n        var nVertices = this.graph.nCols;\n        var _b = findABParams(this.spread, this.minDist), a = _b.a, b = _b.b;\n        this.assignOptimizationStateParameters({\n            headEmbedding: headEmbedding,\n            tailEmbedding: tailEmbedding,\n            head: head,\n            tail: tail,\n            epochsPerSample: epochsPerSample,\n            a: a,\n            b: b,\n            nEpochs: nEpochs,\n            nVertices: nVertices,\n        });\n    };\n    UMAP.prototype.optimizeLayoutStep = function (n) {\n        var optimizationState = this.optimizationState;\n        var head = optimizationState.head, tail = optimizationState.tail, headEmbedding = optimizationState.headEmbedding, tailEmbedding = optimizationState.tailEmbedding, epochsPerSample = optimizationState.epochsPerSample, epochOfNextSample = optimizationState.epochOfNextSample, epochOfNextNegativeSample = optimizationState.epochOfNextNegativeSample, epochsPerNegativeSample = optimizationState.epochsPerNegativeSample, moveOther = optimizationState.moveOther, initialAlpha = optimizationState.initialAlpha, alpha = optimizationState.alpha, gamma = optimizationState.gamma, a = optimizationState.a, b = optimizationState.b, dim = optimizationState.dim, nEpochs = optimizationState.nEpochs, nVertices = optimizationState.nVertices;\n        var clipValue = 4.0;\n        for (var i = 0; i < epochsPerSample.length; i++) {\n            if (epochOfNextSample[i] > n) {\n                continue;\n            }\n            var j = head[i];\n            var k = tail[i];\n            var current = headEmbedding[j];\n            var other = tailEmbedding[k];\n            var distSquared = rDist(current, other);\n            var gradCoeff = 0;\n            if (distSquared > 0) {\n                gradCoeff = -2.0 * a * b * Math.pow(distSquared, b - 1.0);\n                gradCoeff /= a * Math.pow(distSquared, b) + 1.0;\n            }\n            for (var d = 0; d < dim; d++) {\n                var gradD = clip(gradCoeff * (current[d] - other[d]), clipValue);\n                current[d] += gradD * alpha;\n                if (moveOther) {\n                    other[d] += -gradD * alpha;\n                }\n            }\n            epochOfNextSample[i] += epochsPerSample[i];\n            var nNegSamples = Math.floor((n - epochOfNextNegativeSample[i]) / epochsPerNegativeSample[i]);\n            for (var p = 0; p < nNegSamples; p++) {\n                var k_1 = utils.tauRandInt(nVertices, this.random);\n                var other_1 = tailEmbedding[k_1];\n                var distSquared_1 = rDist(current, other_1);\n                var gradCoeff_1 = 0.0;\n                if (distSquared_1 > 0.0) {\n                    gradCoeff_1 = 2.0 * gamma * b;\n                    gradCoeff_1 /=\n                        (0.001 + distSquared_1) * (a * Math.pow(distSquared_1, b) + 1);\n                }\n                else if (j === k_1) {\n                    continue;\n                }\n                for (var d = 0; d < dim; d++) {\n                    var gradD = 4.0;\n                    if (gradCoeff_1 > 0.0) {\n                        gradD = clip(gradCoeff_1 * (current[d] - other_1[d]), clipValue);\n                    }\n                    current[d] += gradD * alpha;\n                }\n            }\n            epochOfNextNegativeSample[i] += nNegSamples * epochsPerNegativeSample[i];\n        }\n        optimizationState.alpha = initialAlpha * (1.0 - n / nEpochs);\n        optimizationState.currentEpoch += 1;\n        return headEmbedding;\n    };\n    UMAP.prototype.optimizeLayoutAsync = function (epochCallback) {\n        var _this = this;\n        if (epochCallback === void 0) { epochCallback = function () { return true; }; }\n        return new Promise(function (resolve, reject) {\n            var step = function () { return __awaiter(_this, void 0, void 0, function () {\n                var _a, nEpochs, currentEpoch, epochCompleted, shouldStop, isFinished;\n                return __generator(this, function (_b) {\n                    try {\n                        _a = this.optimizationState, nEpochs = _a.nEpochs, currentEpoch = _a.currentEpoch;\n                        this.embedding = this.optimizeLayoutStep(currentEpoch);\n                        epochCompleted = this.optimizationState.currentEpoch;\n                        shouldStop = epochCallback(epochCompleted) === false;\n                        isFinished = epochCompleted === nEpochs;\n                        if (!shouldStop && !isFinished) {\n                            step();\n                        }\n                        else {\n                            return [2, resolve(isFinished)];\n                        }\n                    }\n                    catch (err) {\n                        reject(err);\n                    }\n                    return [2];\n                });\n            }); };\n            step();\n        });\n    };\n    UMAP.prototype.optimizeLayout = function (epochCallback) {\n        if (epochCallback === void 0) { epochCallback = function () { return true; }; }\n        var isFinished = false;\n        var embedding = [];\n        while (!isFinished) {\n            var _a = this.optimizationState, nEpochs = _a.nEpochs, currentEpoch = _a.currentEpoch;\n            embedding = this.optimizeLayoutStep(currentEpoch);\n            var epochCompleted = this.optimizationState.currentEpoch;\n            var shouldStop = epochCallback(epochCompleted) === false;\n            isFinished = epochCompleted === nEpochs || shouldStop;\n        }\n        return embedding;\n    };\n    UMAP.prototype.getNEpochs = function () {\n        var graph = this.graph;\n        if (this.nEpochs > 0) {\n            return this.nEpochs;\n        }\n        var length = graph.nRows;\n        if (length <= 2500) {\n            return 500;\n        }\n        else if (length <= 5000) {\n            return 400;\n        }\n        else if (length <= 7500) {\n            return 300;\n        }\n        else {\n            return 200;\n        }\n    };\n    return UMAP;\n}());\nexports.UMAP = UMAP;\nfunction euclidean(x, y) {\n    var result = 0;\n    for (var i = 0; i < x.length; i++) {\n        result += Math.pow((x[i] - y[i]), 2);\n    }\n    return Math.sqrt(result);\n}\nexports.euclidean = euclidean;\nfunction cosine(x, y) {\n    var result = 0.0;\n    var normX = 0.0;\n    var normY = 0.0;\n    for (var i = 0; i < x.length; i++) {\n        result += x[i] * y[i];\n        normX += Math.pow(x[i], 2);\n        normY += Math.pow(y[i], 2);\n    }\n    if (normX === 0 && normY === 0) {\n        return 0;\n    }\n    else if (normX === 0 || normY === 0) {\n        return 1.0;\n    }\n    else {\n        return 1.0 - result / Math.sqrt(normX * normY);\n    }\n}\nexports.cosine = cosine;\nvar OptimizationState = (function () {\n    function OptimizationState() {\n        this.currentEpoch = 0;\n        this.headEmbedding = [];\n        this.tailEmbedding = [];\n        this.head = [];\n        this.tail = [];\n        this.epochsPerSample = [];\n        this.epochOfNextSample = [];\n        this.epochOfNextNegativeSample = [];\n        this.epochsPerNegativeSample = [];\n        this.moveOther = true;\n        this.initialAlpha = 1.0;\n        this.alpha = 1.0;\n        this.gamma = 1.0;\n        this.a = 1.5769434603113077;\n        this.b = 0.8950608779109733;\n        this.dim = 2;\n        this.nEpochs = 500;\n        this.nVertices = 0;\n    }\n    return OptimizationState;\n}());\nfunction clip(x, clipValue) {\n    if (x > clipValue)\n        return clipValue;\n    else if (x < -clipValue)\n        return -clipValue;\n    else\n        return x;\n}\nfunction rDist(x, y) {\n    var result = 0.0;\n    for (var i = 0; i < x.length; i++) {\n        result += Math.pow(x[i] - y[i], 2);\n    }\n    return result;\n}\nfunction findABParams(spread, minDist) {\n    var curve = function (_a) {\n        var _b = __read(_a, 2), a = _b[0], b = _b[1];\n        return function (x) {\n            return 1.0 / (1.0 + a * Math.pow(x, (2 * b)));\n        };\n    };\n    var xv = utils\n        .linear(0, spread * 3, 300)\n        .map(function (val) { return (val < minDist ? 1.0 : val); });\n    var yv = utils.zeros(xv.length).map(function (val, index) {\n        var gte = xv[index] >= minDist;\n        return gte ? Math.exp(-(xv[index] - minDist) / spread) : val;\n    });\n    var initialValues = [0.5, 0.5];\n    var data = { x: xv, y: yv };\n    var options = {\n        damping: 1.5,\n        initialValues: initialValues,\n        gradientDifference: 10e-2,\n        maxIterations: 100,\n        errorTolerance: 10e-3,\n    };\n    var parameterValues = ml_levenberg_marquardt_1.default(data, curve, options).parameterValues;\n    var _a = __read(parameterValues, 2), a = _a[0], b = _a[1];\n    return { a: a, b: b };\n}\nexports.findABParams = findABParams;\nfunction fastIntersection(graph, target, unknownDist, farDist) {\n    if (unknownDist === void 0) { unknownDist = 1.0; }\n    if (farDist === void 0) { farDist = 5.0; }\n    return graph.map(function (value, row, col) {\n        if (target[row] === -1 || target[col] === -1) {\n            return value * Math.exp(-unknownDist);\n        }\n        else if (target[row] !== target[col]) {\n            return value * Math.exp(-farDist);\n        }\n        else {\n            return value;\n        }\n    });\n}\nexports.fastIntersection = fastIntersection;\nfunction resetLocalConnectivity(simplicialSet) {\n    simplicialSet = matrix.normalize(simplicialSet, \"max\");\n    var transpose = matrix.transpose(simplicialSet);\n    var prodMatrix = matrix.pairwiseMultiply(transpose, simplicialSet);\n    simplicialSet = matrix.add(simplicialSet, matrix.subtract(transpose, prodMatrix));\n    return matrix.eliminateZeros(simplicialSet);\n}\nexports.resetLocalConnectivity = resetLocalConnectivity;\nfunction initTransform(indices, weights, embedding) {\n    var result = utils\n        .zeros(indices.length)\n        .map(function (z) { return utils.zeros(embedding[0].length); });\n    for (var i = 0; i < indices.length; i++) {\n        for (var j = 0; j < indices[0].length; j++) {\n            for (var d = 0; d < embedding[0].length; d++) {\n                var a = indices[i][j];\n                result[i][d] += weights[i][j] * embedding[a][d];\n            }\n        }\n    }\n    return result;\n}\nexports.initTransform = initTransform;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar umap_1 = require(\"./umap\");\nexports.UMAP = umap_1.UMAP;\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount } from \"svelte\";\n  import { loadData } from \"../js/load-data\";\n  import demos from \"../../toy_comparison_visualization/js/demos\";\n  import {\n    visualize,\n    getPoints,\n    getDemoPreviewOverride\n  } from \"../../../shared/js/visualize\";\n  import Preview from \"./Preview.svelte\";\n  import { UMAP } from \"umap-js\";\n\n  let isLoaded = false;\n  let preprocessedDemos;\n  let selectedDemoIndex = 0;\n  let points = [];\n  let selectedDemo = demos[selectedDemoIndex];\n  let hoveredPointIndex = -1;\n  let demoPoints = getPoints(selectedDemo);\n  let entries;\n\n  const nNeighborsOptions = [5, 15, 30, 50, 100];\n  const minDistOptions = [0, 0.01, 0.05, 0.1, 0.5, 1.0];\n\n  let N_PER_ROW = 6;\n\n  function matchResponsive(x) {\n    if (x.matches) {\n      N_PER_ROW = 8;\n    } else {\n      N_PER_ROW = 6;\n    }\n  }\n\n  const mediaQuery = window.matchMedia(\"(max-width: 800px)\");\n  matchResponsive(mediaQuery);\n  mediaQuery.addListener(matchResponsive);\n\n  const projections = [];\n\n  let canvas;\n\n  const width = 1024;\n  const height = 1024;\n\n  const makeBlankEntries = () =>\n    nNeighborsOptions.map(() =>\n      minDistOptions.map(() => [{ coords: [0, 0], color: \"red\" }])\n    );\n\n  const setSelectedDemo = i => {\n    selectedDemoIndex = i;\n    selectedDemo = demos[selectedDemoIndex];\n    demoPoints = getPoints(selectedDemo);\n\n    const nextEntries = makeBlankEntries();\n    const preprocessed = preprocessedDemos[selectedDemoIndex];\n\n    for (let key in preprocessed) {\n      const nNeighbors = key.replace(\"nNeighbors=\", \"\").split(\",\")[0] * 1;\n      const minDist = key.replace(\"minDist=\", \"\").split(\",\")[1] * 1;\n      const row = nNeighborsOptions.indexOf(nNeighbors);\n      const col = minDistOptions.indexOf(minDist);\n      const entry = preprocessed[key];\n      nextEntries[row][col] = entry.map(([x, y], i) => {\n        return {\n          coords: [x, y],\n          color: demoPoints[i].color\n        };\n      });\n    }\n    entries = nextEntries;\n  };\n\n  const groupDemos = groupSize => {\n    const groups = [];\n    const nGroups = Math.ceil(demos.length / groupSize);\n    const split = Math.floor(demos.length / nGroups);\n    for (let i = 0; i < nGroups; i++) {\n      groups.push(demos.slice(split * i, split * (i + 1)));\n    }\n    return groups;\n  };\n\n  const handlePreviewClick = i => () => {\n    setSelectedDemo(i);\n  };\n\n  onMount(async () => {\n    preprocessedDemos = await loadData();\n    setSelectedDemo(0);\n    isLoaded = true;\n  });\n</script>\n\n<style>\n  .container {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n  }\n\n  .demos {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .figures-container {\n    display: flex;\n    font-size: 12px;\n    width: 60%;\n    margin-right: 4px;\n  }\n\n  .left-column {\n    width: 40px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n  }\n\n  .left-column-spacer {\n    height: 40px;\n  }\n\n  .left-column-content {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    height: 100%;\n  }\n\n  .left-column-header {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: center;\n    height: 100%;\n    width: 30px;\n  }\n\n  .n-neighbors-header {\n    writing-mode: vertical-lr;\n    text-orientation: sideways;\n    transform: rotate(180deg);\n    font-weight: 800;\n  }\n\n  .left-column-labels {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: flex-end;\n    height: 100%;\n  }\n\n  .rows-container {\n    /* padding: 40px 0 0 40px; */\n    position: relative;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .min-dist-labels {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-end;\n    justify-content: space-around;\n  }\n\n  .min-dist-header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-around;\n    height: 30px;\n    font-weight: 800;\n  }\n\n  .menu {\n    display: flex;\n    flex-direction: column;\n    width: 40%;\n  }\n\n  .demo-description {\n    padding: 4px;\n  }\n\n  .demo-text {\n    margin-top: 8px;\n    margin-bottom: 16px;\n  }\n\n  .demo-select {\n    display: flex;\n    flex-direction: column;\n    margin-top: 44px;\n  }\n\n  .demo-parameter-name {\n    font-weight: 600;\n  }\n\n  .rows {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .figures-container {\n      width: 90%;\n    }\n\n    .container {\n      flex-direction: column;\n    }\n\n    .menu {\n      width: 100%;\n    }\n\n    .demo-select {\n      margin-top: 20px;\n    }\n  }\n</style>\n\n<div class=\"container\">\n  {#if isLoaded}\n    <div class=\"figures-container\">\n      <div class=\"left-column\">\n        <div class=\"left-column-spacer\" />\n        <div class=\"left-column-content\">\n          <div class=\"left-column-header\">\n            <div class=\"n-neighbors-header\">n_neighbors</div>\n          </div>\n          <div class=\"left-column-labels\">\n            {#each nNeighborsOptions as nNeighbors}\n              <div>{nNeighbors}</div>\n            {/each}\n          </div>\n        </div>\n      </div>\n      <div class=\"right-column\">\n        <div class=\"rows-container\">\n          <div class=\"min-dist-header\">min_dist</div>\n          <div class=\"min-dist-labels\">\n            {#each minDistOptions as minDist}\n              <div>{minDist}</div>\n            {/each}\n          </div>\n          <div class=\"rows\">\n            {#each entries as row, rowIndex}\n              <div class=\"row\">\n                {#each row as points}\n                  <Preview\n                    {points}\n                    on:hover={e => (hoveredPointIndex = e.detail)}\n                    {hoveredPointIndex}\n                    onClick={() => {}}\n                    highlighted={true}\n                    selectable={false}\n                    selected={false} />\n                {/each}\n              </div>\n            {/each}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"menu\">\n      <div class=\"demo-select\">\n        {#each groupDemos(N_PER_ROW) as group, groupIndex}\n          <div class=\"demos\">\n            {#each group as demo, i}\n              <Preview\n                points={demo.previewOverride ? getDemoPreviewOverride(demo) : getPoints(demo)}\n                onClick={handlePreviewClick(groupIndex * N_PER_ROW + i)}\n                selected={groupIndex * N_PER_ROW + i === selectedDemoIndex} />\n            {/each}\n          </div>\n        {/each}\n      </div>\n      <div class=\"demo-description\">\n        <div class=\"demo-text\">{selectedDemo.description}</div>\n        {#each selectedDemo.options as option}\n          <div class=\"demo-parameters\">\n            <span class=\"demo-parameter-name\">{option.name}:</span>\n            <span>{option.start}</span>\n          </div>\n        {/each}\n      </div>\n    </div>\n  {:else}\n    <div>Loading...</div>\n  {/if}\n</div>\n","  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n  \nimport { decode, fromString } from \"../../../shared/js/parse-binary\";\nimport { N_BITS_MAMMOTH } from \"../../../shared/js/parameters\";\n\nfunction parseProjections(encodedProjections) {\n  const parsedProjections = {};\n  Object.keys(encodedProjections).forEach(key => {\n    const encoded = encodedProjections[key];\n    const byteArray = fromString(atob(encoded));\n    const decoded = decode(byteArray, 20000, N_BITS_MAMMOTH);\n    const unzipped = [];\n    for (let i = 0; i < decoded.length; i += 2) {\n      unzipped.push([decoded[i], decoded[i + 1]]);\n    }\n    parsedProjections[key] = unzipped;\n  });\n  return parsedProjections;\n}\n\nlet tsneData = null;\nlet tsnePromise = null;\n\nasync function _loadTSNE() {\n  const res = await fetch(`mammoth_tsne_encoded.json`);\n  const json = await res.json();\n\n  tsneData = parseProjections(json);\n  return tsneData;\n}\n\nexport async function loadTSNE() {\n  if (tsneData) return tsneData;\n  if (!tsnePromise) tsnePromise = _loadTSNE();\n  return tsnePromise;\n}\n\nlet umapData = null;\nlet umapPromise = null;\n\nasync function _loadUmap() {\n  const res = await fetch(`mammoth_10k_encoded.json`);\n  const mammoth = await res.json();\n\n  const parsedProjections = parseProjections(mammoth.projections);\n  mammoth.projections = parsedProjections;\n  umapData = mammoth;\n  return umapData;\n}\n\nexport async function loadUmap() {\n  if (umapData) return umapData;\n  if (!umapPromise) umapPromise = _loadUmap();\n  return umapPromise;\n}\n\nlet mammoth3dData = null;\nlet mammoth3dPromise = null;\n\nasync function _loadMammoth3D() {\n  const res = await fetch(`mammoth_3d.json`);\n  const mammoth3d = await res.json();\n  mammoth3dData = mammoth3d;\n  return mammoth3d;\n}\n\nexport async function loadMammoth3D() {\n  if (mammoth3dData) return mammoth3dData;\n  if (!mammoth3dPromise) mammoth3dPromise = _loadMammoth3D();\n  return mammoth3dPromise;\n}\n\nlet colorIndices = null;\nlet colorIndicesPromise = null;\n\nasync function _loadColorIndices() {\n  const umap = await loadUmap();\n  const colorOffsets = umap.labelOffsets;\n\n  colorIndices = new Uint8Array(10000);\n  let colorIndex = -1;\n  let nColorPoints = 0;\n  for (let i = 0; i < colorIndices.length; i++) {\n    if (i >= nColorPoints) {\n      colorIndex += 1;\n      nColorPoints += colorOffsets[colorIndex];\n    }\n    colorIndices[i] = colorIndex;\n  }\n\n  return colorIndices;\n}\n\nexport async function loadColorIndices() {\n  if (colorIndices) return colorIndices;\n  if (!colorIndicesPromise) colorIndicesPromise = _loadColorIndices();\n  return colorIndicesPromise;\n}\n\nexport async function loadData() {\n  const output = {};\n  await Promise.all([\n    loadUmap().then(res => (output.projections = res.projections)),\n    loadColorIndices().then(res => (output.colorIndices = res)),\n    loadMammoth3D().then(res => (output.mammoth3d = res))\n  ]);\n\n  return output;\n}\n","  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n  \nexport const COLORS = [\n  \"rgba(204, 0, 17, 1)\",\n  \"rgba(0, 34, 68, 1)\",\n  \"rgba(221, 221, 51, 1)\",\n  \"rgba(0, 68, 136, 1)\",\n  \"rgba(0, 51, 17, 1)\",\n  \"rgba(17, 170, 170, 1)\",\n  \"rgba(46, 102, 151, 1)\",\n  \"rgba(155, 32, 6, 1)\",\n  \"rgba(204, 0, 17, 1)\",\n  \"rgba(17, 170, 170, 1)\",\n  \"rgba(17, 170, 170, 1)\"\n];\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nconst easeInOutQuad = t => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t);\nconst TWEEN_DURATION = 500;\n\nconst deepCopy2D = vector => vector.map(([x, y]) => [x, y]);\n\nexport class Tween {\n  constructor(\n    current,\n    callback,\n    easingFn = easeInOutQuad,\n    tweenDuration = TWEEN_DURATION\n  ) {\n    // Deep copy of the 2D coordinates\n    this.current = deepCopy2D(current);\n    this.end = deepCopy2D(current);\n    this.callback = callback;\n    this.easingFn = easingFn;\n    this.tweenDuration = tweenDuration;\n    this.isActive = false;\n    this.percent = 1;\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\n  }\n\n  beginTween(next) {\n    this.start = deepCopy2D(this.current);\n    this.end = deepCopy2D(next);\n    this.isActive = true;\n\n    this.startTime = Date.now();\n    requestAnimationFrame(this.onAnimationFrame);\n  }\n\n  applyTween() {\n    this.current = this.current.map((_, i) => {\n      const [startX, startY] = this.start[i];\n      const [endX, endY] = this.end[i];\n      const x = (endX - startX) * this.percent + startX;\n      const y = (endY - startY) * this.percent + startY;\n      return [x, y];\n    });\n  }\n\n  onAnimationFrame() {\n    const timeElapsed = Date.now() - this.startTime;\n    const percentTime = Math.min(1, timeElapsed / this.tweenDuration);\n\n    this.percent = this.easingFn(percentTime);\n    if (this.percent === 1) this.isActive = false;\n\n    this.applyTween();\n    this.callback(this.current, this.isActive, this.percent);\n\n    if (this.isActive) {\n      requestAnimationFrame(this.onAnimationFrame);\n    }\n  }\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount, createEventDispatcher } from \"svelte\";\n  import Slider from \"../../../shared/components/Slider.svelte\";\n  import { COLORS } from \"../js/colors\";\n  import { loadData } from \"../js/load-data\";\n  import { Tween } from \"../js/tween\";\n  import { render2d } from \"../js/render\";\n\n  const dispatch = createEventDispatcher();\n\n  let canvas;\n  let svg;\n  let tween;\n\n  export let colorIndices;\n  export let projection;\n  export let hoveredPointIndex = -1;\n  export let size = 1024;\n\n  function handleMousemove() {\n    var scale = size / canvas.offsetWidth;\n    var mx = event.layerX * scale;\n    var my = event.layerY * scale;\n\n    if (!colorIndices && colorIndices.length) return;\n\n    var minDist = Infinity;\n    var minIndex = 0;\n    projection.forEach((d, i) => {\n      var dx = d[0] - mx;\n      var dy = d[1] - my;\n\n      var dist = dx * dx + dy * dy;\n      if (dist < minDist) {\n        minDist = dist;\n        minIndex = i;\n      }\n    });\n\n    dispatch(\"hover\", minIndex);\n  }\n\n  function handleMouseout() {\n    dispatch(\"hover\", -1);\n  }\n\n  const tweenCallback = (projection, isActive, percent) => {\n    const dimensions = { width: size, height: size };\n    render2d(canvas, dimensions, projection, colorIndices);\n  };\n\n  onMount(() => {\n    tween = new Tween(projection, tweenCallback);\n  });\n\n  // Skip rerender if projection hasn't changed\n  // Not sure if there's a more svelte way of doing this\n  let lastProjection = null;\n  afterUpdate(() => {\n    if (projection == lastProjection) return;\n    lastProjection = projection;\n    tween.beginTween(projection);\n  });\n</script>\n\n<style>\n  canvas {\n    background-color: #fff;\n    width: 100%;\n    margin-bottom: 20px;\n  }\n\n  svg {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n  }\n\n  .container {\n    width: 100%;\n    position: relative;\n  }\n</style>\n\n<div class=\"container\">\n  <canvas\n    bind:this={canvas}\n    width={size}\n    height={size}\n    on:mousemove={handleMousemove}\n    on:mouseout={handleMouseout} />\n\n  <svg bind:this={svg} viewBox=\"0 0 {size} {size}\">\n    <text>{projection[hoveredPointIndex]}</text>\n    {#if projection[hoveredPointIndex] && projection[hoveredPointIndex][0]}\n      <circle\n        r=\"10\"\n        fill=\"none\"\n        stroke=\"#000\"\n        stroke-width=\"3\"\n        opacity={hoveredPointIndex > -1 ? 1 : 0}\n        cx={projection[hoveredPointIndex][0]}\n        cy={projection[hoveredPointIndex][1]} />\n    {/if}\n  </svg>\n</div>\n","  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n  \nimport { COLORS } from \"../js/colors\";\n\nexport function render2d(canvas, dimensions, points, colorIndices) {\n  const { width, height } = dimensions;\n  const ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, width, height);\n\n  for (let i = 0; i < points.length; i++) {\n    const point = points[i];\n    const [x, y] = point;\n    const colorIndex = colorIndices[i];\n\n    ctx.fillStyle = COLORS[colorIndex];\n    ctx.fillRect(x, y, 3, 3);\n  }\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount } from \"svelte\";\n  import Slider from \"../../../shared/components/Slider.svelte\";\n  import Projection2d from \"./Projection2d.svelte\";\n\n  let sliderWidth = 230;\n  function matchResponsive(x) {\n    if (x.matches) {\n      sliderWidth = 100;\n    } else {\n      sliderWidth = 230;\n    }\n  }\n\n  const mediaQuery = window.matchMedia(\"(max-width: 800px)\");\n  matchResponsive(mediaQuery);\n  mediaQuery.addListener(matchResponsive);\n\n  const neighbors = [3, 5, 10, 15, 20, 50, 100, 200];\n  const dists = [\"0.0\", \"0.1\", \"0.25\", \"0.5\", \"0.8\", \"0.99\"];\n\n  let canvas;\n  let nNeighborsIndex = 3;\n  let nNeighbors = neighbors[nNeighborsIndex];\n  let distsIndex = 1;\n  let minDist = dists[distsIndex];\n\n  export let colorIndices;\n  export let projections;\n  export let title = \"\";\n  export let times = null;\n  export let hoveredPointIndex = -1;\n\n  const getKey = () => `n=${nNeighbors},d=${minDist}`;\n  const getCurrentProjection = () => {\n    if (!projections) return null;\n    return projections[getKey()];\n  };\n\n  let projection = getCurrentProjection();\n\n  afterUpdate(() => {\n    nNeighbors = neighbors[nNeighborsIndex];\n    minDist = dists[distsIndex];\n    projection = getCurrentProjection();\n    console.log(\"Umap2d afterUpdate - projection:\", projection ? projection.length : \"null\");\n  });\n\n  onMount(() => {\n    console.log(\"Umap2d onMount - colorIndices:\", colorIndices ? colorIndices.length : \"null\");\n    console.log(\"Umap2d onMount - projections:\", projections ? Object.keys(projections) : \"null\");\n  });\n</script>\n\n<style>\n  .container {\n    width: 50%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      width: 95%;\n      max-width: 500px;\n      margin: 0 auto 20px auto;\n    }\n  }\n\n  .controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 6px;\n  }\n\n  .title {\n    text-align: center;\n    width: 100%;\n    font-weight: bold;\n    margin-top: 10px;\n    margin-bottom: 30px;\n    font-size: 1.1rem;\n    color: #333;\n  }\n\n  label {\n    margin-right: 10px;\n    width: 150px;\n  }\n\n  .label-text {\n    font-weight: 600;\n  }\n</style>\n\n<div class=\"container\">\n  {#if title}\n    <div class=\"title\">{title}</div>\n  {/if}\n  <Projection2d on:hover {projection} {colorIndices} {hoveredPointIndex} />\n  <div class=\"controls\">\n    <label class=\"label\">\n      <span class=\"label-text\">n_neighbors:</span>\n      {nNeighbors}\n    </label>\n    <div style=\"width: {sliderWidth}px\">\n      <Slider\n        min={0}\n        max={neighbors.length - 1}\n        step={1}\n        bind:value={nNeighborsIndex} />\n    </div>\n  </div>\n  <div class=\"controls\">\n    <label class=\"label\">\n      <span class=\"label-text\">min_dist:</span>\n      {minDist}\n    </label>\n    <div style=\"width: {sliderWidth}px\">\n      <Slider min={0} max={dists.length - 1} step={1} bind:value={distsIndex} />\n    </div>\n  </div>\n  {#if times}\n    <div class=\"controls\">\n      <label class=\"label\">\n        <span class=\"label-text\">time:</span>\n        {times[nNeighborsIndex].t}\n      </label>\n      <div style=\"width: {sliderWidth}px\" />\n    </div>\n  {/if}\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { onMount, afterUpdate, createEventDispatcher } from \"svelte\";\n  import { loadData } from \"../js/load-data\";\n  import { COLORS } from \"../js/colors\";\n\n  const dispatch = createEventDispatcher();\n\n  let container;\n  let scatterGL;\n  let isOrbiting = true;\n\n  export let colorIndices;\n  export let model3d;\n  export let title = \"\";\n  export let hoveredPointIndex = -1;\n\n  function handleMouseout() {\n    dispatch(\"hover\", -1);\n  }\n\n  const toggleOrbit = () => {\n    isOrbiting = true;\n    scatterGL.startOrbitAnimation();\n  };\n\n  onMount(async () => {\n    console.log(\"Projection3d onMount - model3d:\", model3d ? model3d.length : \"null\");\n    console.log(\"Projection3d onMount - colorIndices:\", colorIndices ? colorIndices.length : \"null\");\n    \n    if (!model3d || !colorIndices) {\n      console.error(\"Projection3d: Missing required data\", { model3d: !!model3d, colorIndices: !!colorIndices });\n      return;\n    }\n    \n    const dataset = {\n      dimensions: 3,\n      points: model3d,\n      metadata: []\n    };\n\n    const onCameraMove = () => {\n      if (isOrbiting) isOrbiting = false;\n    };\n\n    const styles = {\n      fog: { enabled: false },\n      point: { scaleHover: 3.5, colorHover: \"rgba(0,0,0,1)\" }\n    };\n\n    scatterGL = new ScatterGL(container, {\n      styles,\n      selectEnabled: false,\n      onCameraMove,\n      onHover: d => {\n        if (d === null || d === hoveredPointIndex) return;\n        dispatch(\"hover\", d);\n      }\n    });\n    window.scatterGLObj = scatterGL;\n\n    scatterGL.setPointColorer(i => {\n      const colorIndex = colorIndices[i];\n      return COLORS[colorIndex];\n    });\n    scatterGL.render(dataset);\n  });\n\n  afterUpdate(() => {\n    // debugger\n    scatterGL.setHoverPointIndex(hoveredPointIndex);\n  });\n</script>\n\n<style>\n  .container {\n    width: 50%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n    position: relative;\n  }\n\n  .scatter-gl-container {\n    width: 100%;\n    min-height: 500px;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      width: 95%;\n      max-width: 500px;\n      margin: 0 auto 20px auto;\n    }\n\n    .scatter-gl-container {\n      min-height: 300px;\n    }\n  }\n\n  .title {\n    text-align: center;\n    width: 100%;\n    font-weight: bold;\n    margin-top: 10px;\n    margin-bottom: 30px;\n    font-size: 1.1rem;\n    color: #333;\n  }\n\n  .orbit {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    cursor: pointer;\n  }\n  .orbit:hover {\n    color: #333;\n  }\n</style>\n\n<div class=\"container\" on:mouseout={handleMouseout}>\n  {#if title}\n    <div class=\"title\">{title}</div>\n  {/if}\n  <div class=\"scatter-gl-container\" bind:this={container} />\n  {#if !isOrbiting}\n    <div class=\"orbit\" on:click={toggleOrbit}>\n      <i class=\"material-icons\">3d_rotation</i>\n    </div>\n  {/if}\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { onMount } from \"svelte\";\n  import { loadData } from \"../js/load-data\";\n  import Umap2d from \"./Umap2d.svelte\";\n  import Projection3d from \"./Projection3d.svelte\";\n\n  let isLoaded = false;\n  let colorIndices;\n  let projections;\n  let mammoth3d;\n  let hoveredPointIndex = -1;\n\n  onMount(async () => {\n    const data = await loadData();\n    isLoaded = true;\n    colorIndices = data.colorIndices;\n    projections = data.projections;\n    mammoth3d = data.mammoth3d;\n  });\n</script>\n\n<style>\n  .container {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      flex-direction: column;\n    }\n  }\n</style>\n\n<div class=\"container\">\n  {#if isLoaded}\n    <Projection3d\n      {colorIndices}\n      {mammoth3d}\n      on:hover={e => (hoveredPointIndex = e.detail)}\n      {hoveredPointIndex}\n      title={'Original 3D Data'} />\n    <Umap2d\n      {colorIndices}\n      {projections}\n      on:hover={e => (hoveredPointIndex = e.detail)}\n      {hoveredPointIndex}\n      title={'2D UMAP Projection'} />\n  {:else}\n    <p>loading...</p>\n  {/if}\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount } from \"svelte\";\n  import Slider from \"../../../shared/components/Slider.svelte\";\n  import { TSNE_MAMMOTH_PERPLEXITIES } from \"../../../shared/js/parameters\";\n  import Projection2d from \"./Projection2d.svelte\";\n\n  let sliderWidth = 230;\n  function matchResponsive(x) {\n    if (x.matches) {\n      sliderWidth = 100;\n    } else {\n      sliderWidth = 230;\n    }\n  }\n\n  const mediaQuery = window.matchMedia(\"(max-width: 800px)\");\n  matchResponsive(mediaQuery);\n  mediaQuery.addListener(matchResponsive);\n\n  // prettier-ignore\n  const perplexities = [...TSNE_MAMMOTH_PERPLEXITIES];\n\n  let canvas;\n  let perplexityIndex = 4;\n  let perplexity = perplexities[perplexityIndex];\n\n  export let colorIndices;\n  export let projections;\n  export let title = \"\";\n  export let times = null;\n  export let hoveredPointIndex = -1;\n\n  const getKey = () => `p=${perplexity}`;\n  const getCurrentProjection = () => projections[getKey()];\n\n  let projection = getCurrentProjection();\n\n  afterUpdate(() => {\n    perplexity = perplexities[perplexityIndex];\n    projection = getCurrentProjection();\n  });\n</script>\n\n<style>\n  .container {\n    width: 50%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    box-sizing: border-box;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      width: 100%;\n      margin-bottom: 10px;\n    }\n  }\n\n  .controls {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    margin-top: 6px;\n  }\n\n  .title {\n    text-align: center;\n    width: 100%;\n    font-weight: bold;\n    margin-bottom: 20px;\n  }\n\n  label {\n    margin-right: 10px;\n    width: 150px;\n  }\n\n  .label-text {\n    font-weight: 600;\n  }\n</style>\n\n<div class=\"container\">\n  {#if title}\n    <div class=\"title\">{title}</div>\n  {/if}\n  <Projection2d on:hover {projection} {colorIndices} {hoveredPointIndex} />\n  <div class=\"controls\">\n    <label class=\"label\">\n      <span class=\"label-text\">perplexity:</span>\n      {perplexity}\n    </label>\n    <div style=\"width: {sliderWidth}px\">\n      <Slider\n        min={0}\n        max={perplexities.length - 1}\n        step={1}\n        bind:value={perplexityIndex} />\n    </div>\n  </div>\n  {#if times}\n    <div class=\"controls\">\n      <label class=\"label\">\n        <span class=\"label-text\">time:</span>\n        {times[perplexityIndex].t}\n      </label>\n      <div style=\"width: {sliderWidth}px\" />\n    </div>\n  {/if}\n</div>\n","  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n  \nexport const times = {\n  umap: [\n    { n: 3, t: \"25s\" },\n    { n: 5, t: \"34s\" },\n    { n: 10, t: \"51s\" },\n    { n: 15, t: \"1m 2s\" },\n    { n: 20, t: \"1m 11s\" },\n    { n: 50, t: \"1m 56s\" },\n    { n: 100, t: \"2m 30s\" },\n    { n: 200, t: \"3m 22s\" }\n  ],\n  tsne: [\n    { p: 5, t: \"9m 18s\" },\n    { p: 15, t: \"10m 7s\" },\n    { p: 30, t: \"11m 5s\" },\n    { p: 50, t: \"12m 42s\" },\n    { p: 100, t: \"16m 1s\" },\n    { p: 200, t: \"22m 16s\" },\n    { p: 500, t: \"42m 24s\" },\n    { p: 1000, t: \"1h 16m\" },\n    { p: 200, t: \"2h 5m\", fake: true }\n  ]\n};\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { onMount } from \"svelte\";\n  import { loadData, loadTSNE } from \"../js/load-data\";\n  import Tsne2d from \"./Tsne2d.svelte\";\n  import Umap2d from \"./Umap2d.svelte\";\n  import Projection3d from \"./Projection3d.svelte\";\n  import { times } from \"../js/times\";\n\n  let isLoaded = false;\n  let colorIndices;\n  let umapProjections;\n  let tsneProjections;\n  let mammoth3d;\n  let hoveredPointIndex = -1;\n\n  onMount(async () => {\n    const data = await loadData();\n    tsneProjections = await loadTSNE();\n    isLoaded = true;\n    colorIndices = data.colorIndices;\n    umapProjections = data.projections;\n    mammoth3d = data.mammoth3d;\n  });\n</script>\n\n<style>\n  .container {\n    display: flex;\n    flex-direction: row;\n    width: 100%;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .container {\n      flex-direction: column;\n    }\n  }\n</style>\n\n<div class=\"container\">\n  {#if isLoaded}\n    <Tsne2d\n      {colorIndices}\n      on:hover={e => (hoveredPointIndex = e.detail)}\n      {hoveredPointIndex}\n      projections={tsneProjections}\n      title={'2D t-SNE projection'}\n      times={times.tsne} />\n    <Umap2d\n      {colorIndices}\n      on:hover={e => (hoveredPointIndex = e.detail)}\n      {hoveredPointIndex}\n      projections={umapProjections}\n      title={'2D UMAP projection'}\n      times={times.umap} />\n  {:else}\n    <p>loading...</p>\n  {/if}\n</div>\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport { visualize } from \"./visualize\";\nimport { UMAP } from \"umap-js\";\nimport { Point } from \"./generators\";\n\nexport const N_EPOCHS = 400;\n\nconst timescale = d3\n  .scaleLinear()\n  .domain([0, 20, 50, 100, 200, 6000])\n  .range([60, 30, 20, 10, 0]);\n\nexport function runDemo(points, canvas, options, stepCb) {\n  const demo = {};\n  let paused = false;\n  let step = 0;\n  let chunk = 5;\n  let frameId;\n\n  // const tsne = new tsnejs.tSNE(options);\n  const data = points.map(point => point.coords);\n  const umap = new UMAP({\n    nEpochs: N_EPOCHS,\n    ...options\n  });\n  umap.initializeFit(data);\n\n  // const dists = distanceMatrix(points);\n  // tsne.initDataDist(dists);\n\n  function iterate() {\n    if (paused) return;\n\n    // control speed at which we iterate\n    // if (step = 200) chunk = 10;\n    for (let k = 0; k < chunk; k++) {\n      umap.step();\n      ++step;\n    }\n\n    //inform the caller about the current step\n    stepCb(step);\n\n    // update the solution and render\n    // const solution = tsne.getSolution().map(function(coords, i) {\n    //   return new Point(coords, points[i].color);\n    // });\n    const solution = umap.getEmbedding().map((coords, i) => {\n      return new Point(coords, points[i].color);\n    });\n    visualize(solution, canvas, \"\"); //removed message\n\n    //control the loop.\n    const timeout = timescale(step);\n    setTimeout(function() {\n      frameId = window.requestAnimationFrame(iterate);\n    }, timeout);\n  }\n\n  demo.pause = function() {\n    if (paused) return; // already paused\n    paused = true;\n    window.cancelAnimationFrame(frameId);\n  };\n  demo.unpause = function() {\n    if (!paused) return; // already unpaused\n    paused = false;\n    iterate();\n  };\n  demo.paused = function() {\n    return paused;\n  };\n  demo.destroy = function() {\n    demo.pause();\n  };\n  iterate();\n  return demo;\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { onMount } from \"svelte\";\n  import {\n    getPoints,\n    getDemoPreviewOverride,\n    visualize\n  } from \"../../../shared/js/visualize\";\n\n  export let demo;\n  export let onClick;\n  export let selected;\n\n  let canvas;\n\n  const points = demo.previewOverride\n    ? getDemoPreviewOverride(demo)\n    : getPoints(demo);\n\n  onMount(() => {\n    visualize(points, canvas, null, null);\n  });\n</script>\n\n<style>\n  .demo-data {\n    cursor: pointer;\n    position: relative;\n    font-size: 10px;\n    line-height: 1.2em;\n    box-sizing: border-box;\n    float: left;\n    margin: 2px;\n    padding: 4px;\n    width: calc(33% - 4px);\n    background: white;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.08);\n  }\n\n  @media (min-width: 480px) {\n    .demo-data {\n      width: calc(25% - 8px);\n      padding: 8px;\n      margin: 4px;\n    }\n  }\n  @media (min-width: 768px) {\n    .demo-data {\n      width: calc(16.5% - 8px);\n      padding: 8px;\n      margin: 4px;\n    }\n  }\n  .demo-data:hover {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n  }\n  .demo-data.selected::after {\n    content: \"\";\n    border: 2px solid rgba(70, 130, 180, 0.8);\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    box-sizing: border-box;\n    border-radius: 4px;\n  }\n  .demo-data:hover canvas {\n    opacity: 1;\n  }\n  .demo-data canvas {\n    width: 100%;\n    opacity: 0.3;\n  }\n  .demo-data.selected canvas {\n    opacity: 1;\n  }\n</style>\n\n<div class=\"demo-data {selected ? 'selected' : ''}\" on:click={onClick}>\n  <canvas bind:this={canvas} width={150} height={150} />\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import Slider from \"../../../shared/components/Slider.svelte\";\n\n  export let options;\n  export let value;\n  export let onChange = () => {};\n\n  const { name, min, max } = options;\n  const step = options.step || 1;\n</script>\n\n<style>\n  .slider-container {\n    margin: 10px 0;\n  }\n</style>\n\n<div>\n  <span>{name}</span>\n  <span>{value}</span>\n  <div class=\"slider-container\">\n    <Slider {min} {max} {step} bind:value {onChange} />\n  </div>\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount } from \"svelte\";\n  import { allDemos as demos } from \"../../../shared/js/toy-configs\";\n  import { visualize, getPoints } from \"../../../shared/js/visualize\";\n  import { runDemo, N_EPOCHS } from \"../../../shared/js/run-demo\";\n\n  import Preview from \"./Preview.svelte\";\n  import Parameter from \"./Parameter.svelte\";\n\n  let isRunning = false;\n  let isFinished = false;\n  let lastSelectedDemoIndex = 0;\n  let selectedDemoIndex = 0;\n  let points = [];\n  let demo = demos[selectedDemoIndex];\n  let step = 0;\n  let canvas;\n\n  let nNeighbors = 15;\n  let nNeighborsMin = 3;\n  let nNeighborsMax = 100;\n\n  let minDist = 0.1;\n  let minDistMin = 0;\n  let minDistMax = 1;\n\n  let runningDemo;\n\n  let handlePreviewClick = index => () => {\n    selectedDemoIndex = index;\n    demo = demos[selectedDemoIndex];\n  };\n\n  const playPause = () => {\n    if (isRunning && runningDemo) {\n      runningDemo.pause();\n      isRunning = !isRunning;\n    } else if (!isRunning && runningDemo) {\n      runningDemo.unpause();\n      isRunning = !isRunning;\n    } else if (!isRunning && !runningDemo) {\n      beginRunDemo();\n    }\n  };\n\n  const restart = () => {\n    beginRunDemo();\n  };\n\n  const beginRunDemo = () => {\n    if (runningDemo) runningDemo.pause();\n    isRunning = true;\n    isFinished = false;\n\n    if (nNeighbors >= points.length) {\n      nNeighbors = points.length - 1;\n    }\n    const umapOptions = { nNeighbors, minDist };\n\n    runningDemo = runDemo(points, canvas, umapOptions, currentStep => {\n      step = currentStep;\n      if (step >= N_EPOCHS) {\n        isRunning = false;\n        isFinished = true;\n        runningDemo.pause();\n      }\n    });\n  };\n\n  onMount(() => {\n    points = getPoints(demo);\n    visualize(points, canvas, null, null);\n  });\n\n  afterUpdate(() => {\n    demo = demos[selectedDemoIndex];\n    points = getPoints(demo);\n\n    if (lastSelectedDemoIndex !== selectedDemoIndex) {\n      beginRunDemo();\n      lastSelectedDemoIndex = selectedDemoIndex;\n    }\n  });\n</script>\n\n<style>\n  .playground {\n    overflow: hidden;\n    font-family: \"Open Sans\", sans-serif;\n    z-index: 1000;\n  }\n\n  .playground * {\n    box-sizing: border-box;\n  }\n\n  /* Playground Canvas */\n  .playground-canvas {\n    float: left;\n    width: 55%;\n  }\n\n  .playground-canvas canvas {\n    width: 100%;\n  }\n\n  /* Data Menu */\n  .data-menu {\n    /*float: left;*/\n    /*width: 25%*/\n    width: 40%;\n    float: left;\n    margin-bottom: 24px;\n    overflow: hidden;\n    margin-left: 5%;\n  }\n\n  /* Data Details */\n  .data-details {\n    position: relative;\n  }\n\n  @media (min-width: 768px) {\n    .data-details {\n      width: 40%;\n      float: right;\n    }\n  }\n\n  .data-details .data-controls {\n    width: 50%;\n    float: right;\n    position: relative;\n    overflow: hidden;\n    font-size: 13px;\n  }\n\n  @media (min-width: 768px) {\n    .data-details .data-controls {\n      width: 50%;\n      float: left;\n    }\n  }\n\n  .data-details .play-controls {\n    margin-bottom: 15px;\n    overflow: hidden;\n    position: relative;\n  }\n  .data-details .play-controls button {\n    cursor: pointer;\n    outline: none;\n    border-radius: 50%;\n    background: steelblue;\n    color: white;\n    width: 25%;\n    margin-right: 5%;\n    padding-top: 25%;\n    padding-bottom: 0;\n    border: none;\n    float: left;\n    position: relative;\n  }\n  .data-details .play-controls button:disabled {\n    background: lightgray;\n    cursor: default;\n  }\n  .play-controls i {\n    display: block;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 36px;\n    font-size: 24px;\n    line-height: 0;\n  }\n  @media (min-width: 768px) {\n    .play-controls i {\n      font-size: 30px;\n    }\n  }\n  .play-controls .play-pause i {\n    position: absolute;\n  }\n\n  .steps-display {\n    float: left;\n    text-align: center;\n    width: 25%;\n    line-height: 1.5em;\n    font-size: 13px;\n  }\n\n  @media (min-width: 1024px) {\n    .steps-display {\n      font-size: 16px;\n      line-height: 1.6em;\n    }\n  }\n  .data-details .data-description {\n    width: 50%;\n    float: right;\n    font-size: 13px;\n  }\n\n  .data-description-text {\n    min-height: 60px;\n    margin-bottom: 5px;\n  }\n\n  @media (min-width: 768px) {\n    .data-details .data-description {\n      width: 50%;\n      float: left;\n      margin-right: 0;\n    }\n  }\n\n  .parameters-label {\n    font-style: bold;\n    font-weight: 800;\n    margin-bottom: 8px;\n  }\n</style>\n\n<div class=\"playground\">\n\n  <div class=\"playground-canvas\">\n    <canvas bind:this={canvas} class=\"output\" width=\"600\" height=\"600\" />\n  </div>\n\n  <div class=\"data-menu\">\n    {#each demos as demo, i}\n      <Preview\n        {demo}\n        onClick={handlePreviewClick(i)}\n        selected={i === selectedDemoIndex} />\n    {/each}\n  </div>\n\n  <div class=\"data-details\">\n    <div class=\"data-controls\">\n      <div class=\"play-controls\">\n        <button class=\"play-pause\" on:click={playPause} disabled={isFinished}>\n          {#if isRunning}\n            <i class=\"material-icons\">pause</i>\n          {:else}\n            <i class=\"material-icons\">play_arrow</i>\n          {/if}\n        </button>\n        <button\n          class=\"restart\"\n          on:click={restart}\n          disabled={isRunning || step === 0}>\n          <i class=\"material-icons\">refresh</i>\n        </button>\n        <div class=\"steps-display\">\n          Step\n          <br />\n          <span class=\"step\">{step}</span>\n        </div>\n      </div>\n      <div class=\"umap-options\">\n        <div class=\"parameters-label\">UMAP Parameters</div>\n        <Parameter\n          options={{ name: 'n_neighbors', min: nNeighborsMin, max: nNeighborsMax, step: 1 }}\n          bind:value={nNeighbors}\n          onChange={restart} />\n        <Parameter\n          options={{ name: 'min_dist', min: minDistMin, max: minDistMax, step: 0.01 }}\n          bind:value={minDist}\n          onChange={restart} />\n      </div>\n    </div>\n    <div class=\"data-description\">\n      <div class=\"data-description-text\">{demo.description}</div>\n      <div class=\"data-options\">\n        <div class=\"parameters-label\">Dataset Parameters</div>\n        {#each demo.options as demoOption (demoOption.name)}\n          <Parameter\n            options={demoOption}\n            bind:value={demoOption.start}\n            onChange={restart} />\n        {/each}\n      </div>\n    </div>\n\n  </div>\n</div>\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport { decode, fromString } from \"../../../shared/js/parse-binary\";\nimport { N_BITS_TOY_COMPARISON } from \"../../../shared/js/parameters\";\n\nconst dataCache = new Map();\n\nfunction process(compressed) {\n  const processed = compressed.map((entry, index) => {\n    Object.keys(entry).forEach(tsneOrUmap => {\n      const dict = entry[tsneOrUmap];\n      // Define an object with getter for lazy processing of the data for each key\n      const object = {};\n      Object.keys(dict).forEach(key => {\n        Object.defineProperty(object, key, {\n          get: function() {\n            const cacheKey = `${tsneOrUmap}:${index}:${key}`;\n            if (dataCache.has(cacheKey)) return dataCache.get(cacheKey);\n\n            const encoded = dict[key];\n            const { data, length, nDimensions, ranges } = encoded;\n            const byteArray = fromString(atob(data));\n            const decoded = decode(\n              byteArray,\n              nDimensions * length,\n              N_BITS_TOY_COMPARISON\n            );\n            const unzipped = [];\n            const [rangeX, rangeY] = ranges;\n            const { min: minX, max: maxX } = rangeX;\n            const { min: minY, max: maxY } = rangeY;\n            const scale = 2 ** N_BITS_TOY_COMPARISON;\n            for (let i = 0; i < decoded.length; i += 2) {\n              const x = (decoded[i] / scale) * (maxX - minX) + minX;\n              const y = (decoded[i + 1] / scale) * (maxY - minY) + minY;\n              unzipped.push([x, y]);\n            }\n\n            dataCache.set(cacheKey, unzipped);\n            return unzipped;\n          },\n          enumerable: true\n        });\n      });\n      entry[tsneOrUmap] = object;\n    });\n    return entry;\n  });\n\n  return processed;\n}\n\nexport async function loadData() {\n  const res = await fetch(`toy_comparison_encoded.json`);\n  const json = await res.json();\n  return process(json);\n}\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount, createEventDispatcher } from \"svelte\";\n  import { getPoints, visualize } from \"../../../shared/js/visualize\";\n\n  const dispatch = createEventDispatcher();\n\n  export let points;\n  export let onClick;\n  export let selected;\n  export let hoveredPointIndex = -1;\n  export let selectable = true;\n  export let highlighted = false;\n  export let size = 200;\n\n  function handleMousemove() {\n    var scale = size / canvas.offsetWidth;\n    var mx = event.layerX * scale;\n    var my = event.layerY * scale;\n\n    if (!points && points.length) return;\n\n    var minDist = Infinity;\n    var minIndex = 0;\n    points.forEach((d, i) => {\n      var dx = d.px - mx;\n      var dy = d.py - my;\n\n      var dist = dx * dx + dy * dy;\n      if (dist < minDist) {\n        minDist = dist;\n        minIndex = i;\n      }\n    });\n\n    dispatch(\"hover\", minIndex);\n  }\n\n  let canvas;\n  let svg;\n\n  onMount(() => {\n    visualize(points, canvas, null, null);\n  });\n\n  let prevPoints = null;\n  afterUpdate(() => {\n    if (points == prevPoints) return;\n    prevPoints = points;\n    visualize(points, canvas, null, null);\n  });\n</script>\n\n<style>\n  .demo-data {\n    cursor: pointer;\n    position: relative;\n    font-size: 10px;\n    line-height: 1.2em;\n    box-sizing: border-box;\n    float: left;\n    margin: 2px;\n    padding: 4px;\n    width: calc(33% - 4px);\n    background: white;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.08);\n    position: relative;\n  }\n  .demo-data.non-selectable {\n    cursor: default;\n    box-shadow: none;\n    border-radius: 0px;\n    margin: -1px !important;\n    position: relative;\n    left: 4px;\n  }\n\n  @media (min-width: 480px) {\n    .demo-data {\n      padding: 0px;\n      margin: 4px;\n    }\n  }\n  @media (min-width: 768px) {\n    .demo-data {\n      padding: 0px;\n      margin: 4px;\n    }\n  }\n\n  .demo-data:hover {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n  }\n  .demo-data.non-selectable:hover {\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n  .demo-data.selected::after {\n    content: \"\";\n    border: 2px solid rgba(70, 130, 180, 0.8);\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    box-sizing: border-box;\n    border-radius: 4px;\n  }\n  .demo-data:hover canvas {\n    opacity: 1;\n  }\n  .demo-data canvas {\n    width: 100%;\n    opacity: 0.3;\n  }\n  .demo-data svg {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    pointer-events: none;\n  }\n  .demo-data.highlighted canvas {\n    opacity: 1;\n  }\n  .demo-data.selected canvas {\n    opacity: 1;\n  }\n</style>\n\n<div\n  class=\"demo-data {selected ? 'selected' : ''}\n  {highlighted ? 'highlighted' : ''}\n  {selectable ? '' : 'non-selectable'}\"\n  on:click={onClick}>\n  <canvas\n    bind:this={canvas}\n    width={size}\n    height={size}\n    on:mousemove={handleMousemove} />\n  <svg bind:this={svg} viewBox=\"0 0 {size} {size}\">\n    {#if points[hoveredPointIndex] && points[hoveredPointIndex].px}\n      <circle\n        r=\"5\"\n        fill=\"none\"\n        stroke=\"#000\"\n        stroke-width=\"2\"\n        opacity={hoveredPointIndex > -1 ? 1 : 0}\n        cx={points[hoveredPointIndex].px}\n        cy={points[hoveredPointIndex].py} />\n    {/if}\n  </svg>\n</div>\n","<script>\n  /* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\n  import { afterUpdate, onMount } from \"svelte\";\n  import demos from \"../js/demos\";\n  import { loadData } from \"../js/load_data\";\n  import {\n    getPoints,\n    getDemoPreviewOverride\n  } from \"../../../shared/js/visualize\";\n  import Preview from \"./Preview.svelte\";\n  import { UMAP } from \"umap-js\";\n\n  const DEFAULT_DEMO_INDEX = 11;\n\n  let isLoaded = false;\n  let selectedDemoIndex = DEFAULT_DEMO_INDEX;\n  let preprocessedDemos;\n  let points = [];\n  let selectedDemo = demos[selectedDemoIndex];\n  let hoveredPointIndex = -1;\n  let demoPoints = getPoints(selectedDemo);\n  let entries;\n\n  const GROUP_SIZE = 8;\n\n  const nNeighborsOptions = [3, 5, 15, 30, 50, 100];\n  const perplexityOptions = [3, 5, 15, 30, 50, 100];\n\n  const projections = [];\n\n  const width = 1024;\n  const height = 1024;\n\n  const makeBlankEntries = () => ({\n    tsne: nNeighborsOptions.map(() => []),\n    umap: nNeighborsOptions.map(() => [])\n  });\n\n  const setSelectedDemo = i => {\n    selectedDemoIndex = i;\n    selectedDemo = demos[selectedDemoIndex];\n    demoPoints = getPoints(selectedDemo);\n\n    const nextEntries = makeBlankEntries();\n    const preprocessed = preprocessedDemos[selectedDemoIndex];\n\n    const { tsne, umap } = preprocessed;\n\n    for (let key in umap) {\n      const entry = umap[key];\n      const nNeighbors = key.replace(\"nNeighbors=\", \"\").split(\",\")[0] * 1;\n      const index = nNeighborsOptions.indexOf(nNeighbors);\n      nextEntries.umap[index] = entry.map(([x, y], i) => {\n        return { coords: [x, y], color: demoPoints[i].color };\n      });\n    }\n    for (let key in tsne) {\n      const entry = tsne[key];\n      const perplexity = key.replace(\"perplexity=\", \"\").split(\",\")[0] * 1;\n      const index = perplexityOptions.indexOf(perplexity);\n      nextEntries.tsne[index] = entry.map(([x, y], i) => {\n        return { coords: [x, y], color: demoPoints[i].color };\n      });\n    }\n    entries = nextEntries;\n  };\n\n  const groupDemos = groupSize => {\n    const groups = [];\n    const nGroups = Math.ceil(demos.length / groupSize);\n    for (let i = 0; i < nGroups; i++) {\n      groups.push(demos.slice(groupSize * i, groupSize * (i + 1)));\n    }\n    return groups;\n  };\n\n  const handlePreviewClick = i => () => {\n    setSelectedDemo(i);\n  };\n\n  onMount(async () => {\n    preprocessedDemos = await loadData();\n    setSelectedDemo(DEFAULT_DEMO_INDEX);\n    isLoaded = true;\n  });\n</script>\n\n<style>\n  .container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  .demos {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .figures-container {\n    display: flex;\n    font-size: 12px;\n    width: 80%;\n  }\n\n  .left-column {\n    width: 40px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-end;\n  }\n\n  .left-column-spacer {\n    height: 40px;\n  }\n\n  .left-column-content {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    height: 100%;\n  }\n\n  .left-column-labels {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n    align-items: flex-end;\n    height: 100%;\n    font-weight: 800;\n  }\n\n  .hyperparam-labels {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-end;\n    justify-content: space-around;\n    position: relative;\n    left: 10px;\n  }\n\n  .hyperparam-header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-around;\n    height: 30px;\n    font-weight: 800;\n  }\n\n  .menu {\n    display: flex;\n    width: 80%;\n    padding-left: 35px;\n    box-sizing: border-box;\n  }\n\n  .demo-select {\n    display: flex;\n    flex-direction: column;\n  }\n  .rows-container {\n    /* padding: 40px 0 0 40px; */\n    position: relative;\n    margin-bottom: 10px;\n  }\n\n  .rows {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .row {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .demo-description {\n    padding: 4px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .demo-text {\n    margin-bottom: 10px;\n  }\n\n  .demo-parameter-name {\n    font-weight: 600;\n  }\n\n  @media only screen and (max-width: 800px) {\n    .figures-container {\n      width: 100%;\n    }\n\n    .menu {\n      width: 100%;\n      display: flex;\n      flex-direction: column;\n      padding-left: 0;\n    }\n  }\n</style>\n\n{#if isLoaded}\n  <div class=\"container\">\n    <div class=\"figures-container\">\n      <div class=\"left-column\">\n        <div class=\"left-column-spacer\" />\n        <div class=\"left-column-content\">\n          <div class=\"left-column-labels\">\n            <div>t-SNE</div>\n            <div>UMAP</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"right-column\">\n        <div class=\"rows-container\">\n          <div class=\"hyperparam-header\">perplexity / n_neighbors</div>\n          <div class=\"hyperparam-labels\">\n            {#each nNeighborsOptions as nNeighbors}\n              <div>{nNeighbors}</div>\n            {/each}\n          </div>\n          <div class=\"rows\">\n            {#each Object.keys(entries) as key}\n              <div class=\"row\">\n                {#each entries[key] as points}\n                  <Preview\n                    {points}\n                    on:hover={e => (hoveredPointIndex = e.detail)}\n                    {hoveredPointIndex}\n                    onClick={() => {}}\n                    highlighted={true}\n                    selectable={false}\n                    selected={false} />\n                {/each}\n              </div>\n            {/each}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"menu\">\n      <div class=\"demo-select\">\n        {#each groupDemos(GROUP_SIZE) as group, groupIndex}\n          <div class=\"demos\">\n            {#each group as demo, i}\n              <Preview\n                points={demo.previewOverride ? getDemoPreviewOverride(demo) : getPoints(demo)}\n                onClick={handlePreviewClick(groupIndex * GROUP_SIZE + i)}\n                selected={groupIndex * GROUP_SIZE + i === selectedDemoIndex} />\n            {/each}\n          </div>\n        {/each}\n      </div>\n      <div class=\"demo-description\">\n        <div class=\"demo-text\">{selectedDemo.description}</div>\n        {#each selectedDemo.options as option}\n          <div class=\"demo-parameters\">\n            <span class=\"demo-parameter-name\">{option.name}:</span>\n            <span>{option.start}</span>\n          </div>\n        {/each}\n      </div>\n    </div>\n  </div>\n{:else}\n  <div>Loading...</div>\n{/if}\n","---\ntitle: Understanding UMAP\nlayout: ./Layout.svelte\n---\n\n<!-- Copyright 2019 Google LLC All Rights Reserved.\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n==============================================================================-->\n\n```js exec\nimport Figure from \"./Figure.svelte\";\nimport Spacer from \"./Spacer.svelte\";\nimport FmnistLabel from \"./FminstLabel.svelte\";\n\nimport CechVisualization from \"../visualizations/cech_visualization/components/Visualization.svelte\";\nimport FmnistVisualization from \"../visualizations/fmnist_visualization/components/VisualizationSideBySide.svelte\";\nimport HyperparametersVisualization from \"../visualizations/hyperparameters_visualization/components/Visualization.svelte\";\nimport MammothUmapVisualization from \"../visualizations/mammoth_visualization/components/VisualizationUmap.svelte\";\nimport MammothTsneVisualization from \"../visualizations/mammoth_visualization/components/VisualizationTsne.svelte\";\nimport ToyVisualization from \"../visualizations/toy_visualization/components/Visualization.svelte\";\nimport ToyComparisonVisualization from \"../visualizations/toy_comparison_visualization/components/Visualization.svelte\";\n```\n\n<h1 class=\"article-title\">Understanding UMAP</h1>\n\n_Andy Coenen, Adam Pearce_ | _[Google PAIR](https://ai.google/research/teams/brain/pair)_\n\n<Spacer height={20} />\n\nDimensionality reduction is a powerful tool for machine learning practitioners to visualize and understand large, high dimensional datasets. One of the most widely used techniques for visualization is [t-SNE](https://lvdmaaten.github.io/tsne/), but its performance suffers with large datasets and using it correctly can be [challenging](https://distill.pub/2016/misread-tsne/).\n\n[UMAP](https://github.com/lmcinnes/umap) is a new technique by McInnes et al. that offers a number of advantages over t-SNE, most notably increased speed and better preservation of the data's global structure. In this article, we'll take a look at the theory behind UMAP in order to better understand how the algorithm works, how to use it effectively, and how its performance compares with t-SNE.\n\n<Figure>\n  <ToyVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 1: </span>Apply UMAP projection to various toy datasets, powered by <a href=\"https://github.com/PAIR-code/umap-js\" target=\"new\">umap-js</a>.\n  </span>\n</Figure>\n\nSo what does UMAP bring to the table? Most importantly, UMAP is fast, scaling well in terms of both dataset size and dimensionality. For example, UMAP can project the 784-dimensional, 70,000-point [MNIST](http://yann.lecun.com/exdb/mnist/) dataset in less than 3 minutes, compared to 45 minutes for scikit-learn's t-SNE implementation. Additionally, UMAP tends to better preserve the global structure of the data. This can be attributed to UMAP's strong theoretical foundations, which allow the algorithm to better strike a balance between emphasizing local versus global structure.\n\n## UMAP vs t-SNE, at first glance\n\nBefore diving into the theory behind UMAP, let's take a look at how it performs on real-world, high-dimensional data. The following visualization shows a comparison between using UMAP and t-SNE to project a subset of the 784-dimensional [Fashion MNIST](https://github.com/zalandoresearch/fashion-mnist) dataset down to 3 dimensions. Notice how well clustered each different category is (local structure), while similar categories (such as <FmnistLabel label=\"sandal\"/>, <FmnistLabel label=\"sneaker\"/>, and <FmnistLabel label=\"ankle boot\"/>) tend to colocate (global structure).\n\n<Figure>\n  <FmnistVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 2: </span>Dimensionality reduction applied to the Fashion MNIST dataset. 28x28 images of clothing items in 10 categories are encoded as 784-dimensional vectors and then projected to 3 using UMAP and t-SNE.\n  </span>\n</Figure>\n\nWhile both algorithms exhibit strong local clustering and group similar categories together, UMAP much more clearly separates these groups of similar categories from each other. It's also worth noting that UMAP projection of the dataset took 4 minutes in comparison to 27 minutes with multicore t-SNE.\n\n## A dip into UMAP theory\n\nUMAP, at its core, works very similarly to t-SNE - both use graph layout algorithms to arrange data in low-dimensional space. In the simplest sense, UMAP constructs a high dimensional graph representation of the data then optimizes a low-dimensional graph to be as structurally similar as possible. While the mathematics UMAP uses to construct the high-dimensional graph is advanced, the intuition behind them is remarkably simple.\n\nIn order to construct the initial high-dimensional graph, UMAP builds something called a \"fuzzy simplicial complex\". This is really just a representation of a weighted graph, with edge weights representing the likelihood that two points are connected. To determine connectedness, UMAP extends a radius outwards from each point, connecting points when those radii overlap. Choosing this radius is critical - too small a choice will lead to small, isolated clusters, while too large a choice will connect everything together. UMAP overcomes this challenge by choosing a radius locally, based on the distance to each point's *n*th nearest neighbor. UMAP then makes the graph \"fuzzy\" by decreasing the likelihood of connection as the radius grows. Finally, by stipulating that each point must be connected to at least its closest neighbor, UMAP ensures that local structure is preserved in balance with global structure.\n\n<Figure>\n  <CechVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 3: </span>Adjust the slider to extend a radius outwards from each point, computed by the distance to its nth nearest neighbor. Notice that past the intersection with the first neighbor, the radius begins to get fuzzy, with subsequent connections appearing with less weight;\n  </span>\n</Figure>\n\nOnce the high-dimensional graph is constructed, UMAP optimizes the layout of a low-dimensional analogue to be as similar as possible. This process is essentially the same as in t-SNE, but using a few clever tricks to speed up the process.\n\nThe key to effectively using UMAP lies in understanding the construction of the initial, high-dimensional graph. Though the ideas behind the process are very intuitive, the algorithm relies on some advanced mathematics to give strong theoretical guarantees about how well this graph actually represents the data. Interested readers can dive deeper into the entire process in the supplementary section: [A deeper dive into UMAP theory](__URL_PREFIX__/supplement.html).\n\n## UMAP Parameters\n\nBy understanding the theory behind UMAP, it becomes much easier to understand the algorithm's parameters, especially compared with the `perplexity` parameter in t-SNE. We'll consider the two most commonly used parameters: `n_neighbors` and `min_dist`, which are effectively used to control the balance between local and global structure in the final projection.\n\n<Figure>\n  <HyperparametersVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 4: </span>\n    UMAP projection of various toy datasets with a variety of common values for the <code>n_neighbors</code> and <code>min_dist</code> parameters.\n  </span>\n</Figure>\n\nThe most important parameter is `n_neighbors` - the number of approximate nearest neighbors used to construct the initial high-dimensional graph. It effectively controls how UMAP balances local versus global structure - low values will push UMAP to focus more on local structure by constraining the number of neighboring points considered when analyzing the data in high dimensions, while high values will push UMAP towards representing the big-picture structure while losing fine detail.\n\nThe second parameter we’ll investigate is `min_dist`, or the minimum distance between points in low-dimensional space. This parameter controls how tightly UMAP clumps points together, with low values leading to more tightly packed embeddings. Larger values of `min_dist` will make UMAP pack points together more loosely, focusing instead on the preservation of the broad topological structure.\n\nThe following visualization - extended from excellent work by [Max Noichl](https://homepage.univie.ac.at/noichlm94/) - is an exploration of the impact of UMAP parameters on a 2D projection of 3D data. By changing the `n_neighbors` and `min_dist` parameters, you can explore their impact on the resulting projection.\n\n<Figure>\n  <MammothUmapVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 5: </span>\n    UMAP projections of a 3D woolly mammoth skeleton (50k points, 10k shown) into 2 dimensions, with various settings for the <code>n_neighbors</code> and <code>min_dist</code> parameters.\n  </span>\n</Figure>\n\nWhile most applications of UMAP involve projection from high-dimensional data, the projection from 3D serves as a useful analogy to understand how UMAP prioritizes global vs local structure depending on its parameters. As `n_neighbors` increases, UMAP connects more and more neighboring points when constructing the graph representation of the high-dimensional data, which leads to a projection that more accurately reflects the global structure of the data. At very low values, any notion of global structure is almost completely lost. As the `min_dist` parameter increases, UMAP tends to \"spread out\" the projected points, leading to decreased clustering of the data and less emphasis on global structure.\n\n## UMAP vs t-SNE, revisited\n\nThe biggest difference between the the output of UMAP when compared with t-SNE is this balance between local and global structure - UMAP is often better at preserving global structure in the final projection. This means that the inter-cluster relations are potentially more meaningful than in t-SNE. However, it's important to note that, because UMAP and t-SNE both necessarily warp the high-dimensional shape of the data when projecting to lower dimensions, any given axis or distance in lower dimensions still isn’t directly interpretable in the way of techniques such as PCA.\n\n<Figure>\n  <MammothTsneVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 6: </span>\n    A comparison between UMAP and t-SNE projections of a 3D woolly mammoth skeleton (50,000 points) into 2 dimensions, with various settings for parameters. Notice how much more global structure is preserved with UMAP, particularly with larger values of <code>n_neighbors</code>.\n  </span>\n</Figure>\n\nGoing back to the 3D mammoth example, we can easily see some big differences between the two algorithms' output. For lower values of the `perplexity` parameter, t-SNE tends to \"spread out\" the projected data with very little preservation of the global structure. In contrast, UMAP tends to group adjacent pieces of the higher-dimensional structure together in low dimensions, which reflects an increased preservation of global structure. Note that, using t-SNE, it takes an extremely high perplexity (~1000) to begin to see the global structure emerge, and at such large perplexity values the time to compute is dramatically longer. It's also notable that t-SNE projections vary widely from run to run, with different pieces of the higher-dimensional data projected to different locations. While UMAP is also a stochastic algorithm, it's striking how similar the resulting projections are from run to run and with different parameters. This is due, again, to UMAP's increased emphasis on global structure in comparison to t-SNE.\n\nIt's worth noting that t-SNE and UMAP wind up performing very similarly on the toy examples from earlier figures, with the notable exception of the following example: A dense, tight cluster inside of a wide, sparse cluster. Interestingly, UMAP is unable to separate the two nested clusters, especially when dimensionality is high.\n\n<Figure>\n  <ToyComparisonVisualization />\n  <span slot=\"caption\">\n    <span class=\"figure-number\">Figure 7: </span>\n    Comparison between UMAP and t-SNE projecting various toy datasets.\n  </span>\n</Figure>\n\nThe failure of the algorithm to handle this case of \"containment\" may be explained by UMAP's use of local distances in the initial graph construction. Since distances between points in high dimensions tend to be very similar ([the curse of dimensionality](https://en.wikipedia.org/wiki/Curse_of_dimensionality)), UMAP seems to be connecting the outer points of the inner cluster to those of the outer cluster. This, in effect, blends the two clusters together.\n\n<!-- In fact, t-SNE generally makes \"prettier\" figures than UMAP in many of the toy examples. This is because t-SNE tends to distort the data more than UMAP, spreading the data out more evenly in lower dimensional space. Since UMAP is more incentivized to preserve global structure, the data is often less spread out but less distorted. -->\n\n<!-- A useful way of conceptualizing dimensionality reduction is in terms of information - PCA (the classic dimensionality reduction technique) works by finding the linear projection which maximizes separation of points. This is essentially the same as preserving information. This makes intuitive sense - the more we spread points out the better we can group the similar and separate the dissimilar. t-SNE and UMAP both try to mazimize the information density of the projected data via a force-directed graph layout,and because this process is nonlinear they both wind up \"warping\" the data to fit it into a lower-dimensional space. The main difference between t-SNE and UMAP is the extent of this warping: t-SNE warps the data more, which leads to \"prettier\", more information-dense figures at the expense of global structure. Since UMAP better preserves global structure, the data is less \"warped\". -->\n\n## How to (mis)read UMAP\n\nWhile UMAP offers a number of advantages over t-SNE, it's by no means a silver bullet - and reading and understanding its results requires some care. It's worth revisiting our [previous work on (mis)reading t-SNE](https://distill.pub/2016/misread-tsne/), since many of the same takeaways apply to UMAP:\n\n#### 1. Hyperparameters really matter\n\nChoosing good values isn't easy, and depends on both the data and your goals (eg, how tightly packed the projection ought to be). This is where UMAP's speed is a big advantage - By running UMAP multiple times with a variety of hyperparameters, you can get a better sense of how the projection is affected by its parameters.\n\n#### 2. Cluster sizes in a UMAP plot mean nothing\n\nJust as in t-SNE, the size of clusters relative to each other is essentially meaningless. This is because UMAP uses local notions of distance to construct its high-dimensional graph representation.\n\n#### 3. Distances between clusters might not mean anything\n\nLikewise, the distances between clusters is likely to be meaningless. While it's true that the global positions of clusters are better preserved in UMAP, the distances between them are not meaningful. Again, this is due to using local distances when constructing the graph.\n\n#### 4. Random noise doesn’t always look random.\n\nEspecially at low values of `n_neighbors`, spurious clustering can be observed.\n\n#### 5. You may need more than one plot\n\nSince the UMAP algorithm is stochastic, different runs with the same hyperparameters can yield different results. Additionally, since the choice of hyperparameters is so important, it can be very useful to run the projection multiple times with various hyperparameters.\n\n## Conclusion\n\nUMAP is an incredibly powerful tool in the data scientist's arsenal, and offers a number of advantages over t-SNE. While both UMAP and t-SNE produce somewhat similar output, the increased speed, better preservation of global structure, and more understandable parameters make UMAP a more effective tool for visualizing high dimensional data. Finally, it's important to remember that no dimensionality reduction technique is perfect - by necessity, we're distorting the data to fit it into lower dimensions - and UMAP is no exception. However, by building up an intuitive understanding of how the algorithm works and understanding how to tune its parameters, we can more effectively use this powerful tool to visualize and understand large, high-dimensional datasets.\n\n<Spacer height={200} />\n\n<footer>\n\n### Acknowledgements\n\n<section class=\"acknowledgements\">\n\nWe'd like to thank [Max Noichl](https://homepage.univie.ac.at/noichlm94/) for the delightful mammoth visualization idea, and the [Smithsonian Institute](https://3d.si.edu/) for the 3D mammoth model. We'd also like to thank [Leland McInnes](https://twitter.com/leland_mcinnes?lang=en) for his excellent feedback, and of course the UMAP library itself.\n\nSource code available on [github](https://github.com/PAIR-code/understanding-umap). Interactive UMAP projections powered by [umap-js](https://github.com/PAIR-code/umap-js). 3D Scatter plots powered by [scatter-gl](https://github.com/PAIR-code/scatter-gl).\n\n</section>\n\n</footer>\n","/* Copyright 2019 Google LLC All Rights Reserved.\n\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n  ==============================================================================*/\n\nimport Article from \"./article/Article.svx\";\nimport \"./global.css\";\n\nexport default new Article({\n  target: document.body\n});\n"],"names":["noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","create_slot","definition","ctx","slot_ctx","get_slot_context","$$scope","get_slot_changes","changed","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","setAttribute","set_data","set_input_value","input","set_style","key","important","style","setProperty","current_component","set_current_component","component","get_current_component","Error","onMount","$$","on_mount","push","afterUpdate","after_update","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","call","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","add_flush_callback","flush","seen_callbacks","Set","shift","update","pop","callback","has","add","fragment","dirty","before_update","p","outroing","outros","SvelteElement","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","outro_and_destroy_block","lookup","bind","props","indexOf","bound","mount_component","on_destroy","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","init","instance","create_fragment","not_equal","prop_names","parent_component","context","Map","ready","ret","hydrate","l","Array","from","childNodes","intro","HTMLElement","[object Object]","super","this","attachShadow","mode","slotted","_oldValue","newValue","$destroy","index","splice","SvelteComponent","height","label","onClick","preventDefault","stopPropagation","window","_selectFmnistLabel","t","n","obj","left","right","parent","dimension","content","scoreFunction","prototype","bubbleUp","sinkDown","peek","remove","size","Math","floor","u","h","s","kdTree","isArray","root","sort","toJSON","nearest","f","g","abs","min","balanceFactor","max","log","BinaryHeap","exports","NaN","compare","bisectRight","ascending","x","lo","hi","mid","e10","sqrt","e5","e2","tickIncrement","start","stop","count","step","power","LN10","error","pow","constructor","factory","extend","Color","reI","reN","reP","reHex3","reHex6","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","format","trim","toLowerCase","exec","Rgb","parseInt","rgbn","rgba","hsla","hasOwnProperty","rgbConvert","opacity","arguments","rgb_formatHex","hex","rgb_formatRgb","isNaN","round","toString","Hsl","hslConvert","hsl2rgb","m1","m2","define","copy","channels","displayable","formatHsl","brighter","darker","deg2rad","PI","rad2deg","Xn","Yn","Zn","t0","t1","t2","t3","labConvert","Lab","Hcl","hcl2lab","z","rgb2lrgb","y","xyz2lab","lab2xyz","lrgb2rgb","cos","sin","atan2","hclConvert","A","B","C","D","E","ED","EB","BC_DA","Cubehelix","gamma","nogamma","exponential","constant","linear","bl","cubehelixConvert","cosh","sinh","rgbGamma","end","colorRgb","reA","reB","source","number","am","bm","bs","bi","lastIndex","q","one","zero","join","Date","setTime","nb","na","valueOf","unit","identity","normalize","bimap","domain","range","interpolate","d0","d1","r0","r1","polymap","j","reverse","bisect","transformer","transform","untransform","unknown","piecewise","output","interpolateValue","clamp","rescale","scale","invert","interpolateNumber","_","rangeRound","interpolateRound","toExponential","coefficient","formatDecimal","prefixExponent","re","formatSpecifier","specifier","match","FormatSpecifier","fill","align","sign","symbol","width","comma","precision","undefined","exponent","%","toFixed","toPrecision","formatRounded","X","toUpperCase","locale","formatPrefix","prefixes","grouping","thousands","group","Number","substring","currencyPrefix","currency","currencySuffix","decimal","numerals","replace","formatNumerals","String","percent","minus","nan","newFormat","formatTypes","prefix","test","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","i1","i0","formatTrim","charCodeAt","Infinity","padding","step0","step1","tickStep","precisionPrefix","precisionRound","precisionFixed","linearish","ticks","isFinite","ceil","tickFormat","nice","apply","formatLocale","random","seed","_seed","opt_minOrMax","opt_max","next","constrain","getRandom","nextFloat","getSinePoint","pointRadius","makeSine","nPoints","dimensions","points","point","onSliderChange","onChange","extent","nNearest","refreshPoints","POINT_RADIUS","COLORS","colorScale","scaleLinear","canvas","lastNNearest","nearestEntries","distances","maxDistances","nearestRadii","colors","compute","tree","entry","distance","fromPointToFurthest","fromPointToNearest","fromNearestToItsFurthest","fromNearestToItsNearest","redraw","getContext","clearRect","beginPath","arc","fillStyle","nearestRadius","maxRadius","radius","gradient","createRadialGradient","addColorStop","innerRadius","maxDistance","other","otherIndex","fraction","moveTo","lineTo","lineWidth","strokeStyle","stroke","reorderedLabels","async","loadData","res","fetch","originalToReordered","oldIndex","newIndex","labels","originalLabels","labelNames","process","json","concat","swizzle","module","args","results","len","arg","Function","getOwnPropertyDescriptor","wrap","reverseNames","colorNames","cs","to","get","num","hexDouble","str","string","val","model","hsl","hwb","hexAlpha","i2","parseFloat","alpha","hwba","keyword","reverseKeywords","cssKeywords","convert","hsv","cmyk","xyz","lab","lch","ansi16","ansi256","hcg","apple","defineProperty","delta","rdif","gdif","bdif","v","diff","diffc","reversed","currentClosestKeyword","currentClosestDistance","smin","lmin","sl","vmin","wh","ratio","y2","x2","z2","hr","ansi","mult","rem","colorString","split","char","integer","hue","chroma","mg","pure","w","deriveBFS","fromModel","graph","models","keys","conversions","buildGraph","queue","current","adjacents","adjacent","unshift","link","wrapConversion","toModel","path","cur","conversion","routes","route","wrappedFn","result","wrapRounded","raw","wrapRaw","_slice","skippedModels","hashedModelKeys","limiters","valpha","newArr","zeroArray","hashedKeys","JSON","stringify","limit","freeze","getset","channel","modifier","maxfn","arr","places","self","percentString","array","object","unitArray","unitObject","roundTo","roundToPlace","saturationl","lightness","saturationv","wblack","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","darken","saturate","desaturate","whiten","blacken","grayscale","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","newAlpha","labelName","selectedLabelIndices","labelIndex","getBackgroundColor","onCategoryClick","toggleOrbit","isOrbiting","isLoaded","umapContainer","tsneContainer","umapScatterGL","tsneScatterGL","umapDataset","tsneDataset","metadata","colorsByLabel","onPointClick","stopOrbitAnimations","stopOrbitAnimation","findIndex","shiftKey","clear","$$invalidate","setDefaultPointColorer","scatterGl","setPointColorer","umapPoints","tsnePoints","umapProjection","vector","tsneVector","tsneProjection","dataset","spriteMetadata","spriteImage","singleSpriteSize","scatterGLOptions","renderMode","selectEnabled","onCameraMove","ScatterGL","camera","zoom","onHover","setHoverPointIndex","render","isSelected","noneSelected","startOrbitAnimation","BitArray","backingArray","Uint32Array","byteArray","nBits","parseBitArray","byte","bitIndex","on","parsed","absBitIndex","Uint8Array","TSNE_MAMMOTH_PERPLEXITIES","N_BITS_HYPERPARAMETERS","N_BITS_TOY_COMPARISON","N_BITS_MAMMOTH","dataCache","cacheKey","encoded","nDimensions","ranges","fromString","atob","decoded","decode","unzipped","rangeX","rangeY","minX","maxX","minY","maxY","set","enumerable","normal","d3.randomNormal","normalVector","dim","Point","coords","makePoints","originals","xExtent","d3.extent","yExtent","xScale","d3\n    .scaleLinear","yScale","c1","c2","addSpatialColors","angleColor","multiplyScalar","addNoise","sinePreview","angle","amplitude","freq","extendedDemos","description","generator","nArms","pointsPerArm","armVector","noise","nClusters","perCluster","perLink","centroids","centroid","lastCentroid","nLines","nPixels","previewOverride","noiseParam","nVectors","vectorSize","minFreq","maxFreq","progress","phase","phaseOffset","demos","p1","p2","p3","x1","y1","numPoints","allDemos","optionsOverrides","originalDemos","demo","modified","parse","option","override","getPoints","params","getDemoPreviewOverride","circle","visualize","message","no3d","fillRect","d3","zExtent","zScale","centerX","centerY","is3d","px","py","font","fillText","hoveredPointIndex","selected","highlighted","selectable","handleMousemove","dispatch","svg","prevPoints","offsetWidth","mx","layerX","my","layerY","minDist","minIndex","dx","dy","dist","__values","Symbol","iterator","done","tauRandInt","filled","zeros","sum","reduce","vec","e_1","_a","vec_1","vec_1_1","item","e_1_1","return","nSamples","poolSize","rejectSample","broken","rows","col","__importStar","mod","__esModule","utils","require$$0","makeHeap","makeArrays","fillValue","heap","heapPush","row","flag","indices","weights","uncheckedHeapPush","isNew","iSwap","ic1","ic2","heapShape2","siftDown","heap1","heap2","ceiling","elt","leftChild","rightChild","swap","temp1","temp2","currentGraph","nVertices","nNeighbors","maxCandidates","candidateNeighbors","idx","isn","tauRand","indHeap","distHeap","indHeapIndex","distHeapIndex","ind","resultIndex","__read","ar","__spread","SparseMatrix","cols","values","dims","entries","nRows","nCols","makeKey","checkDims","defaultValue","getDims","getRows","getCols","getValues","vals","toArray","_this","matrix","elementWise","scalar","zeroIndices","removeByZeroIndex","nextValues","nextRows","nextCols","normType","normFn","normFns","colsByRow","nextMatrix","_loop_1","norm","_b","_c","xs","op","visited","operate","nextValue","valuesA","rowsA","colsA","valuesB","rowsB","colsB","indptr","currentRow","FlatTree","hyperplanes","offsets","children","selectSide","hyperplane","offset","margin","nTrees","leafSize","makeEuclideanTree","splitResults","leftIndex","rightIndex","hyperplaneOffset","hyperplaneVector","nLeft","nRight","side","indicesLeft","indicesRight","euclideanRandomProjectionSplit","isLeaf","makeTree","nNodes","numNodes","nLeaves","numLeaves","recursiveFlatten","nodeNum","leafNum","oldNodeNum","flattenTree","rpForest","rpForest_1","rpForest_1_1","require$$1","require$$2","require$$3","distanceFn","leafArray","nIters","rho","rpTreeInit","rejectionSample","buildCandidates","cj","ck","deheapSort","initFromRandom","queryPoints","_heap","initFromTree","_tree","searchFlatTree","initialization","getCSR","tried","vertex","smallestFlagged","candidates","candidates_1","candidates_1_1","candidate","forest","e_2","forest_1","forest_1_1","e_2_1","errorCalculation","parameters","parameterizedFunction","func","endsWith","TypeError","currentMin","minValue","currentMax","maxValue","RangeError","_options$min","autoMinMax","_options$max","factor","LuDecomposition","LUcolj","kmax","lu","WrapperMatrix2D","checkMatrix","clone","columns","pivotVector","pivotSign","LU","Matrix","isSingular","subMatrixRow","determinant","isSquare","lowerTriangularMatrix","upperTriangularMatrix","pivotPermutationVector","hypotenuse","getFilled2DArray","SingularValueDecomposition","computeLeftSingularVectors","computeRightSingularVectors","autoTranspose","wantu","Boolean","wantv","swapped","transpose","aux","console","warn","nu","ni","U","V","work","si","nct","nrt","mrc","pp","eps","EPSILON","kase","MIN_VALUE","ks","sn","sp","spm1","epm1","sk","ek","tmp","Y","threshold","scols","Ls","rightSingularVectors","VL","mmul","vrows","urows","VLU","solve","diag","vcols","ucols","condition","norm2","rank","tol","ii","diagonal","leftSingularVectors","isMatrix","diagonalMatrix","checkRowIndex","outer","checkColumnIndex","checkRowVector","to1DArray","checkColumnVector","checkIndices","rowIndices","columnIndices","checkRowIndices","column","checkColumnIndices","some","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","sumByRow","sumByColumn","BaseView","AbstractMatrix","static","species","MatrixTransposeView","rowIndex","columnIndex","MatrixRowView","MatrixSubView","MatrixSelectionView","MatrixRowSelectionView","MatrixColumnSelectionView","MatrixColumnView","MatrixFlipRowView","MatrixFlipColumnView","superCtor","newRows","newColumns","newData","newMatrix","rng","matrix1","matrix2","klass","jj","previousColumn","isEchelonForm","checked","isReducedEchelonForm","rowRep","colRep","setSubMatrix","mulS","rowVector","getRow","row1","row2","temp","columnVector","getColumn","column1","column2","by","sumAll","prod","vector2","vector1","dot","Bcolj","a11","b11","a12","b12","a21","b21","a22","b22","m3","m4","m5","c00","c01","c10","c11","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m6","m7","m8","m9","m12","m13","m14","m15","m16","m17","m18","c02","c12","c20","c21","c22","r2","embed","mat","resultat","blockMult","halfRows","halfCols","subMatrix","sub","scaled","setRow","setColumn","compareFunction","compareNumbers","trace","subMatrix0","subMatrix1","subMatrix2","selectionView","det","svdSolution","SvDecomposition","transposeView","rand","eye","neg","tensorProduct","kroneckerProduct","staticMethodWithArgs","eval2","eval","operator","inplaceOp","fillTemplateFunction","inplaceOpS","inplaceOpM","staticOp","methods","method","mathMethod","inplaceMeth","staticMeth","methodWithArg","inplaceMethWithArgs","staticMethWithArgs","tmplVar","inplaceMethod2","inplaceMethodS","inplaceMethodM","staticMethod2","template","nColumns","isInteger","QrDecomposition","qr","rdiag","nrm","QR","Rdiag","isFullRank","orthogonalMatrix","inverse","useSVD","leftHandSide","rightHandSide","damping","gradientDifference","evaluatedData","gradientFunc","paramFunction","ans","param","auxParams","funcParam","gradientFunction","matrixFunc","matrixFunction","inverseMatrix","mul","levenbergMarquardt","maxIterations","errorTolerance","minValues","maxValues","initialValues","parLen","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","converged","iteration","parameterValues","parameterError","__awaiter","thisArg","_arguments","P","reject","fulfilled","rejected","__generator","body","sent","trys","ops","verb","throw","__importDefault","default","nnDescent","require$$4","ml_levenberg_marquardt_1","require$$5","UMAP","learningRate","localConnectivity","nComponents","nEpochs","negativeSampleRate","repulsionStrength","setOpMixRatio","spread","transformQueueSize","targetMetric","targetWeight","targetNNeighbors","euclidean","isInitialized","embedding","optimizationState","OptimizationState","setParam","fit","initializeFit","optimizeLayout","fitAsync","optimizeLayoutAsync","setSupervisedProjection","setPrecomputedKNN","knnIndices","knnDistances","getNEpochs","knnResults","nearestNeighbors","fuzzySimplicialSet","makeSearchFns","searchGraph","makeSearchGraph","processGraphForSupervisedProjection","initializeSimplicialSetEmbedding","head","tail","epochsPerSample","initializeOptimization","prepareForOptimizationLoop","makeInitializations","search","makeInitializedNNSearch","knn","neighbor","maximum","toTransform","rawData","initializeSearch","adjustedLocalConnectivity","smoothKNNDistance","sigmas","rhos","computeMembershipStrengths","normed","csrMatrix","initTransform","reshape2d","graphMax","eliminateZeros","makeEpochsPerSample","assignOptimizationStateParameters","headEmbedding","tailEmbedding","currentEpoch","farDist","categoricalSimplicialSetIntersection","optimizeLayoutStep","getEmbedding","metricNNDescent","makeNNDescent","log2","makeForest","makeLeafArray","_d","_e","sparseMatrix","prodMatrix","pairwiseMultiply","subtract","simplicialSet","unknownDist","intersection","fastIntersection","resetLocalConnectivity","nIter","bandwidth","ithDistances","nonZeroDists","interpolation","psum","exp","meanIthDistances","mean","meanDistances","graphValues","state","moveOther","epochsPerNegativeSample","epochOfNextNegativeSample","epochOfNextSample","initialAlpha","findABParams","distSquared","rDist","gradCoeff","gradD","clip","nNegSamples","k_1","other_1","distSquared_1","gradCoeff_1","epochCallback","epochCompleted","shouldStop","isFinished","err","normX","normY","clipValue","xv","yv","umap_1","selectedDemo","nNeighborsOptions","minDistOptions","groupDemos","N_PER_ROW","handlePreviewClick","groupIndex","selectedDemoIndex","preprocessedDemos","demoPoints","matchResponsive","matches","mediaQuery","matchMedia","addListener","setSelectedDemo","nextEntries","makeBlankEntries","preprocessed","groupSize","groups","nGroups","parseProjections","encodedProjections","parsedProjections","tsneData","tsnePromise","loadTSNE","_loadTSNE","umapData","umapPromise","loadUmap","mammoth","projections","_loadUmap","mammoth3dData","mammoth3dPromise","loadMammoth3D","mammoth3d","_loadMammoth3D","colorIndices","colorIndicesPromise","loadColorIndices","colorOffsets","labelOffsets","colorIndex","nColorPoints","_loadColorIndices","all","easeInOutQuad","TWEEN_DURATION","deepCopy2D","Tween","easingFn","tweenDuration","isActive","onAnimationFrame","startTime","now","requestAnimationFrame","startX","startY","endX","endY","timeElapsed","percentTime","applyTween","projection","handleMouseout","tween","tweenCallback","render2d","lastProjection","beginTween","title","times","nNeighborsIndex","sliderWidth","neighbors","dists","distsIndex","getCurrentProjection","getKey","container","scatterGL","model3d","styles","fog","enabled","scaleHover","colorHover","scatterGLObj","perplexityIndex","perplexities","perplexity","umap","tsne","fake","tsneProjections","umapProjections","N_EPOCHS","timescale","demoOption","restart","isRunning","nNeighborsMin","nNeighborsMax","minDistMin","minDistMax","playPause","old_blocks","get_key","dynamic","list","destroy","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","child_ctx","will_move","did_move","first","new_block","old_block","new_key","old_key","runningDemo","lastSelectedDemoIndex","beginRunDemo","pause","stepCb","frameId","paused","chunk","iterate","timeout","setTimeout","cancelAnimationFrame","unpause","runDemo","currentStep","tsneOrUmap","dict","GROUP_SIZE","DEFAULT_DEMO_INDEX","perplexityOptions","_metadata","spread_props","levels","updates","to_null_out","accounted_for","layout"],"mappings":"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"}